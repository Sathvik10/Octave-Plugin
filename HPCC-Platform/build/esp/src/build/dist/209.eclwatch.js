(function(){
(this||window)["webpackJsonp"].registerAbsMids({
	"@hpcc-js/tree":"./node_modules/@hpcc-js/tree/dist/index.min.js",
	"crossfilter":"./node_modules/crossfilter2/crossfilter.min.js",
	"dojo/store/Observable":"./node_modules/dojo/store/Observable.js"
})
})(),(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[209],{

/***/ "./node_modules/@hpcc-js/tree/dist/index.min.js":
/*!******************************************************!*\
  !*** ./node_modules/@hpcc-js/tree/dist/index.min.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?e(exports,__webpack_require__(/*! @hpcc-js/api */ "./node_modules/@hpcc-js/api/dist/index.min.js"),__webpack_require__(/*! @hpcc-js/common */ "./node_modules/@hpcc-js/common/dist/index.min.js")):undefined}(this,function(t,e,n){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e){return t.parent===e.parent?1:2}function a(t,e){return t+e.x}function l(t,e){return Math.max(t,e.y)}function s(){var t=o,e=1,n=1,r=!1;function i(i){var o,s=0;i.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(a,0)/t.length}(n),e.y=function(t){return 1+t.reduce(l,0)}(n)):(e.x=o?s+=t(e,o):0,e.y=0,o=e)});var u=function(t){for(var e;e=t.children;)t=e[0];return t}(i),h=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=u.x-t(u,h)/2,p=h.x+t(h,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(p-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function u(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function h(t,e){var n,r,i,o,a,l=new f(t),s=+t.value&&(l.value=t.value),u=[l];for(null==e&&(e=c);n=u.pop();)if(s&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)u.push(r=n.children[o]=new f(i[o])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(d)}function c(t){return t.children}function p(t){t.data=t.data.data}function d(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function f(t){this.data=t,this.depth=this.height=0,this.parent=null}function y(t){this._=t,this.next=null}function x(t){return function t(e,n){var r,i,o,a=null,l=e.head;switch(n.length){case 1:s=n[0],r={x:s.x,y:s.y,r:s.r};break;case 2:r=function(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,l=e.r,s=o-n,u=a-r,h=l-i,c=Math.sqrt(s*s+u*u);return{x:(n+o+s/c*h)/2,y:(r+a+u/c*h)/2,r:(c+i+l)/2}}(n[0],n[1]);break;case 3:r=function(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,l=e.y,s=e.r,u=n.x,h=n.y,c=n.r,p=2*(r-a),d=2*(i-l),f=2*(s-o),y=r*r+i*i-o*o-a*a-l*l+s*s,x=2*(r-u),_=2*(i-h),m=2*(c-o),g=r*r+i*i-o*o-u*u-h*h+c*c,v=x*d-p*_,b=(d*g-_*y)/v-r,w=(_*f-d*m)/v,T=(x*y-p*g)/v-i,M=(p*m-x*f)/v,S=w*w+M*M-1,z=2*(b*w+T*M+o),k=b*b+T*T-o*o,D=(-z-Math.sqrt(z*z-4*S*k))/(2*S);return{x:b+w*D+r,y:T+M*D+i,r:D}}(n[0],n[1],n[2])}var s;for(;l;)o=l._,i=l.next,r&&_(r,o)?a=l:(a?(e.tail=a,a.next=null):e.head=e.tail=null,n.push(o),r=t(e,n),n.pop(),e.head?(l.next=e.head,e.head=l):(l.next=null,e.head=e.tail=l),(a=e.tail).next=i),l=i;e.tail=a;return r}(function(t){for(var e=(t=t.slice()).length,n=null,r=n;e;){var i=new y(t[e-1]);r=r?r.next=i:n=i,t[void 0]=t[--e]}return{head:n,tail:r}}(t),[])}function _(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function m(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,l=e.x-r,s=e.y-i,u=l*l+s*s;if(u){var h=.5+((a*=a)-(o*=o))/(2*u),c=Math.sqrt(Math.max(0,2*o*(a+u)-(a-=u)*a-o*o))/(2*u);n.x=r+h*l+c*s,n.y=i+h*s-c*l}else n.x=r+a,n.y=i}function g(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function v(t,e,n){var r=t._,i=t.next._,o=r.r+i.r,a=(r.x*i.r+i.x*r.r)/o-e,l=(r.y*i.r+i.y*r.r)/o-n;return a*a+l*l}function b(t){this._=t,this.next=null,this.previous=null}function w(t){if("function"!=typeof t)throw new Error;return t}function T(){return 0}function M(t){return function(){return t}}function S(t){return Math.sqrt(t.value)}function z(){var t=null,e=1,n=1,r=T;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(k(t)).eachAfter(D(r,.5)).eachBefore(C(1)):i.eachBefore(k(S)).eachAfter(D(T,1)).eachAfter(D(r,i.r/Math.min(e,n))).eachBefore(C(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(n=e)?null:w(n),i):t;var n},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:M(+t),i):r},i}function k(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function D(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,l=t(n)*e||0;if(l)for(i=0;i<a;++i)r[i].r+=l;if(o=function(t){if(!(i=t.length))return 0;var e,n,r,i;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;m(n,e,r=t[2]);var o,a,l,s,u,h,c,p=e.r*e.r,d=n.r*n.r,f=r.r*r.r,y=p+d+f,_=p*e.x+d*n.x+f*r.x,w=p*e.y+d*n.y+f*r.y;e=new b(e),n=new b(n),r=new b(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(l=3;l<i;++l){m(e._,n._,r=t[l]),r=new b(r),s=n.next,u=e.previous,h=n._.r,c=e._.r;do{if(h<=c){if(g(s._,r._)){n=s,e.next=n,n.previous=e,--l;continue t}h+=s._.r,s=s.next}else{if(g(u._,r._)){(e=u).next=n,n.previous=e,--l;continue t}c+=u._.r,u=u.previous}}while(s!==u.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,y+=f=r._.r*r._.r,p=v(e,o=(_+=f*r._.x)/y,a=(w+=f*r._.y)/y);(r=r.next)!==n;)(f=v(r,o,a))<p&&(e=r,p=f);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=x(e),l=0;l<i;++l)(e=t[l]).x-=r.x,e.y-=r.y;return r.r}(r),l)for(i=0;i<a;++i)r[i].r-=l;n.r=o+l}}}function C(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function P(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function A(t,e,n,r,i){for(var o,a=t.children,l=-1,s=a.length,u=t.value&&(r-e)/t.value;++l<s;)(o=a[l]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*u}function I(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&A(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,l=r.y1-n;a<i&&(i=a=(i+a)/2),l<o&&(o=l=(o+l)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=l}}(e,o)),r&&i.eachBefore(P),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}function R(t,e){return t.parent===e.parent?1:2}function L(t){var e=t.children;return e?e[0]:t.t}function E(t){var e=t.children;return e?e[e.length-1]:t.t}function B(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function N(t,e,n){return t.a.parent===e.parent?t.a:n}function O(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function q(){var t=R,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,o,a=new O(t,0),l=[a];e=l.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)l.push(n=e.children[i]=new O(r[i],i)),n.parent=e;return(a.parent=new O(null,0)).children=[a],a}(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(l);else{var u=i,h=i,c=i;i.eachBefore(function(t){t.x<u.x&&(u=t),t.x>h.x&&(h=t),t.depth>c.depth&&(c=t)});var p=u===h?1:t(u,h)/2,d=p-u.x,f=e/(h.x+p+d),y=n/(c.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*f,t.y=t.depth*y})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,l=n,s=o.parent.children[0],u=o.m,h=a.m,c=l.m,p=s.m;l=E(l),o=L(o),l&&o;)s=L(s),(a=E(a)).a=e,(i=l.z+c-o.z-u+t(l._,o._))>0&&(B(N(l,e,r),e,i),u+=i,h+=i),c+=l.m,u+=o.m,p+=s.m,h+=a.m;l&&!E(a)&&(a.t=l,a.m+=c-h),o&&!L(s)&&(s.t=o,s.m+=u-p,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function V(t,e,n,r,i){for(var o,a=t.children,l=-1,s=a.length,u=t.value&&(i-n)/t.value;++l<s;)(o=a[l]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*u}f.prototype=h.prototype={constructor:f,count:function(){return this.eachAfter(u)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return h(this).eachBefore(p)}},O.prototype=Object.create(f.prototype);var j=(1+Math.sqrt(5))/2;function W(t,e,n,r,i,o){for(var a,l,s,u,h,c,p,d,f,y,x,_=[],m=e.children,g=0,v=0,b=m.length,w=e.value;g<b;){s=i-n,u=o-r;do{h=m[v++].value}while(!h&&v<b);for(c=p=h,x=h*h*(y=Math.max(u/s,s/u)/(w*t)),f=Math.max(p/x,x/c);v<b;++v){if(h+=l=m[v].value,l<c&&(c=l),l>p&&(p=l),x=h*h*y,(d=Math.max(p/x,x/c))>f){h-=l;break}f=d}_.push(a={value:h,dice:s<u,children:m.slice(g,v)}),a.dice?A(a,n,r,i,w?r+=u*h/w:o):V(a,n,r,w?n+=s*h/w:i,o),w-=h,g=v}return _}var F=function t(e){function n(t,n,r,i,o){W(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(j);function H(t,e,n,r,i){var o,a,l=t.children,s=l.length,u=new Array(s+1);for(u[0]=a=o=0;o<s;++o)u[o+1]=a+=l[o].value;!function t(e,n,r,i,o,a,s){if(e>=n-1){var h=l[e];return h.x0=i,h.y0=o,h.x1=a,void(h.y1=s)}var c=u[e],p=r/2+c,d=e+1,f=n-1;for(;d<f;){var y=d+f>>>1;u[y]<p?d=y+1:f=y}p-u[d-1]<u[d]-p&&e+1<d&&--d;var x=u[d]-c,_=r-x;if(a-i>s-o){var m=(i*_+a*x)/r;t(e,d,x,i,o,m,s),t(d,n,_,m,o,a,s)}else{var g=(o*_+s*x)/r;t(e,d,x,i,o,a,g),t(d,n,_,i,g,a,s)}}(0,s,t.value,e,n,r,i)}function G(t,e,n,r,i){(1&t.depth?V:A)(t,e,n,r,i)}var U=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,l,s,u,h,c=-1,p=a.length,d=t.value;++c<p;){for(s=(l=a[c]).children,u=l.value=0,h=s.length;u<h;++u)l.value+=s[u].value;l.dice?A(l,n,r,i,r+=(o-r)*l.value/d):V(l,n,r,n+=(i-n)*l.value/d,o),d-=l.value}else t._squarify=a=W(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(j);function Z(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}Z(".tree_CirclePacking circle {\r\n  fill: rgb(31, 119, 180);\r\n  fill-opacity: .25;\r\n  stroke: rgb(31, 119, 180);\r\n  stroke-width: 1px;\r\n}\r\n\r\n.tree_CirclePacking .leaf circle {\r\n  fill: #ff7f0e;\r\n  fill-opacity: 1;\r\n}\r\n\r\n.tree_CirclePacking .label {\r\n  fill:white;\r\n  text-anchor: middle;\r\n}\r\n");var K=function(t){function r(){var n=t.call(this)||this;return e.ITree.call(n),n}return i(r,t),r.prototype.enter=function(t,e){this.diameter=Math.min(this.width(),this.height()),this.pack=z().size([this.diameter-4,this.diameter-4]).padding(1.5),this.svg=e.append("g")},r.prototype.update=function(t,e){var r=this;this.diameter=Math.min(this.width(),this.height()),this.pack.size([this.diameter-4,this.diameter-4]).padding(1.5),this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.svg.selectAll("circle").remove(),this.svg.selectAll("text").remove();var i=h(this.data()).sum(function(t){return t&&t.size?t.size:1}).sort(function(t,e){return t.value<e.value?-1:t.value>e.value?1:0});this._focus=i,this.pack(i),this.circle=this.svg.selectAll("circle").data(i.descendants()).enter().append("circle").attr("class",function(t){return t.parent?t.children?"node":"node leaf":"node root"}).style("fill",function(t){return t.color=r.paletteDepthLevel_exists()&&t.depth>r.paletteDepthLevel()?n.rgb(t.parent.color)[r.paletteDepthVariant()](1):r._palette(t.data.label),t.color}).on("click",function(t){r.click(t.data,null,null)}).on("dblclick",function(t){this._focus!==t&&r.zoom(t),n.event.stopPropagation()}),this.circle.append("title").text(function(t){return t.data.label}),this.svg.selectAll("text").data(i.descendants()).enter().append("text").attr("class","label").style("fill-opacity",function(t){return t.parent===i?1:0}).style("display",function(t){return t.parent===i?null:"none"}).text(function(t){return t.data.label+(r.showSize()&&void 0!==t.data.size?" "+t.data.size:"")}),this._node=this.svg.selectAll("circle,text"),this.zoomTo([i.x,i.y,2*i.r])},r.prototype.zoom=function(t){this._focus=t;var e=this;function r(t){return t===e._focus&&!t.children||t.parent===e._focus}this.svg.transition().duration(n.event.altKey?7500:750).tween("zoom",function(){var t=n.interpolateZoom(e.view,[e._focus.x,e._focus.y,2*e._focus.r]);return function(n){e.zoomTo(t(n))}}).selectAll("text").filter(function(t){return r(t)||"inline"===this.style.display}).style("fill-opacity",function(t){return r(t)?1:0}).on("start",function(t){r(t)&&(this.style.display="inline")}).on("end",function(t){r(t)||(this.style.display="none")})},r.prototype.zoomTo=function(t){var e=this.diameter/t[2];this.view=t,this._node.attr("transform",function(n){return"translate("+(n.x-t[0])*e+","+(n.y-t[1])*e+")"}),this.circle.attr("r",function(t){return t.r*e})},r}(n.SVGWidget);K.prototype._class+=" tree_CirclePacking",K.prototype.implements(e.ITree.prototype),K.prototype.publish("showSize",!0,"boolean","Show size along with label"),K.prototype.publish("paletteDepthLevel",null,"number","If not null then beyond this depth number the child node colors are based on parent",null,{optional:!0}),K.prototype.publish("paletteDepthVariant","brighter","set","Determines paletteDepthLevel decendant color shade variant",["brighter","darker"],{disable:function(t){return t.paletteDepthLevel_exists()}}),K.prototype.publish("paletteID","default","set","Color palette for this widget",K.prototype._palette.switch(),{tags:["Basic","Shared"]}),K.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]});Z(".tree_Dendrogram .node {\r\n}\r\n\r\n.tree_Dendrogram .node circle {\r\n    fill: #dcf1ff;\r\n    stroke: #1f77b4;\r\n    stroke-width: 1.0px;\r\n}\r\n\r\n.tree_Dendrogram .node.selected circle {\r\n    stroke: red;\r\n}\r\n\r\n.tree_Dendrogram .node.over circle {\r\n    stroke: orange;\r\n}\r\n\r\n.tree_Dendrogram .node.selected.over circle {\r\n    stroke: red;\r\n}\r\n\r\n.tree_Dendrogram .node.selected text {\r\n    fill: red;\r\n}\r\n\r\n.tree_Dendrogram .node.over text {\r\n    fill: orange;\r\n}\r\n\r\n.tree_Dendrogram .node.selected.over text {\r\n    fill: red;\r\n}\r\n\r\n.tree_Dendrogram .node text {\r\n    font-size: 14px;\r\n}\r\n\r\n.tree_Dendrogram .link {\r\n    fill: none;\r\n    stroke: #656565;\r\n    stroke-width: 1.0px;\r\n}\r\n");var Q=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.owner=function(t){return arguments.length?(this._owner=t,this):this._owner},e.prototype.valid=function(){return!!this.column()},e}(n.PropertyExt);Q.prototype._class+=" tree_Dendrogram.DendrogramColumn",Q.prototype.publish("column",null,"set","Field",function(){return this._owner?this._owner.columns():[]},{optional:!0});var J=function(t){function r(){var r=t.call(this)||this;return e.ITree.call(r),n.Utility.SimpleSelectionMixin.call(r),r._drawStartPos="origin",r._d3LayoutCluster=s(),r._d3LayoutTree=q(),r}return i(r,t),r.prototype.dendrogramData=function(){return 0===this.data().length?[]:this.mappings().filter(function(t){return t.valid()}).length?function t(e){return{label:e.key,children:e.values.filter(function(t){return!(t instanceof Array)}).map(function(e){return t(e)}),origRows:e.values}}({key:"root",values:this._db.rollupView(this.mappings().map(function(t){return t.column()})).entries()}):this.data()},r.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._renderElement.attr("opacity",0).transition().duration(500).attr("opacity",1),this._selection.widgetElement(this._renderElement)},r.prototype.update=function(e,r){t.prototype.update.call(this,e,r);var i=this,o="vertical"===this.orientation();this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._d3Layout=this.dendrogram()?this._d3LayoutCluster:this._d3LayoutTree,this.radial()?(this._d3Layout.size([360,2*this.separation()]),this._d3Layout.separation(function(t,e){return(t.parent===e.parent?1:2)/t.depth})):(this._d3Layout.nodeSize([14,this.separation()]),this._d3Layout.separation(function(t,e){return t.parent===e.parent?1:2}));var a=h(this.dendrogramData());this._d3Layout(a);var l=a.descendants(),s=a.descendants().slice(1);function u(t){return o?function(t){return"M"+t.parent.x+","+t.parent.y+"C"+t.parent.x+","+(t.parent.y+t.y)/2+" "+t.x+","+(t.parent.y+t.y)/2+" "+t.x+","+t.y}(t):function(t){return"M"+t.y+","+t.x+"C"+(t.y+t.parent.y)/2+","+t.x+" "+(t.y+t.parent.y)/2+","+t.parent.x+" "+t.parent.y+","+t.parent.x}(t)}function c(t,e){var n=(t-90)/180*Math.PI,r=e;return[r*Math.cos(n),r*Math.sin(n)]}function p(t){return"M"+c(t.x,t.y)+"C"+c(t.x,(t.y+t.parent.y)/2)+" "+c(t.parent.x,(t.y+t.parent.y)/2)+" "+c(t.parent.x,t.parent.y)}var d=this._renderCount?500:0,f=this._renderElement.selectAll(".link").data(s);f.enter().append("path").attr("class","link").attr("d",this.radial()?p:u),f.transition().duration(d).attr("d",this.radial()?p:u),f.exit().remove();var y=this.circleRadius()+2;function x(t){return i.radial()?"rotate("+(t.x-90)+")translate("+t.y+")":"horizontal"===i.orientation()?"translate("+t.y+","+t.x+")":"translate("+t.x+","+t.y+")"}var _=this._renderElement.selectAll(".node").data(l);_.transition().duration(d).attr("transform",x);var m=_.enter().append("g").attr("class","node").attr("transform",x).call(this._selection.enter.bind(this._selection)).on("click",function(t){for(var e=t;e.children;)e=e.children[0];t.depth>0&&i.click(i.rowToObj(e.origRows[0]),i.mappings()[t.depth-1].column(),!0)}).on("dblclick",function(t){for(var e=t;e.children;)e=e.children[0];t.depth>0&&i.dblclick(i.rowToObj(e.origRows[0]),i.mappings()[t.depth-1].column(),!0)}).each(function(){var t=n.select(this);t.append("circle"),t.append("text")});m.merge(_).select("circle").attr("r",this.circleRadius()).style("fill",function(t){return i._palette(t.data.label)}).append("title").text(function(t){return t.data.label}),m.merge(_).select("text").attr("dx",function(t){return i.radial()?t.children?t.x<180?-y:y:t.x<180?y:-y:o?t.children?y:-y:t.children?-y:y}).attr("dy","0.25em").style("text-anchor",function(t){return i.radial()?t.children?t.x<180?"end":"start":t.x<180?"start":"end":o?t.children?"start":"end":t.children?"end":"start"}).attr("transform",function(t){return i.radial()?t.x<180?null:"rotate(180)":o?"rotate(-66)":null}).text(function(t){return t.data.label}),_.exit().remove(),this._renderCount||i.zoomToFit()},r}(n.SVGZoomWidget);J.prototype._class+=" tree_Dendrogram",J.prototype.implements(e.ITree.prototype),J.prototype.mixin(n.Utility.SimpleSelectionMixin),J.prototype.Column=Q,J.prototype.publish("paletteID","default","set","Color palette for this widget",J.prototype._palette.switch(),{tags:["Basic","Shared"]}),J.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),J.prototype.publish("mappings",[],"propertyArray","Source Columns",null,{autoExpand:Q}),J.prototype.publish("circleRadius",4.5,"number","Text offset from circle"),J.prototype.publish("separation",240,"number","Leaf Separation"),J.prototype.publish("dendrogram",!0,"boolean","Dendrogram"),J.prototype.publish("radial",!1,"boolean","Radial"),J.prototype.publish("orientation","horizontal","set","Orientation",["horizontal","vertical"],{tags:["Private"],disable:function(t){return t.radial()}});Z(".tree_Indented .node rect {\r\n  cursor: pointer;\r\n  fill: #fff;\r\n  stroke: #3182bd;\r\n  stroke-width: 1px;\r\n}\r\n\r\n.tree_Indented .node text {\r\n  font: 10px sans-serif;\r\n  pointer-events: none;\r\n}\r\n\r\n.tree_Indented path.link {\r\n  fill: none;\r\n  stroke: #9ecae1;\r\n  stroke-width: 1.5px;\r\n}");var X=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.owner=function(t){return arguments.length?(this._owner=t,this):this._owner},e.prototype.valid=function(){return!!this.column()},e}(n.PropertyExt);X.prototype._class+=" tree_Dendrogram.IndentedColumn",X.prototype.publish("column",null,"set","Field",function(){return this._owner?this._owner.columns():[]},{optional:!0});var Y=function(t){function r(){var r=t.call(this)||this;return r._collapsed={},e.ITree.call(r),n.Utility.SimpleSelectionMixin.call(r),r._drawStartPos="origin",r._d3Tree=q(),r}return i(r,t),r.prototype.xmlToData=function(t,e){return void 0===e&&(e=""),DOMParser?function t(e,n){void 0===n&&(n="");var r={id:n,label:"",attributes:{},children:[]};r.label=e.nodeName;if(1===e.nodeType){if(e.attributes.length>0)for(var i=0;i<e.attributes.length;i++){var o=e.attributes.item(i);r.attributes[o.nodeName]=o.nodeValue}}else 3===e.nodeType&&(r.label=e.nodeValue);if(e.hasChildNodes())for(var a=0;a<e.childNodes.length;a++){var l=e.childNodes.item(a),s=t(l,n+"["+r.children.length+"]");r.children.push(s)}return r}((new DOMParser).parseFromString(t,"text/xml"),e).children[0]:[]},r.prototype.xml=function(t){return arguments.length?(this._xml=t,this.data(this.xmlToData(this._xml)),this):this._xml},r.prototype.IndentedData=function(){if(0===this.data().length)return[];if(this.xmlColumn_exists()){var t=this.columns().indexOf(this.xmlColumn()),e={label:this.xmlColumn(),children:this.data().map(function(e,n){return this.xmlToData(e[t],"["+n+"]")},this)};return 1===e.children.length?e.children[0]:e}return this.mappings().filter(function(t){return t.valid()}).length?function t(e){if(e.values instanceof Array){var n=e.values.filter(function(t){return!(t instanceof Array)}).map(function(e){return t(e)}),r={label:e.key};return n.length?r.children=n:r.size=22,r}return{label:e.key,size:e.values.aggregate,origRows:e.values}}({key:"root",values:this._db.rollupView(this.mappings().map(function(t){return t.column()})).entries()}):this.data()},r.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._svgLinks=this._renderElement.append("g"),this._svgNodes=this._renderElement.append("g"),this._selection.widgetElement(this._svgNodes)},r.prototype.update=function(e,r){var i=this;t.prototype.update.call(this,e,r);var o=this;this._d3Tree.nodeSize([0,this.barHeight()]);var a=this._db.dataChecksum();function l(t){return(t.parent?l(t.parent)+".":"")+t.data.label}this._prevDataChecksum!==a&&(this._treeData=this.IndentedData(),this._prevDataChecksum=a);var s=h(this.data()).sum(function(t){return t.size||50}).each(function(t){i._collapsed[l(t)]&&delete t.children}),u=this._d3Tree(s).descendants(),c=this._d3Tree(s).descendants().slice(1),p=0;s.eachBefore(function(t){t.x=p*o.barHeight(),++p});var d=this.barHeight()-4,f=this._renderCount?500:0,y=this._svgLinks.selectAll(".link").data(c,function(t){return l(t)});function x(t){return"M"+t.parent.y+","+t.parent.x+"V"+t.x+", H"+t.y}y.enter().append("path").attr("class","link").attr("d",x),y.transition().duration(f).attr("d",x),y.exit().remove();var _=this._svgNodes.selectAll(".node").data(u,function(t){return l(t)});_.transition().duration(f).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});var m=_.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).call(this._selection.enter.bind(this._selection)).each(function(){var t=n.select(this);t.append("rect").attr("height",d).attr("width",d).on("click",function(t){o._collapsed[l(t)]?delete o._collapsed[l(t)]:t.children&&(o._collapsed[l(t)]=!0),o.lazyRender()}),t.append("text")}).style("opacity",0);m.transition().style("opacity",1),m.merge(_).select("rect").attr("x",-d/2).attr("y",-d/2).style("fill",function(t){return o._collapsed[l(t)]?"#3182bd":t.children?"#c6dbef":"#fd8d3c"}),m.merge(_).select("text").attr("dx",d/2+4+"px").attr("dy","0.33em").text(function(t){return t.data.label}),_.exit().transition().style("opacity",0).remove(),this._renderCount||o.zoomToFit()},r}(n.SVGZoomWidget);Y.prototype._class+=" tree_Indented",Y.prototype.implements(e.ITree.prototype),Y.prototype.mixin(n.Utility.SimpleSelectionMixin),Y.prototype.Column=X,Y.prototype.publish("xmlColumn",null,"set","Field",function(){return this.columns()},{optional:!0}),Y.prototype.publish("mappings",[],"propertyArray","Source Columns",null,{autoExpand:X,disable:function(t){return t.xmlColumn_exists()}}),Y.prototype.publish("barHeight",16,"number","Bar height");var $=Math.PI,tt=2*$,et=tt-1e-6;function nt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function rt(){return new nt}function it(t){return function(){return t}}nt.prototype=rt.prototype={constructor:nt,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,l=n-t,s=r-e,u=o-t,h=a-e,c=u*u+h*h;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(c>1e-6)if(Math.abs(h*l-s*u)>1e-6&&i){var p=n-o,d=r-a,f=l*l+s*s,y=p*p+d*d,x=Math.sqrt(f),_=Math.sqrt(c),m=i*Math.tan(($-Math.acos((f+c-y)/(2*x*_)))/2),g=m/_,v=m/x;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*u)+","+(e+g*h)),this._+="A"+i+","+i+",0,0,"+ +(h*p>u*d)+","+(this._x1=t+v*l)+","+(this._y1=e+v*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),l=n*Math.sin(r),s=t+a,u=e+l,h=1^o,c=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+u:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+s+","+u),n&&(c<0&&(c=c%tt+tt),c>et?this._+="A"+n+","+n+",0,1,"+h+","+(t-a)+","+(e-l)+"A"+n+","+n+",0,1,"+h+","+(this._x1=s)+","+(this._y1=u):c>1e-6&&(this._+="A"+n+","+n+",0,"+ +(c>=$)+","+h+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ot=Math.abs,at=Math.atan2,lt=Math.cos,st=Math.max,ut=Math.min,ht=Math.sin,ct=Math.sqrt,pt=1e-12,dt=Math.PI,ft=dt/2,yt=2*dt;function xt(t){return t>=1?ft:t<=-1?-ft:Math.asin(t)}function _t(t){return t.innerRadius}function mt(t){return t.outerRadius}function gt(t){return t.startAngle}function vt(t){return t.endAngle}function bt(t){return t&&t.padAngle}function wt(t,e,n,r,i,o,a){var l=t-n,s=e-r,u=(a?o:-o)/ct(l*l+s*s),h=u*s,c=-u*l,p=t+h,d=e+c,f=n+h,y=r+c,x=(p+f)/2,_=(d+y)/2,m=f-p,g=y-d,v=m*m+g*g,b=i-o,w=p*y-f*d,T=(g<0?-1:1)*ct(st(0,b*b*v-w*w)),M=(w*g-m*T)/v,S=(-w*m-g*T)/v,z=(w*g+m*T)/v,k=(-w*m+g*T)/v,D=M-x,C=S-_,P=z-x,A=k-_;return D*D+C*C>P*P+A*A&&(M=z,S=k),{cx:M,cy:S,x01:-h,y01:-c,x11:M*(i/b-1),y11:S*(i/b-1)}}function Tt(){var t=_t,e=mt,n=it(0),r=null,i=gt,o=vt,a=bt,l=null;function s(){var s,u,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),d=i.apply(this,arguments)-ft,f=o.apply(this,arguments)-ft,y=ot(f-d),x=f>d;if(l||(l=s=rt()),p<c&&(u=p,p=c,c=u),p>pt)if(y>yt-pt)l.moveTo(p*lt(d),p*ht(d)),l.arc(0,0,p,d,f,!x),c>pt&&(l.moveTo(c*lt(f),c*ht(f)),l.arc(0,0,c,f,d,x));else{var _,m,g=d,v=f,b=d,w=f,T=y,M=y,S=a.apply(this,arguments)/2,z=S>pt&&(r?+r.apply(this,arguments):ct(c*c+p*p)),k=ut(ot(p-c)/2,+n.apply(this,arguments)),D=k,C=k;if(z>pt){var P=xt(z/c*ht(S)),A=xt(z/p*ht(S));(T-=2*P)>pt?(b+=P*=x?1:-1,w-=P):(T=0,b=w=(d+f)/2),(M-=2*A)>pt?(g+=A*=x?1:-1,v-=A):(M=0,g=v=(d+f)/2)}var I=p*lt(g),R=p*ht(g),L=c*lt(w),E=c*ht(w);if(k>pt){var B=p*lt(v),N=p*ht(v),O=c*lt(b),q=c*ht(b);if(y<dt){var V=T>pt?function(t,e,n,r,i,o,a,l){var s=n-t,u=r-e,h=a-i,c=l-o,p=(h*(e-o)-c*(t-i))/(c*s-h*u);return[t+p*s,e+p*u]}(I,R,O,q,B,N,L,E):[L,E],j=I-V[0],W=R-V[1],F=B-V[0],H=N-V[1],G=1/ht(((h=(j*F+W*H)/(ct(j*j+W*W)*ct(F*F+H*H)))>1?0:h<-1?dt:Math.acos(h))/2),U=ct(V[0]*V[0]+V[1]*V[1]);D=ut(k,(c-U)/(G-1)),C=ut(k,(p-U)/(G+1))}}M>pt?C>pt?(_=wt(O,q,I,R,p,C,x),m=wt(B,N,L,E,p,C,x),l.moveTo(_.cx+_.x01,_.cy+_.y01),C<k?l.arc(_.cx,_.cy,C,at(_.y01,_.x01),at(m.y01,m.x01),!x):(l.arc(_.cx,_.cy,C,at(_.y01,_.x01),at(_.y11,_.x11),!x),l.arc(0,0,p,at(_.cy+_.y11,_.cx+_.x11),at(m.cy+m.y11,m.cx+m.x11),!x),l.arc(m.cx,m.cy,C,at(m.y11,m.x11),at(m.y01,m.x01),!x))):(l.moveTo(I,R),l.arc(0,0,p,g,v,!x)):l.moveTo(I,R),c>pt&&T>pt?D>pt?(_=wt(L,E,B,N,c,-D,x),m=wt(I,R,O,q,c,-D,x),l.lineTo(_.cx+_.x01,_.cy+_.y01),D<k?l.arc(_.cx,_.cy,D,at(_.y01,_.x01),at(m.y01,m.x01),!x):(l.arc(_.cx,_.cy,D,at(_.y01,_.x01),at(_.y11,_.x11),!x),l.arc(0,0,c,at(_.cy+_.y11,_.cx+_.x11),at(m.cy+m.y11,m.cx+m.x11),x),l.arc(m.cx,m.cy,D,at(m.y11,m.x11),at(m.y01,m.x01),!x))):l.arc(0,0,c,w,b,x):l.lineTo(L,E)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-dt/2;return[lt(r)*n,ht(r)*n]},s.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:it(+e),s):t},s.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:it(+t),s):e},s.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:it(+t),s):n},s.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:it(+t),s):r},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:it(+t),s):i},s.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:it(+t),s):o},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:it(+t),s):a},s.context=function(t){return arguments.length?(l=null==t?null:t,s):l},s}function Mt(t){return t<0?-1:1}function St(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(o*i+a*r)/(r+i);return(Mt(o)+Mt(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function zt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,i+l*e,o-l,a-l*n,o,a)}function Dt(t){this._context=t}function Ct(t){this._context=t}Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kt(this,this._t0,zt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kt(this,zt(this,n=St(this,t,e)),n);break;default:kt(this,this._t0,n=St(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new Ct(t)}.prototype=Object.create(Dt.prototype)).point=function(t,e){Dt.prototype.point.call(this,e,t)},Ct.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};Z(".tree_Sunburst path {\r\n  stroke: #fff;\r\n  stroke-width:0.5px;\r\n  fill-rule: evenodd;\r\n}\r\n");var Pt=function(t){function r(){var n=t.call(this)||this;return e.ITree.call(n),n}return i(r,t),r.prototype.data=function(t){var e=n.SVGWidget.prototype.data.apply(this,arguments);return arguments.length&&(this._resetRoot=!0),e},r.prototype.enter=function(t,e){var r=this;this.radius=Math.min(this.width(),this.height())/2,this._xScale=n.scaleLinear().range([0,2*Math.PI]),this._yScale=n.scaleSqrt().range([0,this.radius]),this.partition=I(),this.arc=Tt().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,r._xScale(t.x0)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,r._xScale(t.x1)))}).innerRadius(function(t){return Math.max(0,r._yScale(t.y0))}).outerRadius(function(t){return Math.max(0,r._yScale(t.y1))}),this.svg=e.append("g")},r.prototype.update=function(t,e){var r=this;this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.radius=Math.min(this.width(),this.height())/2,this._yScale.range([0,this.radius]);var i=h(this.data()).sum(function(t){return void 0!==t.size?t.size:1}),o=this.svg.selectAll("path").data(this.partition(i).descendants(),function(t,e){return void 0!==t.data.label?t.data.label:e});o.enter().append("path").on("click",function(t){r.click(t.data,null,null)}).on("dblclick",function(t){n.event&&n.event.stopPropagation(),r.zoomTo(t)}).each(function(){n.select(this).append("title")}).merge(o).attr("d",this.arc).style("fill",function(t){return t.data.__viz_fill?t.data.__viz_fill:r._palette(t.data.label)}).style("stroke",function(t){return t.value>16?"white":"none"}).select("title").text(function(t){return t.data.label}),o.exit().remove(),this._resetRoot&&(this._resetRoot=!1,this.zoomTo(i))},r.prototype.zoomTo=function(t){var e=this;this.svg.transition().duration(750).tween("scale",function(){var r=n.interpolate(e._xScale.domain(),[t.x0,t.x1]),i=n.interpolate(e._yScale.domain(),[t.y0,1]),o=n.interpolate(e._yScale.range(),[t.y0?20:0,e.radius]);return function(t){e._xScale.domain(r(t)),e._yScale.domain(i(t)).range(o(t))}}).selectAll("path").attrTween("d",function(t){return function(){return e.arc(t)}})},r}(n.SVGWidget);Pt.prototype._class+=" tree_SunburstPartition",Pt.prototype.implements(e.ITree.prototype),Pt.prototype.publish("paletteID","default","set","Color palette for this widget",Pt.prototype._palette.switch(),{tags:["Basic","Shared"]}),Pt.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]});Z(".tree_Treemap * {\r\n    box-sizing: border-box;\r\n}\r\n.tree_Treemap .node {\r\n    border: solid 1px #333;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    position: absolute;\r\n}\r\n\r\n.tree_Treemap .node.selected {\r\n    border-color: red;\r\n}\r\n\r\n.tree_Treemap .node.over {\r\n    border-color: orange;\r\n}\r\n\r\n.tree_Treemap .node.selected.over {\r\n    border-color: red;\r\n}\r\n.tree_Treemap .node > span.treemap-parent-label {\r\n    font-weight: bold;\r\n    display: inline-block;\r\n    margin: 4px 4px 0 4px;\r\n}\r\n.tree_Treemap .node > span.treemap-parent-value {\r\n    font-weight: normal;\r\n    font-style: italic;\r\n    margin: 4px 0 0 0;\r\n}\r\n.tree_Treemap .node > span.treemap-singleton-label {\r\n    font-weight: normal;\r\n    display: block;\r\n    margin: 4px 0 0 4px;\r\n}\r\n.tree_Treemap .node > span.treemap-singleton-value {\r\n    font-style: italic;\r\n    display: block;\r\n    margin: 0 0 0 4px;\r\n}\r\n");var At=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.owner=function(t){return arguments.length?(this._owner=t,this):this._owner},e.prototype.valid=function(){return!!this.column()},e}(n.PropertyExt);At.prototype._class+=" tree_Dendrogram.TreemapColumn",At.prototype.publish("column",null,"set","Field",function(){return this._owner?this._owner.columns():[]},{optional:!0});var It=function(t){function r(){var r=t.call(this)||this;return e.ITree.call(r),n.Utility.SimpleSelectionMixin.call(r),r}return i(r,t),r.prototype.getTilingMethod=function(){switch(this.tilingMethod()){case"treemapBinary":return H;case"treemapDice":return A;case"treemapSlice":return V;case"treemapSliceDice":return G;case"treemapResquarify":return U;case"treemapSquarify":default:return F}},r.prototype.treemapData=function(){return this.mappings().filter(function(t){return t.valid()}).length?function t(e){if(e.values instanceof Array){var n=e.values.filter(function(t){return!(t instanceof Array)}).map(function(e){return t(e)}),r={label:e.key};return n.length?r.children=n:r.size=22,r}return{label:e.key,size:e.values.aggregate,origRows:e.values}}({key:"root",values:this._db.aggregateView(this.mappings().map(function(t){return t.column()}),this.aggrType(),this.aggrColumn()).entries()}):this.data()},r.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._d3Treemap=function(){var t=F,e=!1,n=1,r=1,i=[0],o=T,a=T,l=T,s=T,u=T;function h(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(c),i=[0],e&&t.eachBefore(P),t}function c(e){var n=i[e.depth],r=e.x0+n,h=e.y0+n,c=e.x1-n,p=e.y1-n;c<r&&(r=c=(r+c)/2),p<h&&(h=p=(h+p)/2),e.x0=r,e.y0=h,e.x1=c,e.y1=p,e.children&&(n=i[e.depth+1]=o(e)/2,r+=u(e)-n,h+=a(e)-n,(c-=l(e)-n)<r&&(r=c=(r+c)/2),(p-=s(e)-n)<h&&(h=p=(h+p)/2),t(e,r,h,c,p))}return h.round=function(t){return arguments.length?(e=!!t,h):e},h.size=function(t){return arguments.length?(n=+t[0],r=+t[1],h):[n,r]},h.tile=function(e){return arguments.length?(t=w(e),h):t},h.padding=function(t){return arguments.length?h.paddingInner(t).paddingOuter(t):h.paddingInner()},h.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:M(+t),h):o},h.paddingOuter=function(t){return arguments.length?h.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):h.paddingTop()},h.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:M(+t),h):a},h.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:M(+t),h):l},h.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:M(+t),h):s},h.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:M(+t),h):u},h}(),this._elementDIV=n.append("div"),this._selection.widgetElement(this._elementDIV)},r.prototype.update=function(e,r){t.prototype.update.call(this,e,r);var i=this;this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id()));var o=h(this.treemapData()).sum(this.nodeWeight);this._d3Treemap.size([this.width(),this.height()]).paddingInner(this.paddingInner()).paddingOuter(this.paddingOuter()).paddingTop(this.paddingTop()),-1!==["treemapSquarify","treemapResquarify"].indexOf(this.tilingMethod())?this._d3Treemap.tile(this.getTilingMethod().ratio(this.squarifyRatio())):this._d3Treemap.tile(this.getTilingMethod()),this._d3Treemap(o),this._elementDIV.style("font-size",this.fontSize_exists()?this.fontSize()+"px":null).style("line-height",this.fontSize_exists()?this.fontSize()+2+"px":null);var a=this._elementDIV.selectAll(".node").data(o.descendants());a.enter().append("div").attr("class","node").call(this._selection.enter.bind(this._selection)).on("click",function(t){if(t&&t.origRows){var e="";i.mappings().forEach(function(t){t.column()&&(e=t.column())}),i.click(i.rowToObj(t.origRows[0]),e,i._selection.selected(this))}}).on("dblclick",function(t){if(t&&t.origRows){var e="";i.mappings().forEach(function(t){t.column()&&(e=t.column())}),i.dblclick(i.rowToObj(t.origRows[0]),e,i._selection.selected(this))}}).merge(a).style("left",function(t){return t.x0+Math.max(0,t.x1-t.x0)/2+"px"}).style("top",function(t){return t.y0+Math.max(0,t.y1-t.y0)/2+"px"}).style("width",function(){return"0px"}).style("height",function(){return"0px"}).style("font-size",function(t){return(t.children?i.parentFontSize():i.leafFontSize())+"px"}).style("line-height",function(t){return(t.children?i.parentFontSize():i.leafFontSize())+"px"}).attr("title",function(t){if(t.children&&!i.enableParentTooltips())return null;var e=t.data.label+" ("+t.value+")";for(;t.parent&&t.parent.parent;)e=t.parent.data.label+" -> "+e,t=t.parent;return e}).html(function(t){return i.showRoot()||0!==t.depth?t.children?i.enableParentLabels()?i.parentWeightHTML(t):null:i.leafWeightHTML(t):null}).style("background",function(t){if(!i.showRoot()&&0===t.depth)return this.style.color="transparent","transparent";var e,r=i.brighterLeafNodes()?"brighter":"darker";return i.usePaletteOnParentNodes()?e=t.children?i._palette(t.data.label):n.rgb(i._palette(t.parent.data.label))[r](1):(e=t.depth>i.depthColorLimit()?n.rgb(t.parent.color)[r](1):i._palette(t.data.label),t.color=e),this.style.color=n.Palette.textColor(e),e}).transition().duration(this.transitionDuration()).style("pointer-events",function(t){return i.showRoot()||0!==t.depth?"all":"none"}).style("opacity",function(t){return t.children?1:null}).style("left",function(t){return t.x0+"px"}).style("top",function(t){return t.y0+"px"}).style("width",function(t){return Math.max(0,t.x1-t.x0)+"px"}).style("height",function(t){return Math.max(0,t.y1-t.y0)+"px"}).each(function(t){0===t.depth&&(this.style.color=i.showRoot()?"":"transparent",this.style.borderColor=i.showRoot()?"":"transparent")}),a.exit().transition().duration(this.transitionDuration()).style("opacity",0).remove()},r.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},r.prototype.nodeWeight=function(t){return t.size||1},r.prototype.parentWeightHTML=function(t){return this.showParentWeight()?'<span class="treemap-parent-label">'+t.data.label+'</span><span class="treemap-parent-value">'+t.value+this.weightSuffix()+"</span>":'<span class="treemap-parent-label">'+t.data.label+"</span>"},r.prototype.leafWeightHTML=function(t){return this.showLeafWeight()?'<span class="treemap-leaf-label">'+t.data.label+'</span><span class="treemap-leaf-value">'+t.value+this.weightSuffix()+"</span>":'<span class="treemap-leaf-label">'+t.data.label+"</span>"},r}(n.HTMLWidget);It.prototype._class+=" tree_Treemap",It.prototype.implements(e.ITree.prototype),It.prototype.mixin(n.Utility.SimpleSelectionMixin),It.prototype.Column=At,It.prototype.publish("paletteID","default","set","Color palette for this widget",It.prototype._palette.switch(),{tags:["Basic","Shared"]}),It.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),It.prototype.publish("mappings",[],"propertyArray","Source Columns",null,{autoExpand:At}),It.prototype.publish("aggrType",null,"set","Aggregation Type",[null,"mean","median","sum","min","max"],{optional:!0}),It.prototype.publish("aggrColumn",null,"set","Aggregation Field",function(){return this.columns()},{optional:!0,disable:function(t){return!t.aggrType()}}),It.prototype.publish("fontSize",null,"number","Font Size",null,{optional:!0}),It.prototype.publish("paddingInner",18.6,"number","Pixel spacing between each sibling node"),It.prototype.publish("paddingOuter",30,"number","Pixel padding of parent nodes"),It.prototype.publish("paddingTop",41.4,"number","Additional top pixel padding of parent nodes"),It.prototype.publish("showRoot",!1,"boolean","Show root element"),It.prototype.publish("parentFontSize",18,"number","Parent font-size"),It.prototype.publish("leafFontSize",16,"number","Leaf font-size"),It.prototype.publish("usePaletteOnParentNodes",!1,"boolean","Assign a color from the palette to every parent node"),It.prototype.publish("depthColorLimit",1,"number","Assign a color from the palette to node with depth lower than this value",null,{optional:!0,disable:function(t){return t.usePaletteOnParentNodes()}}),It.prototype.publish("squarifyRatio",1,"number","Specifies the desired aspect ratio of the generated rectangles (must be >= 1)",null,{optional:!0,disable:function(t){return-1===["treemapSquarify","treemapResquarify"].indexOf(t.tilingMethod())}}),It.prototype.publish("showParentWeight",!0,"boolean","Show weight of parent nodes"),It.prototype.publish("showLeafWeight",!0,"boolean","Show weight of leaf nodes"),It.prototype.publish("weightSuffix","","string","Weight suffix (ex: 'ms')"),It.prototype.publish("brighterLeafNodes",!1,"boolean","Brighter/darker leaf node color (false = darker)"),It.prototype.publish("enableParentLabels",!0,"boolean","Enable parent labels"),It.prototype.publish("enableParentTooltips",!0,"boolean","Enable parent tooltips"),It.prototype.publish("transitionDuration",250,"number","Transition Duration"),It.prototype.publish("tilingMethod","treemapSquarify","set","Transition Duration",["treemapBinary","treemapDice","treemapResquarify","treemapSlice","treemapSliceDice","treemapSquarify"]),t.PKG_NAME="@hpcc-js/tree",t.PKG_VERSION="2.4.0",t.BUILD_VERSION="2.3.0",t.CirclePacking=K,t.DendrogramColumn=Q,t.Dendrogram=J,t.IndentedColumn=X,t.Indented=Y,t.SunburstPartition=Pt,t.TreemapColumn=At,t.Treemap=It,Object.defineProperty(t,"__esModule",{value:!0})});

/***/ }),

/***/ "./node_modules/crossfilter2/crossfilter.min.js":
/*!******************************************************!*\
  !*** ./node_modules/crossfilter2/crossfilter.min.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;!function(r){if(true)module.exports=r();else { var t; }}(function(){return function r(t,e,n){function o(u,f){if(!e[u]){if(!t[u]){var a="function"==typeof require&&require;if(!f&&a)return require(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[u]={exports:{}};t[u][0].call(c.exports,function(r){var e=t[u][1][r];return o(e?e:r)},c,c.exports,r,t,e,n)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(r,t){t.exports=r("./src/crossfilter").crossfilter},{"./src/crossfilter":6}],2:[function(r,t){(function(r){function e(r,t){return null==r?void 0:r[t]}function n(r){var t=!1;if(null!=r&&"function"!=typeof r.toString)try{t=!!(r+"")}catch(e){}return t}function o(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function i(){this.__data__=dt?dt(null):{}}function u(r){return this.has(r)&&delete this.__data__[r]}function f(r){var t=this.__data__;if(dt){var e=t[r];return e===T?void 0:e}return st.call(t,r)?t[r]:void 0}function a(r){var t=this.__data__;return dt?void 0!==t[r]:st.call(t,r)}function s(r,t){var e=this.__data__;return e[r]=dt&&void 0===t?T:t,this}function c(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function l(){this.__data__=[]}function h(r){var t=this.__data__,e=w(t,r);if(0>e)return!1;var n=t.length-1;return e==n?t.pop():pt.call(t,e,1),!0}function p(r){var t=this.__data__,e=w(t,r);return 0>e?void 0:t[e][1]}function v(r){return w(this.__data__,r)>-1}function d(r,t){var e=this.__data__,n=w(e,r);return 0>n?e.push([r,t]):e[n][1]=t,this}function y(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function g(){this.__data__={hash:new o,map:new(vt||c),string:new o}}function b(r){return k(this,r).delete(r)}function _(r){return k(this,r).get(r)}function x(r){return k(this,r).has(r)}function m(r,t){return k(this,r).set(r,t),this}function w(r,t){for(var e=r.length;e--;)if(q(r[e][0],t))return e;return-1}function E(r){if(!R(r)||M(r))return!1;var t=N(r)||n(r)?lt:Z;return t.test(C(r))}function A(r){if("string"==typeof r)return r;if(D(r))return gt?gt.call(r):"";var t=r+"";return"0"==t&&1/r==-W?"-0":t}function O(r){return _t(r)?r:bt(r)}function k(r,t){var e=r.__data__;return S(t)?e["string"==typeof t?"string":"hash"]:e.map}function z(r,t){var n=e(r,t);return E(n)?n:void 0}function j(r,t){if(_t(r))return!1;var e=typeof r;return"number"==e||"symbol"==e||"boolean"==e||null==r||D(r)?!0:K.test(r)||!H.test(r)||null!=t&&r in Object(t)}function S(r){var t=typeof r;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==r:null===r}function M(r){return!!ft&&ft in r}function $(r){if("string"==typeof r||D(r))return r;var t=r+"";return"0"==t&&1/r==-W?"-0":t}function C(r){if(null!=r){try{return at.call(r)}catch(t){}try{return r+""}catch(t){}}return""}function F(r,t){if("function"!=typeof r||t&&"function"!=typeof t)throw new TypeError(P);var e=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var u=r.apply(this,n);return e.cache=i.set(o,u),u};return e.cache=new(F.Cache||y),e}function q(r,t){return r===t||r!==r&&t!==t}function N(r){var t=R(r)?ct.call(r):"";return t==J||t==G}function R(r){var t=typeof r;return!!r&&("object"==t||"function"==t)}function U(r){return!!r&&"object"==typeof r}function D(r){return"symbol"==typeof r||U(r)&&ct.call(r)==B}function I(r){return null==r?"":A(r)}function L(r,t,e){t=j(t,r)?[t]:O(t);var n=-1,o=t.length;for(o||(r=void 0,o=1);++n<o;){var i=null==r?void 0:r[$(t[n])];void 0===i&&(n=o,i=e),r=N(i)?i.call(r):i}return r}var P="Expected a function",T="__lodash_hash_undefined__",W=1/0,J="[object Function]",G="[object GeneratorFunction]",B="[object Symbol]",H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,Q=/^\./,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,Y=/\\(\\)?/g,Z=/^\[object .+?Constructor\]$/,rt="object"==typeof r&&r&&r.Object===Object&&r,tt="object"==typeof self&&self&&self.Object===Object&&self,et=rt||tt||Function("return this")(),nt=Array.prototype,ot=Function.prototype,it=Object.prototype,ut=et["__core-js_shared__"],ft=function(){var r=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),at=ot.toString,st=it.hasOwnProperty,ct=it.toString,lt=RegExp("^"+at.call(st).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=et.Symbol,pt=nt.splice,vt=z(et,"Map"),dt=z(Object,"create"),yt=ht?ht.prototype:void 0,gt=yt?yt.toString:void 0;o.prototype.clear=i,o.prototype.delete=u,o.prototype.get=f,o.prototype.has=a,o.prototype.set=s,c.prototype.clear=l,c.prototype.delete=h,c.prototype.get=p,c.prototype.has=v,c.prototype.set=d,y.prototype.clear=g,y.prototype.delete=b,y.prototype.get=_,y.prototype.has=x,y.prototype.set=m;var bt=F(function(r){r=I(r);var t=[];return Q.test(r)&&t.push(""),r.replace(V,function(r,e,n,o){t.push(n?o.replace(Y,"$1"):e||r)}),t});F.Cache=y;var _t=Array.isArray;t.exports=L}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(r,t){t.exports={version:"1.4.3"}},{}],4:[function(r,t){function e(r){for(var t=new Array(r),e=-1;++e<r;)t[e]=0;return t}function n(r,t){for(var e=r.length;t>e;)r[e++]=0;return r}function o(r,t){if(t>32)throw new Error("invalid array width!");return r}function i(r){this.length=r,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=u(r)}if("undefined"!=typeof Uint8Array)var u=function(r){return new Uint8Array(r)},f=function(r){return new Uint16Array(r)},a=function(r){return new Uint32Array(r)},s=function(r,t){if(r.length>=t)return r;var e=new r.constructor(t);return e.set(r),e},c=function(r,t){var e;switch(t){case 16:e=f(r.length);break;case 32:e=a(r.length);break;default:throw new Error("invalid array width!")}return e.set(r),e};i.prototype.lengthen=function(r){var t,e;for(t=0,e=this.subarrays;e>t;++t)this[t]=s(this[t],r);this.length=r},i.prototype.add=function(){var r,t,e,n,o;for(n=0,o=this.subarrays;o>n;++n)if(r=this.masks[n],t=this.width-32*n,e=~r&-~r,!(t>=32)||e)return 32>t&&e&1<<t&&(this[n]=c(this[n],t<<=1),this.width=32*n+t),this.masks[n]|=e,{offset:n,one:e};return this[this.subarrays]=u(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},i.prototype.copy=function(r,t){var e,n;for(e=0,n=this.subarrays;n>e;++e)this[e][r]=this[e][t]},i.prototype.truncate=function(r){var t,e;for(t=0,e=this.subarrays;e>t;++t){for(var n=this.length-1;n>=r;n--)this[t][n]=0;this[t].length=r}this.length=r},i.prototype.zero=function(r){var t,e;for(t=0,e=this.subarrays;e>t;++t)if(this[t][r])return!1;return!0},i.prototype.zeroExcept=function(r,t,e){var n,o;for(n=0,o=this.subarrays;o>n;++n)if(n===t?this[n][r]&e:this[n][r])return!1;return!0},i.prototype.zeroExceptMask=function(r,t){var e,n;for(e=0,n=this.subarrays;n>e;++e)if(this[e][r]&t[e])return!1;return!0},i.prototype.only=function(r,t,e){var n,o;for(n=0,o=this.subarrays;o>n;++n)if(this[n][r]!=(n===t?e:0))return!1;return!0},i.prototype.onlyExcept=function(r,t,e,n,o){var i,u,f;for(u=0,f=this.subarrays;f>u;++u)if(i=this[u][r],u===t&&(i&=e),i!=(u===n?o:0))return!1;return!0},t.exports={array8:e,array16:e,array32:e,arrayLengthen:n,arrayWiden:o,bitarray:i}},{}],5:[function(r,t){"use strict";function e(r){function t(t,e,n,o){for(;o>n;){var i=n+o>>>1;r(t[i])<e?n=i+1:o=i}return n}function e(t,e,n,o){for(;o>n;){var i=n+o>>>1;e<r(t[i])?o=i:n=i+1}return n}return e.right=e,e.left=t,e}var n=r("./identity");t.exports=e(n),t.exports.by=e},{"./identity":10}],6:[function(r,t,e){"use strict";function n(){function r(r){var t=S,e=r.length;return e&&(j=j.concat(r),k.lengthen(S+=e),$.forEach(function(n){n(r,t,e)}),O("dataAdded")),z}function t(r){for(var t=o(S,S),e=[],n="function"==typeof r,i=function(t){return n?r(j[t],t):k.zero(t)},u=0,f=0;S>u;++u)i(u)?(e.push(u),t[u]=m):t[u]=f++;M.forEach(function(r){r(-1,-1,[],e,!0)}),C.forEach(function(r){r(t)});for(var a=0,s=0;S>a;++a)t[a]!==m&&(a!==s&&(k.copy(s,a),j[s]=j[a]),++s);j.length=S=s,k.truncate(s),O("dataRemoved")}function e(r,t){var e,n,o,i,u=Array(k.subarrays);for(e=0;e<k.subarrays;e++)u[e]=-1;if(t)for(n=0,i=t.length;i>n;n++)o=t[n].id(),u[o>>7]&=~(1<<(63&o));return k.zeroExceptMask(r,u)}function n(r,t){function e(e,n,u){if(t){st=0,z=0,rt=[];for(var a=0;a<e.length;a++)for(z=0,rt=r(e[a]);z<rt.length;z++)st++;H=[],V=i(e.length),Y=o(st,1);for(var s=i(st),c=0,l=0;l<e.length;l++)if(rt=r(e[l]),rt.length)for(V[l]=rt.length,z=0;z<rt.length;z++)H.push(rt[z]),s[c]=l,c++;else V[l]=0,et.push(l+n);var h=nt(i(st),0,st);H=y(H,h),K=y(s,h)}else H=e.map(r),K=nt(i(u),0,u),H=y(H,K);t&&(u=st);var p=ot(H),v=p[0],d=p[1];if(Z)for(var g=0;u>g;++g)Z(H[g],g)||(k[W][K[g]+n]|=P,t&&(Y[g]=1));else{for(var b=0;v>b;++b)k[W][K[b]+n]|=P,t&&(Y[b]=1);for(var _=d;u>_;++_)k[W][K[_]+n]|=P,t&&(Y[_]=1)}if(!n)return G=H,B=K,Q=V,X=Y,ft=v,at=d,void 0;var x,m=G,w=B,E=X,A=0;if(a=0,t&&(x=n,n=m.length,u=st),G=t?new Array(n+u):new Array(S),B=t?new Array(n+u):o(S,S),t&&(X=o(n+u,1)),t){var O=Q.length;Q=f.arrayLengthen(Q,S);for(var z=0;S>z+O;z++)Q[z+O]=V[z]}for(var j=0;n>a&&u>A;++j)m[a]<H[A]?(G[j]=m[a],t&&(X[j]=E[a]),B[j]=w[a++]):(G[j]=H[A],t&&(X[j]=Y[A]),B[j]=K[A++]+(t?x:n));for(;n>a;++a,++j)G[j]=m[a],t&&(X[j]=E[a]),B[j]=w[a];for(;u>A;++A,++j)G[j]=H[A],t&&(X[j]=Y[A]),B[j]=K[A]+(t?x:n);p=ot(G),ft=p[0],at=p[1]}function n(r,t,e){it.forEach(function(r){r(H,K,t,e)}),H=K=null}function d(r){if(t){for(var e=0,n=0;e<et.length;e++)r[et[e]]!==m&&(et[n]=r[et[e]],n++);for(et.length=n,e=0,n=0;S>e;e++)r[e]!==m&&(n!==e&&(Q[n]=Q[e]),n++);Q.length=n}for(var o,i=G.length,u=0,f=0;i>u;++u)o=B[u],r[o]!==m&&(u!==f&&(G[f]=G[u]),B[f]=r[o],t&&(X[f]=X[u]),++f);for(G.length=f,t&&(X.length=f);i>f;)B[f++]=0;var a=ot(G);ft=a[0],at=a[1]}function _(r){var e=r[0],n=r[1];if(Z)return Z=null,q(function(r,t){return t>=e&&n>t},0===r[0]&&r[1]===G.length),ft=e,at=n,tt;var o,i,u,f=[],a=[],s=[],c=[];if(ft>e)for(o=e,i=Math.min(ft,n);i>o;++o)f.push(B[o]),s.push(o);else if(e>ft)for(o=ft,i=Math.min(e,at);i>o;++o)a.push(B[o]),c.push(o);if(n>at)for(o=Math.max(e,at),i=n;i>o;++o)f.push(B[o]),s.push(o);else if(at>n)for(o=Math.max(ft,n),i=at;i>o;++o)a.push(B[o]),c.push(o);if(t){var l=[],h=[];for(o=0;o<f.length;o++)Q[f[o]]++,X[s[o]]=0,1===Q[f[o]]&&(k[W][f[o]]^=P,l.push(f[o]));for(o=0;o<a.length;o++)Q[a[o]]--,X[c[o]]=1,0===Q[a[o]]&&(k[W][a[o]]^=P,h.push(a[o]));if(f=l,a=h,0===r[0]&&r[1]===G.length)for(o=0;o<et.length;o++)k[W][u=et[o]]&P&&(k[W][u]^=P,f.push(u));else for(o=0;o<et.length;o++)k[W][u=et[o]]&P||(k[W][u]^=P,a.push(u))}else{for(o=0;o<f.length;o++)k[W][f[o]]^=P;for(o=0;o<a.length;o++)k[W][a[o]]^=P}return ft=e,at=n,M.forEach(function(r){r(P,W,f,a)}),O("filtered"),tt}function w(r){return null==r?z():Array.isArray(r)?A(r):"function"==typeof r?F(r):E(r)}function E(r){return _((ot=a.filterExact(v,r))(G))}function A(r){return _((ot=a.filterRange(v,r))(G))}function z(){return _((ot=a.filterAll)(G))}function F(r){Z=r,ot=a.filterAll,q(r,!1);var t=ot(G);return ft=t[0],at=t[1],tt}function q(r,e){var n,o,i,u=[],f=[],a=[],s=[],c=G.length;if(!t)for(n=0;c>n;++n)!(k[W][o=B[n]]&P)^!!(i=r(G[n],n))&&(i?u.push(o):f.push(o));if(t)for(n=0;c>n;++n)r(G[n],n)?(u.push(B[n]),a.push(n)):(f.push(B[n]),s.push(n));if(t){var l=[],h=[];for(n=0;n<u.length;n++)1===X[a[n]]&&(Q[u[n]]++,X[a[n]]=0,1===Q[u[n]]&&(k[W][u[n]]^=P,l.push(u[n])));for(n=0;n<f.length;n++)0===X[s[n]]&&(Q[f[n]]--,X[s[n]]=1,0===Q[f[n]]&&(k[W][f[n]]^=P,h.push(f[n])));if(u=l,f=h,e)for(n=0;n<et.length;n++)k[W][o=et[n]]&P&&(k[W][o]^=P,u.push(o));else for(n=0;n<et.length;n++)k[W][o=et[n]]&P||(k[W][o]^=P,f.push(o))}else{for(n=0;n<u.length;n++)k[W][u[n]]&P&&(k[W][u[n]]&=T);for(n=0;n<f.length;n++)k[W][f[n]]&P||(k[W][f[n]]|=P)}M.forEach(function(r){r(P,W,u,f)}),O("filtered")}function N(r,e){var n,o=[],i=at,u=0;for(e&&e>0&&(u=e);--i>=ft&&r>0;)k.zero(n=B[i])&&(u>0?--u:(o.push(j[n]),--r));if(t)for(i=0;i<et.length&&r>0;i++)k.zero(n=et[i])&&(u>0?--u:(o.push(j[n]),--r));return o}function R(r,e){var n,o,i=[],u=0;if(e&&e>0&&(u=e),t)for(n=0;n<et.length&&r>0;n++)k.zero(o=et[n])&&(u>0?--u:(i.push(j[o]),--r));for(n=ft;at>n&&r>0;)k.zero(o=B[n])&&(u>0?--u:(i.push(j[o]),--r)),n++;return i}function U(r){function e(e,n,s,l){function h(){return t?(K++,void 0):(++K===H&&(w=f.arrayWiden(w,J<<=1),q=f.arrayWiden(q,J),H=u(J)),void 0)}t&&(L=s,s=G.length-e.length,l=e.length);var p,y,g,b,_,x,m=F,w=t?[]:o(K,H),E=U,A=D,O=I,z=K,$=0,C=0;for(X&&(E=O=c),X&&(A=O=c),F=new Array(K),K=0,q=t?z?q:[]:z>1?f.arrayLengthen(q,S):o(S,H),z&&(g=(y=m[0]).key);l>C&&!((b=r(e[C]))>=b);)++C;for(;l>C;){for(y&&b>=g?(_=y,x=g,w[$]=K,y=m[++$],y&&(g=y.key)):(_={key:b,value:O()},x=b),F[K]=_;x>=b&&(p=n[C]+(t?L:s),t?q[p]?q[p].push(K):q[p]=[K]:q[p]=K,_.value=E(_.value,j[p],!0),k.zeroExcept(p,W,T)||(_.value=A(_.value,j[p],!1)),!(++C>=l));)b=r(e[C]);h()}for(;z>$;)F[w[$]=K]=m[$++],h();if(t)for(var N=0;S>N;N++)q[N]||(q[N]=[]);if(K>$)if(t)for($=0;L>$;++$)for(N=0;N<q[$].length;N++)q[$][N]=w[q[$][N]];else for($=0;s>$;++$)q[$]=w[q[$]];p=M.indexOf(Q),K>1||t?(Q=i,V=v):(!K&&Y&&(K=1,F=[{key:null,value:O()}]),1===K?(Q=a,V=d):(Q=c,V=c),q=null),M[p]=Q}function n(r){if(K>1||t){var e,n,u,f=K,s=F,l=o(f,f);if(t){for(e=0,u=0;S>e;++e)if(r[e]!==m){for(q[u]=q[e],n=0;n<q[u].length;n++)l[q[u][n]]=1;++u}}else for(e=0,u=0;S>e;++e)r[e]!==m&&(l[q[u]=q[e]]=1,++u);for(F=[],K=0,e=0;f>e;++e)l[e]&&(l[e]=K++,F.push(s[e]));if(K>1||t)if(t)for(e=0;u>e;++e)for(n=0;n<q[e].length;++n)q[e][n]=l[q[e][n]];else for(e=0;u>e;++e)q[e]=l[q[e]];else q=null;M[M.indexOf(Q)]=K>1||t?(V=v,Q=i):1===K?(V=d,Q=a):V=Q=c}else if(1===K){if(Y)return;for(var h=0;S>h;++h)if(r[h]!==m)return;F=[],K=0,M[M.indexOf(Q)]=Q=V=c}}function i(r,e,n,o,i){if(!(r===P&&e===W||X)){var u,f,a,s,c;if(t){for(u=0,s=n.length;s>u;++u)if(k.zeroExcept(a=n[u],W,T))for(f=0;f<q[a].length;f++)c=F[q[a][f]],c.value=U(c.value,j[a],!1,f);for(u=0,s=o.length;s>u;++u)if(k.onlyExcept(a=o[u],W,T,e,r))for(f=0;f<q[a].length;f++)c=F[q[a][f]],c.value=D(c.value,j[a],i,f)}else{for(u=0,s=n.length;s>u;++u)k.zeroExcept(a=n[u],W,T)&&(c=F[q[a]],c.value=U(c.value,j[a],!1));for(u=0,s=o.length;s>u;++u)k.onlyExcept(a=o[u],W,T,e,r)&&(c=F[q[a]],c.value=D(c.value,j[a],i))}}}function a(r,t,e,n,o){if(!(r===P&&t===W||X)){var i,u,f,a=F[0];for(i=0,f=e.length;f>i;++i)k.zeroExcept(u=e[i],W,T)&&(a.value=U(a.value,j[u],!1));for(i=0,f=n.length;f>i;++i)k.onlyExcept(u=n[i],W,T,t,r)&&(a.value=D(a.value,j[u],o))}}function v(){var r,e,n;for(r=0;K>r;++r)F[r].value=I();if(t){for(r=0;S>r;++r)for(e=0;e<q[r].length;e++)n=F[q[r][e]],n.value=U(n.value,j[r],!0,e);for(r=0;S>r;++r)if(!k.zeroExcept(r,W,T))for(e=0;e<q[r].length;e++)n=F[q[r][e]],n.value=D(n.value,j[r],!1,e)}else{for(r=0;S>r;++r)n=F[q[r]],n.value=U(n.value,j[r],!0);for(r=0;S>r;++r)k.zeroExcept(r,W,T)||(n=F[q[r]],n.value=D(n.value,j[r],!1))}}function d(){var r,t=F[0];for(t.value=I(),r=0;S>r;++r)t.value=U(t.value,j[r],!0);for(r=0;S>r;++r)k.zeroExcept(r,W,T)||(t.value=D(t.value,j[r],!1))}function y(){return X&&(V(),X=!1),F}function g(r){var t=N(y(),0,F.length,r);return R.sort(t,0,t.length)}function _(r,t,e){return U=r,D=t,I=e,X=!0,$}function x(){return _(b.reduceIncrement,b.reduceDecrement,l)}function w(r){return _(b.reduceAdd(r),b.reduceSubtract(r),l)}function E(r){function t(t){return r(t.value)}return N=h.by(t),R=p.by(t),$}function A(){return E(s)}function O(){return K}function z(){var r=M.indexOf(Q);return r>=0&&M.splice(r,1),r=it.indexOf(e),r>=0&&it.splice(r,1),r=C.indexOf(n),r>=0&&C.splice(r,1),$}var $={top:g,all:y,reduce:_,reduceCount:x,reduceSum:w,order:E,orderNatural:A,size:O,dispose:z,remove:z};ut.push($);var F,q,N,R,U,D,I,L,J=8,H=u(J),K=0,Q=c,V=c,X=!0,Y=r===c;return arguments.length<1&&(r=s),M.push(Q),it.push(e),C.push(n),e(G,B,0,S),x().orderNatural()}function D(){var r=U(c),t=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return t()[0].value},r}function I(){ut.forEach(function(r){r.dispose()});var r=$.indexOf(e);return r>=0&&$.splice(r,1),r=$.indexOf(n),r>=0&&$.splice(r,1),r=C.indexOf(d),r>=0&&C.splice(r,1),k.masks[W]&=T,z()}if("string"==typeof r){var L=r;r=function(r){return x(r,L)}}var P,T,W,J,G,B,H,K,Q,V,X,Y,Z,rt,tt={filter:w,filterExact:E,filterRange:A,filterFunction:F,filterAll:z,top:N,bottom:R,group:U,groupAll:D,dispose:I,remove:I,accessor:r,id:function(){return J}},et=[],nt=g.by(function(r){return H[r]}),ot=a.filterAll,it=[],ut=[],ft=0,at=0,st=0;$.unshift(e),$.push(n),C.push(d);var ct=k.add();return W=ct.offset,P=ct.one,T=~P,J=W<<7|Math.log(P)/Math.log(2),e(j,0,S),n(j,0,S),tt}function d(){function r(r,t){var e;if(!v)for(e=t;S>e;++e)a=s(a,j[e],!0),k.zero(e)||(a=c(a,j[e],!1))}function t(r,t,e,n,o){var i,u,f;if(!v){for(i=0,f=e.length;f>i;++i)k.zero(u=e[i])&&(a=s(a,j[u],o));for(i=0,f=n.length;f>i;++i)k.only(u=n[i],t,r)&&(a=c(a,j[u],o))}}function e(){var r;for(a=h(),r=0;S>r;++r)a=s(a,j[r],!0),k.zero(r)||(a=c(a,j[r],!1))}function n(r,t,e){return s=r,c=t,h=e,v=!0,p}function o(){return n(b.reduceIncrement,b.reduceDecrement,l)}function i(r){return n(b.reduceAdd(r),b.reduceSubtract(r),l)}function u(){return v&&(e(),v=!1),a}function f(){var e=M.indexOf(t);return e>=0&&M.splice(e,1),e=$.indexOf(r),e>=0&&$.splice(e,1),p}var a,s,c,h,p={reduce:n,reduceCount:o,reduceSum:i,value:u,dispose:f,remove:f},v=!0;return M.push(t),$.push(r),r(j,0,S),o()}function _(){return S}function w(){return j}function E(){var r=[],t=0;for(t=0;S>t;t++)k.zero(t)&&r.push(j[t]);return r}function A(r){return"function"!=typeof r?(console.warn("onChange callback parameter must be a function!"),void 0):(F.push(r),function(){F.splice(F.indexOf(r),1)})}function O(r){for(var t=0;t<F.length;t++)F[t](r)}var k,z={add:r,remove:t,dimension:n,groupAll:d,size:_,all:w,allFiltered:E,onChange:A,isElementFiltered:e},j=[],S=0,M=[],$=[],C=[],F=[];return k=new f.bitarray(0),arguments.length?r(arguments[0]):z}function o(r,t){return(257>t?f.array8:65537>t?f.array16:f.array32)(r)}function i(r){for(var t=o(r,r),e=-1;++e<r;)t[e]=e;return t}function u(r){return 8===r?256:16===r?65536:4294967296}var f=r("./array"),a=r("./filter"),s=r("./identity"),c=r("./null"),l=r("./zero"),h=r("./heapselect"),p=r("./heap"),v=r("./bisect"),d=r("./insertionsort"),y=r("./permute"),g=r("./quicksort"),b=r("./reduce"),_=r("./../package.json"),x=r("lodash.result"),m=-1;e.crossfilter=n,e.crossfilter.heap=p,e.crossfilter.heapselect=h,e.crossfilter.bisect=v,e.crossfilter.insertionsort=d,e.crossfilter.permute=y,e.crossfilter.quicksort=g,e.crossfilter.version=_.version},{"./../package.json":3,"./array":4,"./bisect":5,"./filter":7,"./heap":8,"./heapselect":9,"./identity":10,"./insertionsort":11,"./null":12,"./permute":13,"./quicksort":14,"./reduce":15,"./zero":16,"lodash.result":2}],7:[function(r,t){"use strict";function e(r,t){return function(e){var n=e.length;return[r.left(e,t,0,n),r.right(e,t,0,n)]}}function n(r,t){var e=t[0],n=t[1];return function(t){var o=t.length;return[r.left(t,e,0,o),r.left(t,n,0,o)]}}function o(r){return[0,r.length]}t.exports={filterExact:e,filterRange:n,filterAll:o}},{}],8:[function(r,t){"use strict";function e(r){function t(r,t,e){for(var o=e-t,i=(o>>>1)+1;--i>0;)n(r,i,o,t);return r}function e(r,t,e){for(var o,i=e-t;--i>0;)o=r[t],r[t]=r[t+i],r[t+i]=o,n(r,1,i,t);return r}function n(t,e,n,o){for(var i,u=t[--o+e],f=r(u);(i=e<<1)<=n&&(n>i&&r(t[o+i])>r(t[o+i+1])&&i++,!(f<=r(t[o+i])));)t[o+e]=t[o+i],e=i;t[o+e]=u}return t.sort=e,t}var n=r("./identity");t.exports=e(n),t.exports.by=e},{"./identity":10}],9:[function(r,t){"use strict";function e(r){function t(t,n,o,i){var u,f,a,s=new Array(i=Math.min(o-n,i));for(f=0;i>f;++f)s[f]=t[n++];if(e(s,0,i),o>n){u=r(s[0]);do r(a=t[n])>u&&(s[0]=a,u=r(e(s,0,i)[0]));while(++n<o)}return s}var e=o.by(r);return t}var n=r("./identity"),o=r("./heap");t.exports=e(n),t.exports.by=e},{"./heap":8,"./identity":10}],10:[function(r,t){"use strict";function e(r){return r}t.exports=e},{}],11:[function(r,t){"use strict";function e(r){function t(t,e,n){for(var o=e+1;n>o;++o){for(var i=o,u=t[o],f=r(u);i>e&&r(t[i-1])>f;--i)t[i]=t[i-1];t[i]=u}return t}return t}var n=r("./identity");t.exports=e(n),t.exports.by=e},{"./identity":10}],12:[function(r,t){"use strict";function e(){return null}t.exports=e},{}],13:[function(r,t){"use strict";function e(r,t,e){for(var n=0,o=t.length,i=e?JSON.parse(JSON.stringify(r)):new Array(o);o>n;++n)i[n]=r[t[n]];return i}t.exports=e},{}],14:[function(r,t){function e(r){function t(r,t,o){return(i>o-t?n:e)(r,t,o)}function e(e,n,o){var i,u=0|(o-n)/6,f=n+u,a=o-1-u,s=n+o-1>>1,c=s-u,l=s+u,h=e[f],p=r(h),v=e[c],d=r(v),y=e[s],g=r(y),b=e[l],_=r(b),x=e[a],m=r(x);p>d&&(i=h,h=v,v=i,i=p,p=d,d=i),_>m&&(i=b,b=x,x=i,i=_,_=m,m=i),p>g&&(i=h,h=y,y=i,i=p,p=g,g=i),d>g&&(i=v,v=y,y=i,i=d,d=g,g=i),p>_&&(i=h,h=b,b=i,i=p,p=_,_=i),g>_&&(i=y,y=b,b=i,i=g,g=_,_=i),d>m&&(i=v,v=x,x=i,i=d,d=m,m=i),d>g&&(i=v,v=y,y=i,i=d,d=g,g=i),_>m&&(i=b,b=x,x=i,i=_,_=m,m=i);var w=v,E=d,A=b,O=_;e[f]=h,e[c]=e[n],e[s]=y,e[l]=e[o-1],e[a]=x;var k=n+1,z=o-2,j=O>=E&&E>=O;if(j)for(var S=k;z>=S;++S){var M=e[S],$=r(M);if(E>$)S!==k&&(e[S]=e[k],e[k]=M),++k;else if($>E)for(;;){var C=r(e[z]);{if(!(C>E)){if(E>C){e[S]=e[k],e[k++]=e[z],e[z--]=M;break}e[S]=e[z],e[z--]=M;break}z--}}}else!function(){for(var t=k;z>=t;t++){var n=e[t],o=r(n);if(E>o)t!==k&&(e[t]=e[k],e[k]=n),++k;else if(o>O)for(;;){var i=r(e[z]);{if(!(i>O)){E>i?(e[t]=e[k],e[k++]=e[z],e[z--]=n):(e[t]=e[z],e[z--]=n);break}if(z--,t>z)break}}}}();return e[n]=e[k-1],e[k-1]=w,e[o-1]=e[z+1],e[z+1]=A,t(e,n,k-1),t(e,z+2,o),j?e:(f>k&&z>a&&!function(){for(var t,n;(t=r(e[k]))<=E&&t>=E;)++k;for(;(n=r(e[z]))<=O&&n>=O;)--z;for(var o=k;z>=o;o++){var i=e[o],u=r(i);if(E>=u&&u>=E)o!==k&&(e[o]=e[k],e[k]=i),k++;else if(O>=u&&u>=O)for(;;){n=r(e[z]);{if(!(O>=n&&n>=O)){E>n?(e[o]=e[k],e[k++]=e[z],e[z--]=i):(e[o]=e[z],e[z--]=i);break}if(z--,o>z)break}}}}(),t(e,k,z+1))}var n=o.by(r);return t}var n=r("./identity"),o=r("./insertionsort"),i=32;t.exports=e(n),t.exports.by=e},{"./identity":10,"./insertionsort":11}],15:[function(r,t){"use strict";function e(r){return r+1}function n(r){return r-1}function o(r){return function(t,e){return t+ +r(e)}}function i(r){return function(t,e){return t-r(e)}}t.exports={reduceIncrement:e,reduceDecrement:n,reduceAdd:o,reduceSubtract:i}},{}],16:[function(r,t){"use strict";function e(){return 0}t.exports=e},{}]},{},[1])(1)});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/dojo/store/Observable.js":
/*!***********************************************!*\
  !*** ./node_modules/dojo/store/Observable.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ../_base/kernel */ "./node_modules/dojo/_base/kernel.js"), __webpack_require__(/*! ../_base/lang */ "./node_modules/dojo/_base/lang.js"), __webpack_require__(/*! ../when */ "./node_modules/dojo/when.js"), __webpack_require__(/*! ../_base/array */ "./node_modules/dojo/_base/array.js") /*=====, "./api/Store" =====*/
], __WEBPACK_AMD_DEFINE_RESULT__ = (function(kernel, lang, when, array /*=====, Store =====*/){

// module:
//		dojo/store/Observable

var Observable = function(/*Store*/ store){
	// summary:
	//		The Observable store wrapper takes a store and sets an observe method on query()
	//		results that can be used to monitor results for changes.
	//
	// description:
	//		Observable wraps an existing store so that notifications can be made when a query
	//		is performed.
	//
	// example:
	//		Create a Memory store that returns an observable query, and then log some
	//		information about that query.
	//
	//	|	var store = Observable(new Memory({
	//	|		data: [
	//	|			{id: 1, name: "one", prime: false},
	//	|			{id: 2, name: "two", even: true, prime: true},
	//	|			{id: 3, name: "three", prime: true},
	//	|			{id: 4, name: "four", even: true, prime: false},
	//	|			{id: 5, name: "five", prime: true}
	//	|		]
	//	|	}));
	//	|	var changes = [], results = store.query({ prime: true });
	//	|	var observer = results.observe(function(object, previousIndex, newIndex){
	//	|		changes.push({previousIndex:previousIndex, newIndex:newIndex, object:object});
	//	|	});
	//
	//		See the Observable tests for more information.

	var undef, queryUpdaters = [], revision = 0;
	// a Comet driven store could directly call notify to notify observers when data has
	// changed on the backend
	// create a new instance
	store = lang.delegate(store);
	
	store.notify = function(object, existingId){
		revision++;
		var updaters = queryUpdaters.slice();
		for(var i = 0, l = updaters.length; i < l; i++){
			updaters[i](object, existingId);
		}
	};
	var originalQuery = store.query;
	store.query = function(query, options){
		options = options || {};
		var results = originalQuery.apply(this, arguments);
		if(results && results.forEach){
			var nonPagedOptions = lang.mixin({}, options);
			delete nonPagedOptions.start;
			delete nonPagedOptions.count;

			var queryExecutor = store.queryEngine && store.queryEngine(query, nonPagedOptions);
			var queryRevision = revision;
			var listeners = [], queryUpdater;
			results.observe = function(listener, includeObjectUpdates){
				if(listeners.push(listener) == 1){
					// first listener was added, create the query checker and updater
					queryUpdaters.push(queryUpdater = function(changed, existingId){
						when(results, function(resultsArray){
							var atEnd = resultsArray.length != options.count;
							var i, l, listener;
							if(++queryRevision != revision){
								throw new Error("Query is out of date, you must observe() the query prior to any data modifications");
							}
							var removedObject, removedFrom = -1, insertedInto = -1;
							if(existingId !== undef){
								// remove the old one
								var filteredArray = [].concat(resultsArray);
								if(queryExecutor && !changed){
									filteredArray = queryExecutor(resultsArray);
								}
								for(i = 0, l = resultsArray.length; i < l; i++){
									var object = resultsArray[i];
									if(store.getIdentity(object) == existingId){
										if(filteredArray.indexOf(object)<0) continue;
										removedObject = object;
										removedFrom = i;
										if(queryExecutor || !changed){// if it was changed and we don't have a queryExecutor, we shouldn't remove it because updated objects would be eliminated
											resultsArray.splice(i, 1);
										}
										break;
									}
								}
							}
							if(queryExecutor){
								// add the new one
								if(changed &&
										// if a matches function exists, use that (probably more efficient)
										(queryExecutor.matches ? queryExecutor.matches(changed) : queryExecutor([changed]).length)){

									var firstInsertedInto = removedFrom > -1 ? 
										removedFrom : // put back in the original slot so it doesn't move unless it needs to (relying on a stable sort below)
										resultsArray.length;
									resultsArray.splice(firstInsertedInto, 0, changed); // add the new item
									insertedInto = array.indexOf(queryExecutor(resultsArray), changed); // sort it
									// we now need to push the change back into the original results array
									resultsArray.splice(firstInsertedInto, 1); // remove the inserted item from the previous index
									
									if((options.start && insertedInto == 0) ||
										(!atEnd && insertedInto == resultsArray.length)){
										// if it is at the end of the page, assume it goes into the prev or next page
										insertedInto = -1;
									}else{
										resultsArray.splice(insertedInto, 0, changed); // and insert into the results array with the correct index
									}
								}
							}else if(changed){
								// we don't have a queryEngine, so we can't provide any information
								// about where it was inserted or moved to. If it is an update, we leave it's position alone, other we at least indicate a new object
								if(existingId !== undef){
									// an update, keep the index the same
									insertedInto = removedFrom;
								}else if(!options.start){
									// a new object
									insertedInto = store.defaultIndex || 0;
									resultsArray.splice(insertedInto, 0, changed);
								}
							}
							if((removedFrom > -1 || insertedInto > -1) &&
									(includeObjectUpdates || !queryExecutor || (removedFrom != insertedInto))){
								var copyListeners = listeners.slice();
								for(i = 0;listener = copyListeners[i]; i++){
									listener(changed || removedObject, removedFrom, insertedInto);
								}
							}
						});
					});
				}
				var handle = {};
				// TODO: Remove cancel in 2.0.
				handle.remove = handle.cancel = function(){
					// remove this listener
					var index = array.indexOf(listeners, listener);
					if(index > -1){ // check to make sure we haven't already called cancel
						listeners.splice(index, 1);
						if(!listeners.length){
							// no more listeners, remove the query updater too
							queryUpdaters.splice(array.indexOf(queryUpdaters, queryUpdater), 1);
						}
					}
				};
				return handle;
			};
		}
		return results;
	};
	var inMethod;
	function whenFinished(method, action){
		var original = store[method];
		if(original){
			store[method] = function(value){
				var originalId;
				if(method === 'put'){
					originalId = store.getIdentity(value);
				}
				if(inMethod){
					// if one method calls another (like add() calling put()) we don't want two events
					return original.apply(this, arguments);
				}
				inMethod = true;
				try{
					var results = original.apply(this, arguments);
					when(results, function(results){
						action((typeof results == "object" && results) || value, originalId);
					});
					return results;
				}finally{
					inMethod = false;
				}
			};
		}
	}
	// monitor for updates by listening to these methods
	whenFinished("put", function(object, originalId){
		store.notify(object, originalId);
	});
	whenFinished("add", function(object){
		store.notify(object);
	});
	whenFinished("remove", function(id){
		store.notify(undefined, id);
	});

	return store;
};

lang.setObject("dojo.store.Observable", Observable);

return Observable;
}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ })

}]);