(function(){
(this||window)["webpackJsonp"].registerAbsMids({
	"@hpcc-js/graph":"./node_modules/@hpcc-js/graph/dist/index.min.js"
})
})(),(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[27],{

/***/ "./node_modules/@hpcc-js/graph/dist/index.min.js":
/*!*******************************************************!*\
  !*** ./node_modules/@hpcc-js/graph/dist/index.min.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {!function(t,e){ true?e(exports,__webpack_require__(/*! @hpcc-js/common */ "./node_modules/@hpcc-js/common/dist/index.min.js"),__webpack_require__(/*! @hpcc-js/api */ "./node_modules/@hpcc-js/api/dist/index.min.js")):undefined}(this,function(t,e,n){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Math.PI,a=2*o,s=a-1e-6;function u(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new u}function h(t){return function(){return t}}u.prototype=c.prototype={constructor:u,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,s=this._y1,u=n-t,c=r-e,h=a-t,l=s-e,f=h*h+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*u-c*h)>1e-6&&i){var d=n-a,p=r-s,g=u*u+c*c,v=d*d+p*p,_=Math.sqrt(g),y=Math.sqrt(f),x=i*Math.tan((o-Math.acos((g+f-v)/(2*_*y)))/2),m=x/y,b=x/_;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*h)+","+(e+m*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>h*p)+","+(this._x1=t+b*u)+","+(this._y1=e+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,u){t=+t,e=+e;var c=(n=+n)*Math.cos(r),h=n*Math.sin(r),l=t+c,f=e+h,d=1^u,p=u?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+f:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+l+","+f),n&&(p<0&&(p=p%a+a),p>s?this._+="A"+n+","+n+",0,1,"+d+","+(t-c)+","+(e-h)+"A"+n+","+n+",0,1,"+d+","+(this._x1=l)+","+(this._y1=f):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=o)+","+d+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var l=1e-12;Math.PI;function f(t){this._context=t}function d(t){return new f(t)}function p(t){return t[0]}function g(t){return t[1]}f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var v=Array.prototype.slice;function _(t){return t.source}function y(t){return t.target}function x(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function m(){return function(t){var e=_,n=y,r=p,i=g,o=null;function a(){var a,s=v.call(arguments),u=e.apply(this,s),h=n.apply(this,s);if(o||(o=a=c()),t(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=h,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}(x)}function b(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function w(t){this._context=t}function E(t,e){this._basis=new w(t),this._beta=e}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:b(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:b(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},E.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(t){return 1===e?new w(t):new E(t,e)}return n.beta=function(e){return t(+e)},n})(.85);function k(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function j(t,e){this._context=t,this._k=(1-e)/6}j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:k(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:k(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new j(t,e)}return n.tension=function(e){return t(+e)},n})(0);function N(t,e){this._context=t,this._alpha=e}N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>l){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>l){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/h,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new N(t,e):new j(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function S(t){return t<0?-1:1}function D(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(S(o)+S(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function M(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function O(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function C(t){this._context=t}function P(t){this._context=t}function T(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O(this,this._t0,M(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,O(this,M(this,n=D(this,t,e)),n);break;default:O(this,this._t0,n=D(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new P(t)}.prototype=Object.create(C.prototype)).point=function(t,e){C.prototype.point.call(this,e,t)},P.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};T(".graph_Edge {\r\n    fill: none;\r\n    stroke: #656565;\r\n    stroke-width: 1.0px;\r\n}\r\n\r\n.graph_Edge .common_TextBox .common_Text {\r\n    fill: black;\r\n    stroke: none;\r\n}\r\n\r\n.graph_Edge .common_TextBox .common_Shape {\r\n    fill: white;\r\n    stroke: none;\r\n}\r\n\r\n.graph_Edge.selected {\r\n    stroke:red !important;\r\n}\r\n\r\n.graph_Edge.selected .common_Text {\r\n    fill:red !important;\r\n}\r\n");var B=function(t){return new w(t)},I=function(t){function n(){var n=t.call(this)||this;return n._points=[],n._weight=100,n._strokeDasharray=null,n._hidden=!1,n._textBox=(new e.TextBox).padding(0),n}return i(n,t),n.prototype.graphID=function(t){return arguments.length?(this._graphID=t,this):this._graphID},n.prototype.sourceVertex=function(t){return arguments.length?(this._sourceVertex=t,this):this._sourceVertex},n.prototype.targetVertex=function(t){return arguments.length?(this._targetVertex=t,this):this._targetVertex},n.prototype.weight=function(t){return arguments.length?(this._weight=t,this):this._weight},n.prototype.points=function(t,e,n){return arguments.length?(this._points=t,this._elementPath&&this.update(null,this._element,e,n),this):this._points},n.prototype.hidden=function(t){return arguments.length?(this._hidden=t,this):this._hidden},n.prototype.text=function(t){return arguments.length?(this._textBox.text(t),this):this._textBox.text()},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._elementPath=n.append("path"),this._textBox.text()&&this._textBox.target(e).tooltip(this.tooltip()).render()},n.prototype.update=function(n,r,i,o){t.prototype.update.call(this,n,r);var a=this;e.Platform.svgMarkerGlitch&&!o&&r.transition().duration((i||0)+100).on("start",function(){a._pushMarkers(r)}).on("end",function(){a._popMarkers(r)});var s=a._calculateEdgePoints(this._sourceVertex,this._targetVertex,this._points),u=r.selectAll(".point2").data(this.showControlPoints()?s:[]);u.enter().append("circle").attr("class","point2").style("stroke","red").merge(u).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",1),u.exit().remove();var l=function(){var t=p,e=g,n=h(!0),r=null,i=d,o=null;function a(a){var s,u,h,l=a.length,f=!1;for(null==r&&(o=i(h=c())),s=0;s<=l;++s)!(s<l&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,s,a),+e(u,s,a));if(h)return o=null,h+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:h(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:h(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:h(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}().x(function(t){return t.x}).y(function(t){return t.y}).curve(B)(s),f=this._elementPath;i&&(f=f.transition().duration(i)),f.attr("opacity",this._hidden?0:1).attr("marker-start",e.Platform.svgMarkerGlitch&&o||!this.sourceMarker_exists()?null:"url(#"+this._graphID+"_"+this.sourceMarker()+"Foot)").attr("marker-end",e.Platform.svgMarkerGlitch&&o||!this.targetMarker_exists()?null:"url(#"+this._graphID+"_"+this.targetMarker()+"Head)").attr("stroke",this.strokeColor_exists()?this.strokeColor():null).attr("stroke-dasharray",this.strokeDasharray_exists()?this.strokeDasharray():null).attr("d",l),this._textBox.text()&&this._textBox.tooltip(this.tooltip()).move(this._findMidPoint(s),i)},n.prototype.exit=function(e,n){this._textBox&&this._textBox.target(null),t.prototype.exit.call(this,e,n)},n.prototype._findMidPoint=function(t){var e=t.length/2;if(t.length%2)return t[Math.floor(e)];if(t.length){var n=t[e-1],r=t[e];return{x:(n.x+r.x)/2,y:(n.y+r.y)/2}}return{x:0,y:0}},n.prototype._calculateEdgePoints=function(t,e,n){if(!t||!e)return[{x:0,y:0},{x:0,y:0}];var r=n?n.filter(function(n){return!t.contains(n)&&!e.contains(n)}):[],i=0===r.length?e.pos():r[0],o=0===r.length?t.pos():r[r.length-1];if(r.unshift(t.intersection(t._pos,i)),r.push(e.intersection(e._pos,o)),r[0]||(r[0]=t._pos),r[r.length-1]||(r[r.length-1]=e._pos),(!n||0===n.length)&&2===r.length&&r[0]&&r[1]){var a=r[0].x-r[1].x,s=r[0].y-r[1].y;if(Math.sqrt(a*a+s*s))if(this.showArc()){var u=(r[0].x+r[1].x)/2-s*this.arcDepth()/100,c=(r[0].y+r[1].y)/2+a*this.arcDepth()/100;r=[{x:r[0].x,y:r[0].y},{x:u,y:c},{x:r[1].x,y:r[1].y}]}else r=[{x:r[0].x,y:r[0].y},{x:r[1].x,y:r[1].y}]}return r},n}(e.SVGWidget);I.prototype._class+=" graph_Edge",I.prototype.publish("arcDepth",16,"number","Arc Depth",null,{tags:["Basic"]}),I.prototype.publish("showControlPoints",!1,"boolean","Show/Hide Control Points",null,{tags:["Basic"]}),I.prototype.publish("showArc",!0,"boolean","Show/Hide Arc",null,{tags:["Basic"]}),I.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),I.prototype.publish("sourceMarker","circle","set","Source Marker",["none","circle"],{optional:!0}),I.prototype.publish("targetMarker","arrow","set","Source Marker",["none","arrow","circle"],{optional:!0}),I.prototype.publish("strokeDasharray",null,"string","Stroke Dash Array",null,{optional:!0}),I.prototype.publish("strokeColor",null,"html-color","Stroke Color",null,{optional:!0}),I.prototype.publish("textColor",null,"html-color","Text Color",null,{optional:!0}),I.prototype.publishProxy("text_shape_colorFill","_textBox","shape_colorFill"),I.prototype.publishProxy("text_shape_colorStroke","_textBox","shape_colorStroke"),I.prototype.publishProxy("text_text_colorFill","_textBox","text_colorFill");var A="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function L(t,e){return t(e={exports:{}},e.exports),e.exports}var V=function(){this.__data__=[],this.size=0};var F=function(t,e){return t===e||t!=t&&e!=e};var z=function(t,e){for(var n=t.length;n--;)if(F(t[n][0],e))return n;return-1},G=Array.prototype.splice;var R=function(t){var e=this.__data__,n=z(e,t);return!(n<0||(n==e.length-1?e.pop():G.call(e,n,1),--this.size,0))};var U=function(t){var e=this.__data__,n=z(e,t);return n<0?void 0:e[n][1]};var W=function(t){return z(this.__data__,t)>-1};var q=function(t,e){var n=this.__data__,r=z(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function H(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}H.prototype.clear=V,H.prototype.delete=R,H.prototype.get=U,H.prototype.has=W,H.prototype.set=q;var Y=H;var $=function(){this.__data__=new Y,this.size=0};var J=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var X=function(t){return this.__data__.get(t)};var K=function(t){return this.__data__.has(t)},Z="object"==typeof A&&A&&A.Object===Object&&A,Q="object"==typeof self&&self&&self.Object===Object&&self,tt=Z||Q||Function("return this")(),et=tt.Symbol,nt=Object.prototype,rt=nt.hasOwnProperty,it=nt.toString,ot=et?et.toStringTag:void 0;var at=function(t){var e=rt.call(t,ot),n=t[ot];try{t[ot]=void 0;var r=!0}catch(t){}var i=it.call(t);return r&&(e?t[ot]=n:delete t[ot]),i},st=Object.prototype.toString;var ut=function(t){return st.call(t)},ct="[object Null]",ht="[object Undefined]",lt=et?et.toStringTag:void 0;var ft=function(t){return null==t?void 0===t?ht:ct:lt&&lt in Object(t)?at(t):ut(t)};var dt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},pt="[object AsyncFunction]",gt="[object Function]",vt="[object GeneratorFunction]",_t="[object Proxy]";var yt,xt=function(t){if(!dt(t))return!1;var e=ft(t);return e==gt||e==vt||e==pt||e==_t},mt=tt["__core-js_shared__"],bt=(yt=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"";var wt=function(t){return!!bt&&bt in t},Et=Function.prototype.toString;var kt=function(t){if(null!=t){try{return Et.call(t)}catch(t){}try{return t+""}catch(t){}}return""},jt=/^\[object .+?Constructor\]$/,Nt=Function.prototype,St=Object.prototype,Dt=Nt.toString,Mt=St.hasOwnProperty,Ot=RegExp("^"+Dt.call(Mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ct=function(t){return!(!dt(t)||wt(t))&&(xt(t)?Ot:jt).test(kt(t))};var Pt=function(t,e){return null==t?void 0:t[e]};var Tt=function(t,e){var n=Pt(t,e);return Ct(n)?n:void 0},Bt=Tt(tt,"Map"),It=Tt(Object,"create");var At=function(){this.__data__=It?It(null):{},this.size=0};var Lt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vt="__lodash_hash_undefined__",Ft=Object.prototype.hasOwnProperty;var zt=function(t){var e=this.__data__;if(It){var n=e[t];return n===Vt?void 0:n}return Ft.call(e,t)?e[t]:void 0},Gt=Object.prototype.hasOwnProperty;var Rt=function(t){var e=this.__data__;return It?void 0!==e[t]:Gt.call(e,t)},Ut="__lodash_hash_undefined__";var Wt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=It&&void 0===e?Ut:e,this};function qt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qt.prototype.clear=At,qt.prototype.delete=Lt,qt.prototype.get=zt,qt.prototype.has=Rt,qt.prototype.set=Wt;var Ht=qt;var Yt=function(){this.size=0,this.__data__={hash:new Ht,map:new(Bt||Y),string:new Ht}};var $t=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Jt=function(t,e){var n=t.__data__;return $t(e)?n["string"==typeof e?"string":"hash"]:n.map};var Xt=function(t){var e=Jt(this,t).delete(t);return this.size-=e?1:0,e};var Kt=function(t){return Jt(this,t).get(t)};var Zt=function(t){return Jt(this,t).has(t)};var Qt=function(t,e){var n=Jt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function te(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}te.prototype.clear=Yt,te.prototype.delete=Xt,te.prototype.get=Kt,te.prototype.has=Zt,te.prototype.set=Qt;var ee=te,ne=200;var re=function(t,e){var n=this.__data__;if(n instanceof Y){var r=n.__data__;if(!Bt||r.length<ne-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ee(r)}return n.set(t,e),this.size=n.size,this};function ie(t){var e=this.__data__=new Y(t);this.size=e.size}ie.prototype.clear=$,ie.prototype.delete=J,ie.prototype.get=X,ie.prototype.has=K,ie.prototype.set=re;var oe=ie;var ae=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},se=function(){try{var t=Tt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var ue=function(t,e,n){"__proto__"==e&&se?se(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},ce=Object.prototype.hasOwnProperty;var he=function(t,e,n){var r=t[e];ce.call(t,e)&&F(r,n)&&(void 0!==n||e in t)||ue(t,e,n)};var le=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?ue(n,s,u):he(n,s,u)}return n};var fe=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var de=function(t){return null!=t&&"object"==typeof t},pe="[object Arguments]";var ge=function(t){return de(t)&&ft(t)==pe},ve=Object.prototype,_e=ve.hasOwnProperty,ye=ve.propertyIsEnumerable,xe=ge(function(){return arguments}())?ge:function(t){return de(t)&&_e.call(t,"callee")&&!ye.call(t,"callee")},me=Array.isArray;var be=function(){return!1},we=L(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?tt.Buffer:void 0,o=(i?i.isBuffer:void 0)||be;t.exports=o}),Ee=9007199254740991,ke=/^(?:0|[1-9]\d*)$/;var je=function(t,e){var n=typeof t;return!!(e=null==e?Ee:e)&&("number"==n||"symbol"!=n&&ke.test(t))&&t>-1&&t%1==0&&t<e},Ne=9007199254740991;var Se=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ne},De={};De["[object Float32Array]"]=De["[object Float64Array]"]=De["[object Int8Array]"]=De["[object Int16Array]"]=De["[object Int32Array]"]=De["[object Uint8Array]"]=De["[object Uint8ClampedArray]"]=De["[object Uint16Array]"]=De["[object Uint32Array]"]=!0,De["[object Arguments]"]=De["[object Array]"]=De["[object ArrayBuffer]"]=De["[object Boolean]"]=De["[object DataView]"]=De["[object Date]"]=De["[object Error]"]=De["[object Function]"]=De["[object Map]"]=De["[object Number]"]=De["[object Object]"]=De["[object RegExp]"]=De["[object Set]"]=De["[object String]"]=De["[object WeakMap]"]=!1;var Me=function(t){return de(t)&&Se(t.length)&&!!De[ft(t)]};var Oe=function(t){return function(e){return t(e)}},Ce=L(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&Z.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o}),Pe=Ce&&Ce.isTypedArray,Te=Pe?Oe(Pe):Me,Be=Object.prototype.hasOwnProperty;var Ie=function(t,e){var n=me(t),r=!n&&xe(t),i=!n&&!r&&we(t),o=!n&&!r&&!i&&Te(t),a=n||r||i||o,s=a?fe(t.length,String):[],u=s.length;for(var c in t)!e&&!Be.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||je(c,u))||s.push(c);return s},Ae=Object.prototype;var Le=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ae)};var Ve=function(t,e){return function(n){return t(e(n))}},Fe=Ve(Object.keys,Object),ze=Object.prototype.hasOwnProperty;var Ge=function(t){if(!Le(t))return Fe(t);var e=[];for(var n in Object(t))ze.call(t,n)&&"constructor"!=n&&e.push(n);return e};var Re=function(t){return null!=t&&Se(t.length)&&!xt(t)};var Ue=function(t){return Re(t)?Ie(t):Ge(t)};var We=function(t,e){return t&&le(e,Ue(e),t)};var qe=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},He=Object.prototype.hasOwnProperty;var Ye=function(t){if(!dt(t))return qe(t);var e=Le(t),n=[];for(var r in t)("constructor"!=r||!e&&He.call(t,r))&&n.push(r);return n};var $e=function(t){return Re(t)?Ie(t,!0):Ye(t)};var Je=function(t,e){return t&&le(e,$e(e),t)},Xe=L(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?tt.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}});var Ke=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var Ze=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var Qe=function(){return[]},tn=Object.prototype.propertyIsEnumerable,en=Object.getOwnPropertySymbols,nn=en?function(t){return null==t?[]:(t=Object(t),Ze(en(t),function(e){return tn.call(t,e)}))}:Qe;var rn=function(t,e){return le(t,nn(t),e)};var on=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},an=Ve(Object.getPrototypeOf,Object),sn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)on(e,nn(t)),t=an(t);return e}:Qe;var un=function(t,e){return le(t,sn(t),e)};var cn=function(t,e,n){var r=e(t);return me(t)?r:on(r,n(t))};var hn=function(t){return cn(t,Ue,nn)};var ln=function(t){return cn(t,$e,sn)},fn=Tt(tt,"DataView"),dn=Tt(tt,"Promise"),pn=Tt(tt,"Set"),gn=Tt(tt,"WeakMap"),vn=kt(fn),_n=kt(Bt),yn=kt(dn),xn=kt(pn),mn=kt(gn),bn=ft;(fn&&"[object DataView]"!=bn(new fn(new ArrayBuffer(1)))||Bt&&"[object Map]"!=bn(new Bt)||dn&&"[object Promise]"!=bn(dn.resolve())||pn&&"[object Set]"!=bn(new pn)||gn&&"[object WeakMap]"!=bn(new gn))&&(bn=function(t){var e=ft(t),n="[object Object]"==e?t.constructor:void 0,r=n?kt(n):"";if(r)switch(r){case vn:return"[object DataView]";case _n:return"[object Map]";case yn:return"[object Promise]";case xn:return"[object Set]";case mn:return"[object WeakMap]"}return e});var wn=bn,En=Object.prototype.hasOwnProperty;var kn=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&En.call(t,"index")&&(n.index=t.index,n.input=t.input),n},jn=tt.Uint8Array;var Nn=function(t){var e=new t.constructor(t.byteLength);return new jn(e).set(new jn(t)),e};var Sn=function(t,e){var n=e?Nn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Dn=/\w*$/;var Mn=function(t){var e=new t.constructor(t.source,Dn.exec(t));return e.lastIndex=t.lastIndex,e},On=et?et.prototype:void 0,Cn=On?On.valueOf:void 0;var Pn=function(t){return Cn?Object(Cn.call(t)):{}};var Tn=function(t,e){var n=e?Nn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Bn="[object Boolean]",In="[object Date]",An="[object Map]",Ln="[object Number]",Vn="[object RegExp]",Fn="[object Set]",zn="[object String]",Gn="[object Symbol]",Rn="[object ArrayBuffer]",Un="[object DataView]",Wn="[object Float32Array]",qn="[object Float64Array]",Hn="[object Int8Array]",Yn="[object Int16Array]",$n="[object Int32Array]",Jn="[object Uint8Array]",Xn="[object Uint8ClampedArray]",Kn="[object Uint16Array]",Zn="[object Uint32Array]";var Qn=function(t,e,n){var r=t.constructor;switch(e){case Rn:return Nn(t);case Bn:case In:return new r(+t);case Un:return Sn(t,n);case Wn:case qn:case Hn:case Yn:case $n:case Jn:case Xn:case Kn:case Zn:return Tn(t,n);case An:return new r;case Ln:case zn:return new r(t);case Vn:return Mn(t);case Fn:return new r;case Gn:return Pn(t)}},tr=Object.create,er=function(){function t(){}return function(e){if(!dt(e))return{};if(tr)return tr(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var nr=function(t){return"function"!=typeof t.constructor||Le(t)?{}:er(an(t))},rr="[object Map]";var ir=function(t){return de(t)&&wn(t)==rr},or=Ce&&Ce.isMap,ar=or?Oe(or):ir,sr="[object Set]";var ur=function(t){return de(t)&&wn(t)==sr},cr=Ce&&Ce.isSet,hr=cr?Oe(cr):ur,lr=1,fr=2,dr=4,pr="[object Arguments]",gr="[object Function]",vr="[object GeneratorFunction]",_r="[object Object]",yr={};yr[pr]=yr["[object Array]"]=yr["[object ArrayBuffer]"]=yr["[object DataView]"]=yr["[object Boolean]"]=yr["[object Date]"]=yr["[object Float32Array]"]=yr["[object Float64Array]"]=yr["[object Int8Array]"]=yr["[object Int16Array]"]=yr["[object Int32Array]"]=yr["[object Map]"]=yr["[object Number]"]=yr[_r]=yr["[object RegExp]"]=yr["[object Set]"]=yr["[object String]"]=yr["[object Symbol]"]=yr["[object Uint8Array]"]=yr["[object Uint8ClampedArray]"]=yr["[object Uint16Array]"]=yr["[object Uint32Array]"]=!0,yr["[object Error]"]=yr[gr]=yr["[object WeakMap]"]=!1;var xr=function t(e,n,r,i,o,a){var s,u=n&lr,c=n&fr,h=n&dr;if(r&&(s=o?r(e,i,o,a):r(e)),void 0!==s)return s;if(!dt(e))return e;var l=me(e);if(l){if(s=kn(e),!u)return Ke(e,s)}else{var f=wn(e),d=f==gr||f==vr;if(we(e))return Xe(e,u);if(f==_r||f==pr||d&&!o){if(s=c||d?{}:nr(e),!u)return c?un(e,Je(s,e)):rn(e,We(s,e))}else{if(!yr[f])return o?e:{};s=Qn(e,f,u)}}a||(a=new oe);var p=a.get(e);if(p)return p;if(a.set(e,s),hr(e))return e.forEach(function(i){s.add(t(i,n,r,i,e,a))}),s;if(ar(e))return e.forEach(function(i,o){s.set(o,t(i,n,r,o,e,a))}),s;var g=h?c?ln:hn:c?keysIn:Ue,v=l?void 0:g(e);return ae(v||e,function(i,o){v&&(i=e[o=i]),he(s,o,t(i,n,r,o,e,a))}),s},mr=4;var br=function(t){return xr(t,mr)};var wr=function(t){return function(){return t}};var Er=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}();var kr=function(t,e){return t&&Er(t,e,Ue)};var jr=function(t,e){return function(n,r){if(null==n)return n;if(!Re(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(kr);var Nr=function(t){return t};var Sr=function(t){return"function"==typeof t?t:Nr};var Dr=function(t,e){return(me(t)?ae:jr)(t,Sr(e))},Mr=Dr;var Or=function(t,e){var n=[];return jr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n},Cr="__lodash_hash_undefined__";var Pr=function(t){return this.__data__.set(t,Cr),this};var Tr=function(t){return this.__data__.has(t)};function Br(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ee;++e<n;)this.add(t[e])}Br.prototype.add=Br.prototype.push=Pr,Br.prototype.has=Tr;var Ir=Br;var Ar=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Lr=function(t,e){return t.has(e)},Vr=1,Fr=2;var zr=function(t,e,n,r,i,o){var a=n&Vr,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var h=-1,l=!0,f=n&Fr?new Ir:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var d=t[h],p=e[h];if(r)var g=a?r(p,d,h,e,t,o):r(d,p,h,t,e,o);if(void 0!==g){if(g)continue;l=!1;break}if(f){if(!Ar(e,function(t,e){if(!Lr(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){l=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){l=!1;break}}return o.delete(t),o.delete(e),l};var Gr=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Rr=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Ur=1,Wr=2,qr="[object Boolean]",Hr="[object Date]",Yr="[object Error]",$r="[object Map]",Jr="[object Number]",Xr="[object RegExp]",Kr="[object Set]",Zr="[object String]",Qr="[object Symbol]",ti="[object ArrayBuffer]",ei="[object DataView]",ni=et?et.prototype:void 0,ri=ni?ni.valueOf:void 0;var ii=function(t,e,n,r,i,o,a){switch(n){case ei:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ti:return!(t.byteLength!=e.byteLength||!o(new jn(t),new jn(e)));case qr:case Hr:case Jr:return F(+t,+e);case Yr:return t.name==e.name&&t.message==e.message;case Xr:case Zr:return t==e+"";case $r:var s=Gr;case Kr:var u=r&Ur;if(s||(s=Rr),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=Wr,a.set(t,e);var h=zr(s(t),s(e),r,i,o,a);return a.delete(t),h;case Qr:if(ri)return ri.call(t)==ri.call(e)}return!1},oi=1,ai=Object.prototype.hasOwnProperty;var si=function(t,e,n,r,i,o){var a=n&oi,s=hn(t),u=s.length;if(u!=hn(e).length&&!a)return!1;for(var c=u;c--;){var h=s[c];if(!(a?h in e:ai.call(e,h)))return!1}var l=o.get(t);if(l&&o.get(e))return l==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){var p=t[h=s[c]],g=e[h];if(r)var v=a?r(g,p,h,e,t,o):r(p,g,h,t,e,o);if(!(void 0===v?p===g||i(p,g,n,r,o):v)){f=!1;break}d||(d="constructor"==h)}if(f&&!d){var _=t.constructor,y=e.constructor;_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f},ui=1,ci="[object Arguments]",hi="[object Array]",li="[object Object]",fi=Object.prototype.hasOwnProperty;var di=function(t,e,n,r,i,o){var a=me(t),s=me(e),u=a?hi:wn(t),c=s?hi:wn(e),h=(u=u==ci?li:u)==li,l=(c=c==ci?li:c)==li,f=u==c;if(f&&we(t)){if(!we(e))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new oe),a||Te(t)?zr(t,e,n,r,i,o):ii(t,e,u,n,r,i,o);if(!(n&ui)){var d=h&&fi.call(t,"__wrapped__"),p=l&&fi.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,v=p?e.value():e;return o||(o=new oe),i(g,v,n,r,o)}}return!!f&&(o||(o=new oe),si(t,e,n,r,i,o))};var pi=function t(e,n,r,i,o){return e===n||(null==e||null==n||!de(e)&&!de(n)?e!=e&&n!=n:di(e,n,r,i,t,o))},gi=1,vi=2;var _i=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],c=t[u],h=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new oe;if(r)var f=r(c,h,u,t,e,l);if(!(void 0===f?pi(h,c,gi|vi,r,l):f))return!1}}return!0};var yi=function(t){return t==t&&!dt(t)};var xi=function(t){for(var e=Ue(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,yi(i)]}return e};var mi=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var bi=function(t){var e=xi(t);return 1==e.length&&e[0][2]?mi(e[0][0],e[0][1]):function(n){return n===t||_i(n,t,e)}},wi="[object Symbol]";var Ei=function(t){return"symbol"==typeof t||de(t)&&ft(t)==wi},ki=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ji=/^\w*$/;var Ni=function(t,e){if(me(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ei(t))||ji.test(t)||!ki.test(t)||null!=e&&t in Object(e)},Si="Expected a function";function Di(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Si);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Di.Cache||ee),n}Di.Cache=ee;var Mi=Di,Oi=500;var Ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pi=/\\(\\)?/g,Ti=function(t){var e=Mi(t,function(t){return n.size===Oi&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ci,function(t,n,r,i){e.push(r?i.replace(Pi,"$1"):n||t)}),e});var Bi=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},Ii=1/0,Ai=et?et.prototype:void 0,Li=Ai?Ai.toString:void 0;var Vi=function t(e){if("string"==typeof e)return e;if(me(e))return Bi(e,t)+"";if(Ei(e))return Li?Li.call(e):"";var n=e+"";return"0"==n&&1/e==-Ii?"-0":n};var Fi=function(t){return null==t?"":Vi(t)};var zi=function(t,e){return me(t)?t:Ni(t,e)?[t]:Ti(Fi(t))},Gi=1/0;var Ri=function(t){if("string"==typeof t||Ei(t))return t;var e=t+"";return"0"==e&&1/t==-Gi?"-0":e};var Ui=function(t,e){for(var n=0,r=(e=zi(e,t)).length;null!=t&&n<r;)t=t[Ri(e[n++])];return n&&n==r?t:void 0};var Wi=function(t,e,n){var r=null==t?void 0:Ui(t,e);return void 0===r?n:r};var qi=function(t,e){return null!=t&&e in Object(t)};var Hi=function(t,e,n){for(var r=-1,i=(e=zi(e,t)).length,o=!1;++r<i;){var a=Ri(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Se(i)&&je(a,i)&&(me(t)||xe(t))};var Yi=function(t,e){return null!=t&&Hi(t,e,qi)},$i=1,Ji=2;var Xi=function(t,e){return Ni(t)&&yi(e)?mi(Ri(t),e):function(n){var r=Wi(n,t);return void 0===r&&r===e?Yi(n,t):pi(e,r,$i|Ji)}};var Ki=function(t){return function(e){return null==e?void 0:e[t]}};var Zi=function(t){return function(e){return Ui(e,t)}};var Qi=function(t){return Ni(t)?Ki(Ri(t)):Zi(t)};var to=function(t){return"function"==typeof t?t:null==t?Nr:"object"==typeof t?me(t)?Xi(t[0],t[1]):bi(t):Qi(t)};var eo=function(t,e){return(me(t)?Ze:Or)(t,to(e,3))},no=Object.prototype.hasOwnProperty;var ro=function(t,e){return null!=t&&no.call(t,e)};var io=function(t,e){return null!=t&&Hi(t,e,ro)},oo="[object Map]",ao="[object Set]",so=Object.prototype.hasOwnProperty;var uo=function(t){if(null==t)return!0;if(Re(t)&&(me(t)||"string"==typeof t||"function"==typeof t.splice||we(t)||Te(t)||xe(t)))return!t.length;var e=wn(t);if(e==oo||e==ao)return!t.size;if(Le(t))return!Ge(t).length;for(var n in t)if(so.call(t,n))return!1;return!0};var co=function(t){return void 0===t};var ho=function(t,e){var n=-1,r=Re(t)?Array(t.length):[];return jr(t,function(t,i,o){r[++n]=e(t,i,o)}),r};var lo=function(t,e){return(me(t)?Bi:ho)(t,to(e,3))};var fo=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var po=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n};var go=function(t,e,n){var r=me(t)?fo:po,i=arguments.length<3;return r(t,to(e,4),n,i,jr)},vo="[object String]";var _o=function(t){return"string"==typeof t||!me(t)&&de(t)&&ft(t)==vo},yo=Ki("length"),xo=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var mo=function(t){return xo.test(t)},bo="[\\ud800-\\udfff]",wo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Eo="\\ud83c[\\udffb-\\udfff]",ko="[^\\ud800-\\udfff]",jo="(?:\\ud83c[\\udde6-\\uddff]){2}",No="[\\ud800-\\udbff][\\udc00-\\udfff]",So="(?:"+wo+"|"+Eo+")"+"?",Do="[\\ufe0e\\ufe0f]?"+So+("(?:\\u200d(?:"+[ko,jo,No].join("|")+")[\\ufe0e\\ufe0f]?"+So+")*"),Mo="(?:"+[ko+wo+"?",wo,jo,No,bo].join("|")+")",Oo=RegExp(Eo+"(?="+Eo+")|"+Mo+Do,"g");var Co=function(t){for(var e=Oo.lastIndex=0;Oo.test(t);)++e;return e};var Po=function(t){return mo(t)?Co(t):yo(t)},To="[object Map]",Bo="[object Set]";var Io=function(t){if(null==t)return 0;if(Re(t))return _o(t)?Po(t):t.length;var e=wn(t);return e==To||e==Bo?t.size:Ge(t).length};var Ao=function(t,e,n){var r=me(t),i=r||we(t)||Te(t);if(e=to(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:dt(t)&&xt(o)?er(an(t)):{}}return(i?ae:kr)(t,function(t,r,i){return e(n,t,r,i)}),n},Lo=et?et.isConcatSpreadable:void 0;var Vo=function(t){return me(t)||xe(t)||!!(Lo&&t&&t[Lo])};var Fo=function t(e,n,r,i,o){var a=-1,s=e.length;for(r||(r=Vo),o||(o=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,i,o):on(o,u):i||(o[o.length]=u)}return o};var zo=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Go=Math.max;var Ro=function(t,e,n){return e=Go(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Go(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),zo(t,this,s)}},Uo=se?function(t,e){return se(t,"toString",{configurable:!0,enumerable:!1,value:wr(e),writable:!0})}:Nr,Wo=800,qo=16,Ho=Date.now;var Yo=function(t){var e=0,n=0;return function(){var r=Ho(),i=qo-(r-n);if(n=r,i>0){if(++e>=Wo)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Uo);var $o=function(t,e){return Yo(Ro(t,e,Nr),t+"")};var Jo=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var Xo=function(t){return t!=t};var Ko=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var Zo=function(t,e,n){return e==e?Ko(t,e,n):Jo(t,Xo,n)};var Qo=function(t,e){return!(null==t||!t.length)&&Zo(t,e,0)>-1};var ta=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var ea=function(){},na=pn&&1/Rr(new pn([,-0]))[1]==1/0?function(t){return new pn(t)}:ea,ra=200;var ia=function(t,e,n){var r=-1,i=Qo,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=ta;else if(o>=ra){var c=e?null:na(t);if(c)return Rr(c);a=!1,i=Lr,u=new Ir}else u=e?[]:s;t:for(;++r<o;){var h=t[r],l=e?e(h):h;if(h=n||0!==h?h:0,a&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),s.push(h)}else i(u,l,n)||(u!==s&&u.push(l),s.push(h))}return s};var oa=function(t){return de(t)&&Re(t)},aa=$o(function(t){return ia(Fo(t,1,oa,!0))});var sa=function(t,e){return Bi(e,function(e){return t[e]})};var ua,ca=function(t){return null==t?[]:sa(t,Ue(t))};try{ua={clone:br,constant:wr,each:Mr,filter:eo,has:io,isArray:me,isEmpty:uo,isFunction:xt,isUndefined:co,keys:Ue,map:lo,reduce:go,size:Io,transform:Ao,union:aa,values:ca}}catch(t){}ua||(ua=window._);var ha=ua,la=ga,fa="\0",da="\0",pa="";function ga(t){this._isDirected=!ha.has(t,"directed")||t.directed,this._isMultigraph=!!ha.has(t,"multigraph")&&t.multigraph,this._isCompound=!!ha.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=ha.constant(void 0),this._defaultEdgeLabelFn=ha.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[da]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function va(t,e){t[e]?t[e]++:t[e]=1}function _a(t,e){--t[e]||delete t[e]}function ya(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+pa+o+pa+(ha.isUndefined(r)?fa:r)}function xa(t,e){return ya(t,e.v,e.w,e.name)}ga.prototype._nodeCount=0,ga.prototype._edgeCount=0,ga.prototype.isDirected=function(){return this._isDirected},ga.prototype.isMultigraph=function(){return this._isMultigraph},ga.prototype.isCompound=function(){return this._isCompound},ga.prototype.setGraph=function(t){return this._label=t,this},ga.prototype.graph=function(){return this._label},ga.prototype.setDefaultNodeLabel=function(t){return ha.isFunction(t)||(t=ha.constant(t)),this._defaultNodeLabelFn=t,this},ga.prototype.nodeCount=function(){return this._nodeCount},ga.prototype.nodes=function(){return ha.keys(this._nodes)},ga.prototype.sources=function(){var t=this;return ha.filter(this.nodes(),function(e){return ha.isEmpty(t._in[e])})},ga.prototype.sinks=function(){var t=this;return ha.filter(this.nodes(),function(e){return ha.isEmpty(t._out[e])})},ga.prototype.setNodes=function(t,e){var n=arguments,r=this;return ha.each(t,function(t){n.length>1?r.setNode(t,e):r.setNode(t)}),this},ga.prototype.setNode=function(t,e){return ha.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=da,this._children[t]={},this._children[da][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},ga.prototype.node=function(t){return this._nodes[t]},ga.prototype.hasNode=function(t){return ha.has(this._nodes,t)},ga.prototype.removeNode=function(t){var e=this;if(ha.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],ha.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),ha.each(ha.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],ha.each(ha.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},ga.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ha.isUndefined(e))e=da;else{for(var n=e+="";!ha.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},ga.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},ga.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==da)return e}},ga.prototype.children=function(t){if(ha.isUndefined(t)&&(t=da),this._isCompound){var e=this._children[t];if(e)return ha.keys(e)}else{if(t===da)return this.nodes();if(this.hasNode(t))return[]}},ga.prototype.predecessors=function(t){var e=this._preds[t];if(e)return ha.keys(e)},ga.prototype.successors=function(t){var e=this._sucs[t];if(e)return ha.keys(e)},ga.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return ha.union(e,this.successors(t))},ga.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},ga.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;ha.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),ha.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var r={};return this._isCompound&&ha.each(e.nodes(),function(t){e.setParent(t,function t(i){var o=n.parent(i);return void 0===o||e.hasNode(o)?(r[i]=o,o):o in r?r[o]:t(o)}(t))}),e},ga.prototype.setDefaultEdgeLabel=function(t){return ha.isFunction(t)||(t=ha.constant(t)),this._defaultEdgeLabelFn=t,this},ga.prototype.edgeCount=function(){return this._edgeCount},ga.prototype.edges=function(){return ha.values(this._edgeObjs)},ga.prototype.setPath=function(t,e){var n=this,r=arguments;return ha.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},ga.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,ha.isUndefined(n)||(n=""+n);var a=ya(this._isDirected,t,e,n);if(ha.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!ha.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var s=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};r&&(s.name=r);return s}(this._isDirected,t,e,n);return t=s.v,e=s.w,Object.freeze(s),this._edgeObjs[a]=s,va(this._preds[e],t),va(this._sucs[t],e),this._in[e][a]=s,this._out[t][a]=s,this._edgeCount++,this},ga.prototype.edge=function(t,e,n){var r=1===arguments.length?xa(this._isDirected,arguments[0]):ya(this._isDirected,t,e,n);return this._edgeLabels[r]},ga.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?xa(this._isDirected,arguments[0]):ya(this._isDirected,t,e,n);return ha.has(this._edgeLabels,r)},ga.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?xa(this._isDirected,arguments[0]):ya(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],_a(this._preds[e],t),_a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},ga.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=ha.values(n);return e?ha.filter(r,function(t){return t.v===e}):r}},ga.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=ha.values(n);return e?ha.filter(r,function(t){return t.w===e}):r}},ga.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var ma={Graph:la,version:"2.1.7"},ba={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:wa(t),edges:Ea(t)};ha.isUndefined(t.graph())||(e.value=ha.clone(t.graph()));return e},read:function(t){var e=new la(t.options).setGraph(t.value);return ha.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),ha.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};function wa(t){return ha.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return ha.isUndefined(n)||(i.value=n),ha.isUndefined(r)||(i.parent=r),i})}function Ea(t){return ha.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return ha.isUndefined(e.name)||(r.name=e.name),ha.isUndefined(n)||(r.value=n),r})}var ka=function(t){var e,n={},r=[];function i(r){ha.has(n,r)||(n[r]=!0,e.push(r),ha.each(t.successors(r),i),ha.each(t.predecessors(r),i))}return ha.each(t.nodes(),function(t){e=[],i(t),e.length&&r.push(e)}),r};var ja=Na;function Na(){this._arr=[],this._keyIndices={}}Na.prototype.size=function(){return this._arr.length},Na.prototype.keys=function(){return this._arr.map(function(t){return t.key})},Na.prototype.has=function(t){return ha.has(this._keyIndices,t)},Na.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},Na.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Na.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!ha.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},Na.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},Na.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},Na.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},Na.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},Na.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var Sa=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},s=new ja,u=function(t){var e=t.v!==i?t.v:t.w,r=a[e],u=n(t),c=o.distance+u;if(u<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+u);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},s.add(t,n)});for(;s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(u);return a}(t,String(e),n||Da,r||function(e){return t.outEdges(e)})},Da=ha.constant(1);var Ma=function(t,e,n){return ha.transform(t.nodes(),function(r,i){r[i]=Sa(t,i,e,n)},{})};var Oa=function(t){var e=0,n=[],r={},i=[];return t.nodes().forEach(function(o){ha.has(r,o)||function o(a){var s=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(t){ha.has(r,t)?r[t].onStack&&(s.lowlink=Math.min(s.lowlink,r[t].index)):(o(t),s.lowlink=Math.min(s.lowlink,r[t].lowlink))}),s.lowlink===s.index){var u,c=[];do{u=n.pop(),r[u].onStack=!1,c.push(u)}while(a!==u);i.push(c)}}(o)}),i};var Ca=function(t){return ha.filter(Oa(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})};var Pa=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],s=r.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)})})}),r}(t,e||Ta,n||function(e){return t.outEdges(e)})},Ta=ha.constant(1);var Ba=Ia;function Ia(t){var e={},n={},r=[];if(ha.each(t.sinks(),function i(o){if(ha.has(n,o))throw new Aa;ha.has(e,o)||(n[o]=!0,e[o]=!0,ha.each(t.predecessors(o),i),delete n[o],r.push(o))}),ha.size(e)!==t.nodeCount())throw new Aa;return r}function Aa(){}Ia.CycleException=Aa,Aa.prototype=new Error;var La=function(t,e,n){ha.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return ha.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,r,i,o,a){ha.has(i,n)||(i[n]=!0,r||a.push(n),ha.each(o(n),function(n){t(e,n,r,i,o,a)}),r&&a.push(n))}(t,e,"post"===n,o,r,i)}),i};var Va,Fa={Graph:ma.Graph,json:ba,alg:{components:ka,dijkstra:Sa,dijkstraAll:Ma,findCycles:Ca,floydWarshall:Pa,isAcyclic:function(t){try{Ba(t)}catch(t){if(t instanceof Ba.CycleException)return!1;throw t}return!0},postorder:function(t,e){return La(t,e,"post")},preorder:function(t,e){return La(t,e,"pre")},prim:function(t,e){var n,r=new la,i={},o=new ja;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var s=e(t);s<a&&(i[r]=n,o.decrease(r,s))}}if(0===t.nodeCount())return r;ha.each(t.nodes(),function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)}),o.decrease(t.nodes()[0],0);var s=!1;for(;o.size()>0;){if(n=o.removeMin(),ha.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:Oa,topsort:Ba},version:ma.version};try{Va=Fa}catch(t){}Va||(Va=window.graphlib);var za=Va,Ga=1,Ra=4;var Ua=function(t){return xr(t,Ga|Ra)};var Wa=function(t,e,n){if(!dt(n))return!1;var r=typeof e;return!!("number"==r?Re(n)&&je(e,n.length):"string"==r&&e in n)&&F(n[e],t)},qa=Object.prototype,Ha=qa.hasOwnProperty,Ya=$o(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Wa(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=$e(o),s=-1,u=a.length;++s<u;){var c=a[s],h=t[c];(void 0===h||F(h,qa[c])&&!Ha.call(t,c))&&(t[c]=o[c])}return t});var $a=function(t){return function(e,n,r){var i=Object(e);if(!Re(e)){var o=to(n,3);e=Ue(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}},Ja=NaN,Xa=/^\s+|\s+$/g,Ka=/^[-+]0x[0-9a-f]+$/i,Za=/^0b[01]+$/i,Qa=/^0o[0-7]+$/i,ts=parseInt;var es=function(t){if("number"==typeof t)return t;if(Ei(t))return Ja;if(dt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=dt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Xa,"");var n=Za.test(t);return n||Qa.test(t)?ts(t.slice(2),n?2:8):Ka.test(t)?Ja:+t},ns=1/0,rs=1.7976931348623157e308;var is=function(t){return t?(t=es(t))===ns||t===-ns?(t<0?-1:1)*rs:t==t?t:0:0===t?t:0};var os=function(t){var e=is(t),n=e%1;return e==e?n?e-n:e:0},as=Math.max;var ss=$a(function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:os(n);return i<0&&(i=as(r+i,0)),Jo(t,to(e,3),i)});var us=function(t){return null!=t&&t.length?Fo(t,1):[]};var cs=function(t,e){return null==t?t:Er(t,Sr(e),$e)};var hs=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var ls=function(t,e){var n={};return e=to(e,3),kr(t,function(t,r,i){ue(n,r,e(t,r,i))}),n};var fs=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Ei(a):n(a,s)))var s=a,u=o}return u};var ds=function(t,e){return t>e};var ps=function(t){return t&&t.length?fs(t,Nr,ds):void 0};var gs=function(t,e,n){(void 0===n||F(t[e],n))&&(void 0!==n||e in t)||ue(t,e,n)},vs="[object Object]",_s=Function.prototype,ys=Object.prototype,xs=_s.toString,ms=ys.hasOwnProperty,bs=xs.call(Object);var ws=function(t){if(!de(t)||ft(t)!=vs)return!1;var e=an(t);if(null===e)return!0;var n=ms.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&xs.call(n)==bs};var Es=function(t,e){if("__proto__"!=e)return t[e]};var ks=function(t){return le(t,$e(t))};var js=function(t,e,n,r,i,o,a){var s=Es(t,n),u=Es(e,n),c=a.get(u);if(c)gs(t,n,c);else{var h=o?o(s,u,n+"",t,e,a):void 0,l=void 0===h;if(l){var f=me(u),d=!f&&we(u),p=!f&&!d&&Te(u);h=u,f||d||p?me(s)?h=s:oa(s)?h=Ke(s):d?(l=!1,h=Xe(u,!0)):p?(l=!1,h=Tn(u,!0)):h=[]:ws(u)||xe(u)?(h=s,xe(s)?h=ks(s):dt(s)&&!xt(s)||(h=nr(u))):l=!1}l&&(a.set(u,h),i(h,u,r,o,a),a.delete(u)),gs(t,n,h)}};var Ns=function t(e,n,r,i,o){e!==n&&Er(n,function(a,s){if(dt(a))o||(o=new oe),js(e,n,s,r,t,i,o);else{var u=i?i(Es(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),gs(e,s,u)}},$e)};var Ss=function(t){return $o(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Wa(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}(function(t,e,n){Ns(t,e,n)});var Ds=function(t,e){return t<e};var Ms=function(t){return t&&t.length?fs(t,Nr,Ds):void 0};var Os=function(t,e){return t&&t.length?fs(t,to(e,2),Ds):void 0},Cs=function(){return tt.Date.now()};var Ps=function(t,e,n,r){if(!dt(t))return t;for(var i=-1,o=(e=zi(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var u=Ri(e[i]),c=n;if(i!=a){var h=s[u];void 0===(c=r?r(h,u,s):void 0)&&(c=dt(h)?h:je(e[i+1])?[]:{})}he(s,u,c),s=s[u]}return t};var Ts=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Ui(t,a);n(s,a)&&Ps(o,zi(a,t),s)}return o};var Bs=function(t,e){return Ts(t,e,function(e,n){return Yi(t,n)})};var Is=function(t){return Yo(Ro(t,void 0,us),t+"")}(function(t,e){return null==t?{}:Bs(t,e)}),As=Math.ceil,Ls=Math.max;var Vs=function(t,e,n,r){for(var i=-1,o=Ls(As((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a};var Fs=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Wa(e,n,r)&&(n=r=void 0),e=is(e),void 0===n?(n=e,e=0):n=is(n),r=void 0===r?e<n?1:-1:is(r),Vs(e,n,r,t)}}();var zs=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var Gs=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Ei(t),a=void 0!==e,s=null===e,u=e==e,c=Ei(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0};var Rs=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Gs(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index};var Us=function(t,e,n){var r=-1;e=Bi(e.length?e:[Nr],Oe(to));var i=ho(t,function(t,n,i){return{criteria:Bi(e,function(e){return e(t)}),index:++r,value:t}});return zs(i,function(t,e){return Rs(t,e,n)})},Ws=$o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Wa(t,e[0],e[1])?e=[]:n>2&&Wa(e[0],e[1],e[2])&&(e=[e[0]]),Us(t,Fo(e,1),[])}),qs=0;var Hs=function(t){var e=++qs;return Fi(t)+e};var Ys=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a};var $s,Js=function(t,e){return Ys(t||[],e||[],he)};try{$s={cloneDeep:Ua,constant:wr,defaults:Ya,each:Mr,filter:eo,find:ss,flatten:us,forEach:Dr,forIn:cs,has:io,isUndefined:co,last:hs,map:lo,mapValues:ls,max:ps,merge:Ss,min:Ms,minBy:Os,now:Cs,pick:Is,range:Fs,reduce:go,sortBy:Ws,uniqueId:Hs,values:ca,zipObject:Js}}catch(t){}$s||($s=window._);var Xs=$s,Ks=Zs;function Zs(){var t={};t._next=t._prev=t,this._sentinel=t}function Qs(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function tu(t,e){if("_next"!==t&&"_prev"!==t)return e}Zs.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return Qs(e),e},Zs.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&Qs(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},Zs.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,tu)),n=n._prev;return"["+t.join(", ")+"]"};var eu=za.Graph,nu=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new eu,r=0,i=0;Xs.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),Xs.forEach(t.edges(),function(t){var o=n.edge(t.v,t.w)||0,a=e(t),s=o+a;n.setEdge(t.v,t.w,s),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var o=Xs.range(i+r+3).map(function(){return new Ks}),a=r+1;return Xs.forEach(n.nodes(),function(t){ou(o,a,n.node(t))}),{graph:n,buckets:o,zeroIdx:a}}(t,e||ru),r=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)iu(t,e,n,r);for(;r=o.dequeue();)iu(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){i=i.concat(iu(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return Xs.flatten(Xs.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)},ru=Xs.constant(1);function iu(t,e,n,r,i){var o=i?[]:void 0;return Xs.forEach(t.inEdges(r.v),function(r){var a=t.edge(r),s=t.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,ou(e,n,s)}),Xs.forEach(t.outEdges(r.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,ou(e,n,a)}),t.removeNode(r.v),o}function ou(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var au={run:function(t){var e="greedy"===t.graph().acyclicer?nu(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};return Xs.forEach(t.nodes(),function i(o){Xs.has(r,o)||(r[o]=!0,n[o]=!0,Xs.forEach(t.outEdges(o),function(t){Xs.has(n,t.w)?e.push(t):i(t.w)}),delete n[o])}),e}(t);Xs.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,Xs.uniqueId("rev"))})},undo:function(t){Xs.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}};var su=za.Graph,uu={addDummyNode:cu,simplify:function(t){var e=(new su).setGraph(t.graph());return Xs.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),Xs.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new su({multigraph:t.isMultigraph()}).setGraph(t.graph());return Xs.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),Xs.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=Xs.map(t.nodes(),function(e){var n={};return Xs.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return Xs.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=Xs.map(t.nodes(),function(e){var n={};return Xs.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return Xs.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,c=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(u=-u),n=u,r=u*s/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=Xs.map(Xs.range(hu(t)+1),function(){return[]});return Xs.forEach(t.nodes(),function(n){var r=t.node(n),i=r.rank;Xs.isUndefined(i)||(e[i][r.order]=n)}),e},normalizeRanks:function(t){var e=Xs.min(Xs.map(t.nodes(),function(e){return t.node(e).rank}));Xs.forEach(t.nodes(),function(n){var r=t.node(n);Xs.has(r,"rank")&&(r.rank-=e)})},removeEmptyRanks:function(t){var e=Xs.min(Xs.map(t.nodes(),function(e){return t.node(e).rank})),n=[];Xs.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;Xs.forEach(n,function(e,n){Xs.isUndefined(e)&&n%i!=0?--r:r&&Xs.forEach(e,function(e){t.node(e).rank+=r})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return cu(t,"border",i,e)},maxRank:hu,partition:function(t,e){var n={lhs:[],rhs:[]};return Xs.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=Xs.now();try{return e()}finally{console.log(t+" time: "+(Xs.now()-n)+"ms")}},notime:function(t,e){return e()}};function cu(t,e,n,r){var i;do{i=Xs.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function hu(t){return Xs.max(Xs.map(t.nodes(),function(e){var n=t.node(e).rank;if(!Xs.isUndefined(n))return n}))}var lu={run:function(t){t.graph().dummyChains=[],Xs.forEach(t.edges(),function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,s=e.w,u=t.node(s).rank,c=e.name,h=t.edge(e),l=h.labelRank;if(u===a+1)return;for(t.removeEdge(e),i=0,++a;a<u;++i,++a)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=uu.addDummyNode(t,"edge",r,"_d"),a===l&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(o,n,{weight:h.weight},c),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,s,{weight:h.weight},c)}(t,e)})},undo:function(t){Xs.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}};var fu=function(t){var e={};Xs.forEach(t.sources(),function n(r){var i=t.node(r);if(Xs.has(e,r))return i.rank;e[r]=!0;var o=Xs.min(Xs.map(t.outEdges(r),function(e){return n(e.w)-t.edge(e).minlen}));o!==Number.POSITIVE_INFINITY&&null!=o||(o=0);return i.rank=o})},du=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};var pu=za.Graph,gu=du,vu=function(t){var e,n,r=new pu({directed:!1}),i=t.nodes()[0],o=t.nodeCount();r.setNode(i,{});for(;_u(r,t)<o;)e=yu(r,t),n=r.hasNode(e.v)?gu(t,e):-gu(t,e),xu(r,t,n);return r};function _u(t,e){return Xs.forEach(t.nodes(),function n(r){Xs.forEach(e.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||gu(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}),t.nodeCount()}function yu(t,e){return Xs.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return gu(e,n)})}function xu(t,e,n){Xs.forEach(t.nodes(),function(t){e.node(t).rank+=n})}var mu=du,bu=fu,wu=za.alg.preorder,Eu=za.alg.postorder,ku=uu.simplify,ju=Nu;function Nu(t){t=ku(t),bu(t);var e,n=vu(t);for(Mu(n),Su(n,t);e=Ou(n);)Pu(n,t,e,Cu(n,t,e))}function Su(t,e){var n=Eu(t,t.nodes());n=n.slice(0,n.length-1),Xs.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Du(t,e,n)}(t,e,n)})}function Du(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,Xs.forEach(e.nodeEdges(n),function(o){var s,u,c=o.v===n,h=c?o.w:o.v;if(h!==r){var l=c===i,f=e.edge(o).weight;if(a+=l?f:-f,s=n,u=h,t.hasEdge(s,u)){var d=t.edge(n,h).cutvalue;a+=l?-d:d}}}),a}function Mu(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,r,i,o){var a=r,s=e.node(i);n[i]=!0;Xs.forEach(e.neighbors(i),function(o){Xs.has(n,o)||(r=t(e,n,r,o,i))});s.low=a;s.lim=r++;o?s.parent=o:delete s.parent;return r}(t,{},1,e)}function Ou(t){return Xs.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function Cu(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),s=o,u=!1;o.lim>a.lim&&(s=a,u=!0);var c=Xs.filter(e.edges(),function(e){return u===Tu(t,t.node(e.v),s)&&u!==Tu(t,t.node(e.w),s)});return Xs.minBy(c,function(t){return mu(e,t)})}function Pu(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Mu(t),Su(t,e),function(t,e){var n=Xs.find(t.nodes(),function(t){return!e.node(t).parent}),r=wu(t,n);r=r.slice(1),Xs.forEach(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function Tu(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}Nu.initLowLimValues=Mu,Nu.initCutValues=Su,Nu.calcCutValue=Du,Nu.leaveEdge=Ou,Nu.enterEdge=Cu,Nu.exchangeEdges=Pu;var Bu=fu,Iu=function(t){switch(t.graph().ranker){case"network-simplex":Lu(t);break;case"tight-tree":!function(t){Bu(t),vu(t)}(t);break;case"longest-path":Au(t);break;default:Lu(t)}};var Au=Bu;function Lu(t){ju(t)}var Vu=function(t){var e=function(t){var e={},n=0;return Xs.forEach(t.children(),function r(i){var o=n;Xs.forEach(t.children(i),r),e[i]={low:o,lim:n++}}),e}(t);Xs.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],s=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,u=0,c=a[u],h=!0;n!==i.w;){if(r=t.node(n),h){for(;(c=a[u])!==s&&t.node(c).maxRank<r.rank;)u++;c===s&&(h=!1)}if(!h){for(;u<a.length-1&&t.node(c=a[u+1]).minRank<=r.rank;)u++;c=a[u]}t.setParent(n,c),n=t.successors(n)[0]}})};var Fu={run:function(t){var e=uu.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return Xs.forEach(t.children(),function(n){!function n(r,i){var o=t.children(r);o&&o.length&&Xs.forEach(o,function(t){n(t,i+1)}),e[r]=i}(n,1)}),e}(t),r=Xs.max(Xs.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,Xs.forEach(t.edges(),function(e){t.edge(e).minlen*=i});var o=function(t){return Xs.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;Xs.forEach(t.children(),function(a){!function t(e,n,r,i,o,a,s){var u=e.children(s);if(!u.length)return void(s!==n&&e.setEdge(n,s,{weight:0,minlen:r}));var c=uu.addBorderNode(e,"_bt"),h=uu.addBorderNode(e,"_bb"),l=e.node(s);e.setParent(c,s);l.borderTop=c;e.setParent(h,s);l.borderBottom=h;Xs.forEach(u,function(u){t(e,n,r,i,o,a,u);var l=e.node(u),f=l.borderTop?l.borderTop:u,d=l.borderBottom?l.borderBottom:u,p=l.borderTop?i:2*i,g=f!==d?1:o-a[s]+1;e.setEdge(c,f,{weight:p,minlen:g,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:g,nestingEdge:!0})});e.parent(s)||e.setEdge(n,c,{weight:0,minlen:o+a[s]})}(t,e,i,o,r,n,a)}),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,Xs.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}};var zu=function(t){Xs.forEach(t.children(),function e(n){var r=t.children(n),i=t.node(n);r.length&&Xs.forEach(r,e);if(Xs.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Gu(t,"borderLeft","_bl",n,i,o),Gu(t,"borderRight","_br",n,i,o)}})};function Gu(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},s=i[e][o-1],u=uu.addDummyNode(t,"border",a,n);i[e][o]=u,t.setParent(u,r),s&&t.setEdge(s,u,{weight:1})}var Ru={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||Uu(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){Xs.forEach(t.nodes(),function(e){qu(t.node(e))}),Xs.forEach(t.edges(),function(e){var n=t.edge(e);Xs.forEach(n.points,qu),Xs.has(n,"y")&&qu(n)})}(t);"lr"!==e&&"rl"!==e||(!function(t){Xs.forEach(t.nodes(),function(e){Hu(t.node(e))}),Xs.forEach(t.edges(),function(e){var n=t.edge(e);Xs.forEach(n.points,Hu),Xs.has(n,"x")&&Hu(n)})}(t),Uu(t))}};function Uu(t){Xs.forEach(t.nodes(),function(e){Wu(t.node(e))}),Xs.forEach(t.edges(),function(e){Wu(t.edge(e))})}function Wu(t){var e=t.width;t.width=t.height,t.height=e}function qu(t){t.y=-t.y}function Hu(t){var e=t.x;t.x=t.y,t.y=e}var Yu=function(t){var e={},n=Xs.filter(t.nodes(),function(e){return!t.children(e).length}),r=Xs.max(Xs.map(n,function(e){return t.node(e).rank})),i=Xs.map(Xs.range(r+1),function(){return[]});var o=Xs.sortBy(n,function(e){return t.node(e).rank});return Xs.forEach(o,function n(r){if(!Xs.has(e,r)){e[r]=!0;var o=t.node(r);i[o.rank].push(r),Xs.forEach(t.successors(r),n)}}),i};var $u=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=Ju(t,e[r-1],e[r]);return n};function Ju(t,e,n){for(var r=Xs.zipObject(n,Xs.map(n,function(t,e){return e})),i=Xs.flatten(Xs.map(e,function(e){return Xs.sortBy(Xs.map(t.outEdges(e),function(e){return{pos:r[e.w],weight:t.edge(e).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=Xs.map(new Array(a),function(){return 0}),u=0;return Xs.forEach(i.forEach(function(t){var e=t.pos+o;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;u+=t.weight*n})),u}var Xu=function(t,e){return Xs.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=Xs.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})};var Ku=function(t,e){var n={};return Xs.forEach(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};Xs.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),Xs.forEach(e.edges(),function(t){var e=n[t.v],r=n[t.w];Xs.isUndefined(e)||Xs.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,r,i,o;e.merged||(Xs.isUndefined(e.barycenter)||Xs.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(r=e,i=0,o=0,(n=t).weight&&(i+=n.barycenter*n.weight,o+=n.weight),r.weight&&(i+=r.barycenter*r.weight,o+=r.weight),n.vs=r.vs.concat(n.vs),n.barycenter=i/o,n.weight=o,n.i=Math.min(r.i,n.i),r.merged=!0)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),Xs.forEach(i.in.reverse(),n(i)),Xs.forEach(i.out,r(i))}return Xs.map(Xs.filter(e,function(t){return!t.merged}),function(t){return Xs.pick(t,["vs","i","barycenter","weight"])})}(Xs.filter(n,function(t){return!t.indegree}))};var Zu=function(t,e){var n=uu.partition(t,function(t){return Xs.has(t,"barycenter")}),r=n.lhs,i=Xs.sortBy(n.rhs,function(t){return-t.i}),o=[],a=0,s=0,u=0;r.sort((c=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:c?e.i-t.i:t.i-e.i})),u=Qu(o,i,u),Xs.forEach(r,function(t){u+=t.vs.length,o.push(t.vs),a+=t.barycenter*t.weight,s+=t.weight,u=Qu(o,i,u)});var c;var h={vs:Xs.flatten(o,!0)};s&&(h.barycenter=a/s,h.weight=s);return h};function Qu(t,e,n){for(var r;e.length&&(r=Xs.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var tc=function t(e,n,r,i){var o=e.children(n),a=e.node(n),s=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,c={};s&&(o=Xs.filter(o,function(t){return t!==s&&t!==u}));var h=Xu(e,o);Xs.forEach(h,function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);c[n.v]=o,Xs.has(o,"barycenter")&&(a=n,s=o,Xs.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s});var l=Ku(h,r);!function(t,e){Xs.forEach(t,function(t){t.vs=Xs.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(l,c);var f=Zu(l,i);if(s&&(f.vs=Xs.flatten([s,f.vs,u],!0),e.predecessors(s).length)){var d=e.node(e.predecessors(s)[0]),p=e.node(e.predecessors(u)[0]);Xs.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+p.order)/(f.weight+2),f.weight+=2}return f};var ec=za.Graph,nc=function(t,e,n){var r=function(t){var e;for(;t.hasNode(e=Xs.uniqueId("_root")););return e}(t),i=new ec({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return Xs.forEach(t.nodes(),function(o){var a=t.node(o),s=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),Xs.forEach(t[n](o),function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=Xs.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})}),Xs.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i};var rc=function(t,e,n){var r,i={};Xs.forEach(n,function(n){for(var o,a,s=t.parent(n);s;){if((o=t.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void e.setEdge(a,s);s=o}})};var ic=za.Graph,oc=function(t){var e=uu.maxRank(t),n=ac(t,Xs.range(1,e+1),"inEdges"),r=ac(t,Xs.range(e-1,-1,-1),"outEdges"),i=Yu(t);uc(t,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,u=0;u<4;++s,++u){sc(s%2?n:r,s%4>=2),i=uu.buildLayerMatrix(t);var c=$u(t,i);c<a&&(u=0,o=Xs.cloneDeep(i),a=c)}uc(t,o)};function ac(t,e,n){return Xs.map(e,function(e){return nc(t,e,n)})}function sc(t,e){var n=new ic;Xs.forEach(t,function(t){var r=t.graph().root,i=tc(t,r,n,e);Xs.forEach(i.vs,function(e,n){t.node(e).order=n}),rc(t,n,i.vs)})}function uc(t,e){Xs.forEach(e,function(e){Xs.forEach(e,function(e,n){t.node(e).order=n})})}var cc=za.Graph,hc=function(t){var e,n=uu.buildLayerMatrix(t),r=Xs.merge(lc(t,n),fc(t,n)),i={};Xs.forEach(["u","d"],function(o){e="u"===o?n:Xs.values(n).reverse(),Xs.forEach(["l","r"],function(n){"r"===n&&(e=Xs.map(e,function(t){return Xs.values(t).reverse()}));var a=("u"===o?t.predecessors:t.successors).bind(t),s=gc(t,e,r,a),u=vc(t,e,s.root,s.align,"r"===n);"r"===n&&(u=Xs.mapValues(u,function(t){return-t})),i[o+n]=u})});var o=_c(t,i);return yc(i,o),xc(i,t.graph().align)};function lc(t,e){var n={};return Xs.reduce(e,function(e,r){var i=0,o=0,a=e.length,s=Xs.last(r);return Xs.forEach(r,function(e,u){var c=function(t,e){if(t.node(e).dummy)return Xs.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),h=c?t.node(c).order:a;(c||e===s)&&(Xs.forEach(r.slice(o,u+1),function(e){Xs.forEach(t.predecessors(e),function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||dc(n,r,e)})}),o=u+1,i=h)}),r}),n}function fc(t,e){var n={};function r(e,r,i,o,a){var s;Xs.forEach(Xs.range(r,i),function(r){s=e[r],t.node(s).dummy&&Xs.forEach(t.predecessors(s),function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&dc(n,e,s)})})}return Xs.reduce(e,function(e,n){var i,o=-1,a=0;return Xs.forEach(n,function(s,u){if("border"===t.node(s).dummy){var c=t.predecessors(s);c.length&&(i=t.node(c[0]).order,r(n,a,u,o,i),a=u,o=i)}r(n,a,n.length,i,e.length)}),n}),n}function dc(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function pc(t,e,n){if(e>n){var r=e;e=n,n=r}return Xs.has(t[e],n)}function gc(t,e,n,r){var i={},o={},a={};return Xs.forEach(e,function(t){Xs.forEach(t,function(t,e){i[t]=t,o[t]=t,a[t]=e})}),Xs.forEach(e,function(t){var e=-1;Xs.forEach(t,function(t){var s=r(t);if(s.length)for(var u=((s=Xs.sortBy(s,function(t){return a[t]})).length-1)/2,c=Math.floor(u),h=Math.ceil(u);c<=h;++c){var l=s[c];o[t]===t&&e<a[l]&&!pc(n,t,l)&&(o[l]=t,o[t]=i[t]=i[l],e=a[l])}})}),{root:i,align:o}}function vc(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new cc,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,s=r.node(i),u=r.node(o),c=0;if(c+=s.width/2,Xs.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(c+=n?a:-a),a=0,c+=(s.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,Xs.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=u.width/2;break;case"r":a=-u.width/2}return a&&(c+=n?a:-a),a=0,c}}(o.nodesep,o.edgesep,r);return Xs.forEach(e,function(e){var r;Xs.forEach(e,function(e){var o=n[e];if(i.setNode(o),r){var s=n[r],u=i.edge(s,o);i.setEdge(s,o,Math.max(a(t,e,r),u||0))}r=e})}),i}(t,e,n,i),s=i?"borderLeft":"borderRight";function u(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return u(function(t){o[t]=a.inEdges(t).reduce(function(t,e){return Math.max(t,o[e.v]+a.edge(e))},0)},a.predecessors.bind(a)),u(function(e){var n=a.outEdges(e).reduce(function(t,e){return Math.min(t,o[e.w]-a.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==s&&(o[e]=Math.max(o[e],n))},a.successors.bind(a)),Xs.forEach(r,function(t){o[t]=o[n[t]]}),o}function _c(t,e){return Xs.minBy(Xs.values(e),function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return Xs.forIn(e,function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)}),n-r})}function yc(t,e){var n=Xs.values(e),r=Xs.min(n),i=Xs.max(n);Xs.forEach(["u","d"],function(n){Xs.forEach(["l","r"],function(o){var a,s=n+o,u=t[s];if(u!==e){var c=Xs.values(u);(a="l"===o?r-Xs.min(c):i-Xs.max(c))&&(t[s]=Xs.mapValues(u,function(t){return t+a}))}})})}function xc(t,e){return Xs.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=Xs.sortBy(Xs.map(t,r));return(i[1]+i[2])/2})}var mc=hc,bc=function(t){(function(t){var e=uu.buildLayerMatrix(t),n=t.graph().ranksep,r=0;Xs.forEach(e,function(e){var i=Xs.max(Xs.map(e,function(e){return t.node(e).height}));Xs.forEach(e,function(e){t.node(e).y=r+i/2}),r+=i+n})})(t=uu.asNonCompoundGraph(t)),Xs.forEach(mc(t),function(e,n){t.node(n).x=e})};var wc=uu.normalizeRanks,Ec=uu.removeEmptyRanks,kc=uu,jc=za.Graph,Nc=function(t,e){var n=e&&e.debugTiming?kc.time:kc.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new jc({multigraph:!0,compound:!0}),n=Ac(t.graph());return e.setGraph(Xs.merge({},Dc,Ic(n,Sc),Xs.pick(n,Mc))),Xs.forEach(t.nodes(),function(n){var r=Ac(t.node(n));e.setNode(n,Xs.defaults(Ic(r,Oc),Cc)),e.setParent(n,t.parent(n))}),Xs.forEach(t.edges(),function(n){var r=Ac(t.edge(n));e.setEdge(n,Xs.merge({},Tc,Ic(r,Pc),Xs.pick(r,Bc)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,Xs.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){Xs.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){au.run(t)}),e("    nestingGraph.run",function(){Fu.run(t)}),e("    rank",function(){Iu(kc.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){Xs.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};kc.addDummyNode(t,"edge-proxy",o,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){Ec(t)}),e("    nestingGraph.cleanup",function(){Fu.cleanup(t)}),e("    normalizeRanks",function(){wc(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;Xs.forEach(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Xs.max(e,r.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){Xs.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){lu.run(t)}),e("    parentDummyChains",function(){Vu(t)}),e("    addBorderSegments",function(){zu(t)}),e("    order",function(){oc(t)}),e("    insertSelfEdges",function(){!function(t){var e=kc.buildLayerMatrix(t);Xs.forEach(e,function(e){var n=0;Xs.forEach(e,function(e,r){var i=t.node(e);i.order=r+n,Xs.forEach(i.selfEdges,function(e){kc.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){Ru.adjust(t)}),e("    position",function(){bc(t)}),e("    positionSelfEdges",function(){!function(t){Xs.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){Xs.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(Xs.last(n.borderLeft)),a=t.node(Xs.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),Xs.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){lu.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){Xs.forEach(t.edges(),function(e){var n=t.edge(e);if(Xs.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){Ru.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,s=o.marginy||0;function u(t){var o=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-u/2),i=Math.max(i,a+u/2)}Xs.forEach(t.nodes(),function(e){u(t.node(e))}),Xs.forEach(t.edges(),function(e){var n=t.edge(e);Xs.has(n,"x")&&u(n)}),e-=a,r-=s,Xs.forEach(t.nodes(),function(n){var i=t.node(n);i.x-=e,i.y-=r}),Xs.forEach(t.edges(),function(n){var i=t.edge(n);Xs.forEach(i.points,function(t){t.x-=e,t.y-=r}),Xs.has(i,"x")&&(i.x-=e),Xs.has(i,"y")&&(i.y-=r)}),o.width=n-e+a,o.height=i-r+s}(t)}),e("    assignNodeIntersects",function(){!function(t){Xs.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(kc.intersectRect(o,n)),i.points.push(kc.intersectRect(a,r))})}(t)}),e("    reversePoints",function(){!function(t){Xs.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){au.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){Xs.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),Xs.forEach(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,Xs.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var Sc=["nodesep","edgesep","ranksep","marginx","marginy"],Dc={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Mc=["acyclicer","ranker","rankdir","align"],Oc=["width","height"],Cc={width:0,height:0},Pc=["minlen","weight","width","height","labeloffset"],Tc={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bc=["labelpos"];function Ic(t,e){return Xs.mapValues(Xs.pick(t,e),Number)}function Ac(t){var e={};return Xs.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}var Lc=za.Graph;var Vc={graphlib:za,layout:Nc,debug:{debugOrdering:function(t){var e=uu.buildLayerMatrix(t),n=new Lc({compound:!0,multigraph:!0}).setGraph({});return Xs.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),Xs.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),Xs.forEach(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),Xs.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}},util:{time:uu.time,notime:uu.notime},version:"0.8.4"},Fc=Vc.graphlib,zc=Vc.layout,Gc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Fc.Graph),Rc=function(){function t(){this._g=new Gc({multigraph:!0,compound:!0}),this._g.setGraph({}),this._g.setDefaultNodeLabel(function(){return{debug:"error"}}),this._g.setDefaultEdgeLabel(function(){return{debug:"error"}})}return t.prototype.parent=function(t){return this._g.parent(t)},t.prototype.filterNodes=function(t){var e=[];return this.eachNode(function(n){t(n)&&e.push(n)}),e},t.prototype.eachNode=function(t){this._g.nodes().forEach(function(e){t(e,this.node(e))},this)},t.prototype.filterEdges=function(t){var e=[];return this.eachEdge(function(n){t(n)&&e.push(n)}),e},t.prototype.eachEdge=function(t){this._g.edges().forEach(function(e){t(e,e.v,e.w,this.edge(e))},this)},t.prototype.setData=function(t,e,n,r,i){for(var o=this,a={addedVertices:[],addedEdges:[]},s=t.concat(e),u=0;u<s.length;++u){var c=s[u];i&&this._g.hasNode(c._id)||(this._g.setNode(c._id,c),a.addedVertices.push(c))}for(u=0;u<n.length;++u){var h=n[u];i&&this._g.hasEdge(h._id)||(h._sourceVertex&&h._targetVertex?(this._g.setEdge(h._sourceVertex._id,h._targetVertex._id,h,h._id),a.addedEdges.push(h)):console.log("Bad edge definition"))}if(r)for(u=0;u<r.length;++u)this._g.setParent(r[u].child._id,r[u].parent._id);if(i){var l=n.map(function(t){return t._id});this.filterEdges(function(t){return l.indexOf(t.name)<0}).forEach(function(t){return o._g.removeEdge(t.v,t.w,t.name)});var f=s.map(function(t){return t._id});this.filterNodes(function(t){return f.indexOf(t)<0}).forEach(function(t){return o._g.removeNode(t)})}return a},t.prototype.node=function(t){return this._g.node(t)},t.prototype.nodeCount=function(){return this._g.nodeCount()},t.prototype.nodes=function(){var t=this;return this._g.nodes().map(function(e){return t._g.node(e)})},t.prototype.nodeEdges=function(t){return this._g.nodeEdges(t)},t.prototype.edge=function(t){return this._g.edge(t)},t.prototype.edges=function(){var t=this;return this._g.edges().map(function(e){return t._g.edge(e)})},t.prototype.neighbors=function(t){var e=this;return this._g.neighbors(t).map(function(t){return e._g.node(t)})},t.prototype.singleNeighbors=function(t){var e=this;return this._g.neighbors(t).filter(function(t){return 1===e._g.neighbors(t).length}).map(function(t){return e._g.node(t)})},t.prototype.gatherShortestPath=function(t,e){for(var n=[],r=e,i=t[r];i;){if(i.distance<1/0&&i.predecessor){var o=this._g.nodeEdges(r,i.predecessor)[0];n.push(this._g.edge(o))}i=t[r=i.predecessor]}return n},t.prototype.shortestPath=function(t,e){return this.gatherShortestPath(Fc.alg.dijkstra(this._g,t),e)},t.prototype.undirectedShortestPath=function(t,e){var n=this;return this.gatherShortestPath(Fc.alg.dijkstra(this._g,t,null,function(t){return n._g.nodeEdges(t)}),e)},t.prototype.getJSON=function(){var t=Fc.json.write(this._g);return JSON.stringify(t,function(t,e){return"value"===t?e._text&&e._text._text?e._text._text:e._id:e},"  ")},t}();function Uc(t){return function(){return t}}function Wc(){return 1e-6*(Math.random()-.5)}function qc(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,h,l,f,d=t._root,p={data:r},g=t._x0,v=t._y0,_=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(g+_)/2))?g=o:_=o,(h=n>=(a=(v+y)/2))?v=a:y=a,i=d,!(d=d[l=h<<1|c]))return i[l]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+_)/2))?g=o:_=o,(h=n>=(a=(v+y)/2))?v=a:y=a}while((l=h<<1|c)==(f=(u>=a)<<1|s>=o));return i[f]=d,i[l]=p,t}function Hc(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Yc(t){return t[0]}function $c(t){return t[1]}function Jc(t,e,n){var r=new Xc(null==e?Yc:e,null==n?$c:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Xc(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Kc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Zc=Jc.prototype=Xc.prototype;function Qc(t){return t.index}function th(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}Zc.copy=function(){var t,e,n=new Xc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Kc(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Kc(e));return n},Zc.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return qc(this.cover(e,n),e,n,t)},Zc.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,h=-1/0,l=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>h&&(h=r),i<c&&(c=i),i>l&&(l=i));for(h<u&&(u=this._x0,h=this._x1),l<c&&(c=this._y0,l=this._y1),this.cover(u,c).cover(h,l),n=0;n<o;++n)qc(this,a[n],s[n],t[n]);return this},Zc.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{(a=new Array(4))[s]=c,c=a}while(o=r+(u*=2),t>(i=n+u)||e>o);break;case 1:do{(a=new Array(4))[s]=c,c=a}while(o=r+(u*=2),(n=i-u)>t||e>o);break;case 2:do{(a=new Array(4))[s]=c,c=a}while(r=o-(u*=2),t>(i=n+u)||r>e);break;case 3:do{(a=new Array(4))[s]=c,c=a}while(r=o-(u*=2),(n=i-u)>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Zc.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},Zc.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Zc.find=function(t,e,n){var r,i,o,a,s,u,c,h=this._x0,l=this._y0,f=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Hc(g,h,l,f,d)),null==n?n=1/0:(h=t-n,l=e-n,f=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>f||(o=u.y0)>d||(a=u.x1)<h||(s=u.y1)<l))if(g.length){var v=(i+a)/2,_=(o+s)/2;p.push(new Hc(g[3],v,_,a,s),new Hc(g[2],i,_,v,s),new Hc(g[1],v,o,a,_),new Hc(g[0],i,o,v,_)),(c=(e>=_)<<1|t>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var y=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),m=y*y+x*x;if(m<n){var b=Math.sqrt(n=m);h=t-b,l=e-b,f=t+b,d=e+b,r=g.data}}return r},Zc.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,h,l,f,d=this._root,p=this._x0,g=this._y0,v=this._x1,_=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(h=a>=(u=(g+_)/2))?g=u:_=u,e=d,!(d=d[l=h<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,f=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},Zc.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Zc.root=function(){return this._root},Zc.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},Zc.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Hc(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,h=(i+a)/2;(n=u[3])&&s.push(new Hc(n,c,h,o,a)),(n=u[2])&&s.push(new Hc(n,r,h,c,a)),(n=u[1])&&s.push(new Hc(n,c,i,o,h)),(n=u[0])&&s.push(new Hc(n,r,i,c,h))}return this},Zc.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Hc(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,h=(a+u)/2,l=(s+c)/2;(o=i[0])&&n.push(new Hc(o,a,s,h,l)),(o=i[1])&&n.push(new Hc(o,h,s,u,l)),(o=i[2])&&n.push(new Hc(o,a,l,h,c)),(o=i[3])&&n.push(new Hc(o,h,l,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Zc.x=function(t){return arguments.length?(this._x=t,this):this._x},Zc.y=function(t){return arguments.length?(this._y=t,this):this._y};var eh,nh,rh=0,ih=0,oh=0,ah=1e3,sh=0,uh=0,ch=0,hh="object"==typeof performance&&performance.now?performance:Date,lh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fh(){return uh||(lh(dh),uh=hh.now()+ch)}function dh(){uh=0}function ph(){this._call=this._time=this._next=null}function gh(t,e,n){var r=new ph;return r.restart(t,e,n),r}function vh(){uh=(sh=hh.now())+ch,rh=ih=0;try{!function(){fh(),++rh;for(var t,e=eh;e;)(t=uh-e._time)>=0&&e._call.call(null,t),e=e._next;--rh}()}finally{rh=0,function(){var t,e,n=eh,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:eh=e);nh=t,yh(r)}(),uh=0}}function _h(){var t=hh.now(),e=t-sh;e>ah&&(ch-=e,sh=t)}function yh(t){if(!rh){ih&&(ih=clearTimeout(ih));var e=t-uh;e>24?(t<1/0&&(ih=setTimeout(vh,e)),oh&&(oh=clearInterval(oh))):(oh||(sh=uh,oh=setInterval(_h,ah)),rh=1,lh(vh))}}function xh(t){return t.x}function mh(t){return t.y}ph.prototype=gh.prototype={constructor:ph,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fh():+n)+(null==e?0:+e),this._next||nh===this||(nh?nh._next=this:eh=this,nh=this),this._call=t,this._time=n,yh()},stop:function(){this._call&&(this._call=null,this._time=1/0,yh())}};var bh=10,wh=Math.PI*(3-Math.sqrt(5));function Eh(t,e,n,r){var i=this;this.pos={};r=r||(e<n?e-0:n-0)/2;var o=t.nodeCount(),a=-Math.PI/2,s=2*Math.PI/o;t.eachNode(function(t,o){var u=o.getBBox();i.pos[t]={x:o.fixed?o.x:e/2+Math.cos(a)*(r-0),y:o.fixed?o.y:n/2+Math.sin(a)*(r-0),width:u.width,height:u.height},a+=s})}function kh(t,n,r,i){i=i||{};var o=this;this.pos={},this.vertices=[],this.vertexMap={},t.eachNode(function(e){var n=t.node(e),r=n.getBBox(),i={id:e,x:n.pos().x,y:n.pos().y,width:r.width,height:r.height,value:n};o.vertices.push(i),o.vertexMap[e]=i}),this.edges=[],t.eachEdge(function(t,e,n){o.edges.push({source:e,target:n})});var a=function(t){var n,r,i,o,a,s=Qc,u=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=Uc(30),h=1;function l(e){for(var i=0,o=t.length;i<h;++i)for(var s,u,c,l,f,d,p,g=0;g<o;++g)u=(s=t[g]).source,l=(c=s.target).x+c.vx-u.x-u.vx||Wc(),f=c.y+c.vy-u.y-u.vy||Wc(),l*=d=((d=Math.sqrt(l*l+f*f))-r[g])/d*e*n[g],f*=d,c.vx-=l*(p=a[g]),c.vy-=f*p,u.vx+=l*(p=1-p),u.vy+=f*p}function f(){if(i){var u,c,h=i.length,l=t.length,f=e.map(i,s);for(u=0,o=new Array(h);u<l;++u)(c=t[u]).index=u,"object"!=typeof c.source&&(c.source=th(f,c.source)),"object"!=typeof c.target&&(c.target=th(f,c.target)),o[c.source.index]=(o[c.source.index]||0)+1,o[c.target.index]=(o[c.target.index]||0)+1;for(u=0,a=new Array(l);u<l;++u)c=t[u],a[u]=o[c.source.index]/(o[c.source.index]+o[c.target.index]);n=new Array(l),d(),r=new Array(l),p()}}function d(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}function p(){if(i)for(var e=0,n=t.length;e<n;++e)r[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){i=t,f()},l.links=function(e){return arguments.length?(t=e,f(),l):t},l.id=function(t){return arguments.length?(s=t,l):s},l.iterations=function(t){return arguments.length?(h=+t,l):h},l.strength=function(t){return arguments.length?(u="function"==typeof t?t:Uc(+t),d(),l):u},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:Uc(+t),p(),l):c},l}().id(function(t){return t.id}).distance(i.linkDistance).strength(i.linkStrength),s=function(){var t,e,n,r,i=Uc(-30),o=1,a=1/0,s=.81;function u(r){var i,o=t.length,a=Jc(t,xh,mh).visitAfter(h);for(n=r,i=0;i<o;++i)e=t[i],a.visit(l)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function h(t){var e,n,i,o,a,s=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(s+=n,i+=n*e.x,o+=n*e.y);t.x=i/s,t.y=o/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=r[e.data.index]}while(e=e.next)}t.value=s}function l(t,i,u,c){if(!t.value)return!0;var h=t.x-e.x,l=t.y-e.y,f=c-i,d=h*h+l*l;if(f*f/s<d)return d<a&&(0===h&&(d+=(h=Wc())*h),0===l&&(d+=(l=Wc())*l),d<o&&(d=Math.sqrt(o*d)),e.vx+=h*t.value*n/d,e.vy+=l*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===h&&(d+=(h=Wc())*h),0===l&&(d+=(l=Wc())*l),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(f=r[t.data.index]*n/d,e.vx+=h*f,e.vy+=l*f)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:Uc(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u}().strength(function(t){var e=t.value.getBBox();return i.charge*Math.max(e.width,e.height)});if(this.force=function(t){var n,r=1,i=.001,o=1-Math.pow(i,1/300),a=0,s=.6,u=e.map(),c=gh(l),h=e.dispatch("tick","end");function l(){f(),h.call("tick",n),r<i&&(c.stop(),h.call("end",n))}function f(){var e,n,i=t.length;for(r+=(a-r)*o,u.each(function(t){t(r)}),e=0;e<i;++e)null==(n=t[e]).fx?n.x+=n.vx*=s:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=s:(n.y=n.fy,n.vy=0)}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var i=bh*Math.sqrt(n),o=n*wh;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),n={tick:f,restart:function(){return c.restart(l),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,d(),u.each(p),n):t},alpha:function(t){return arguments.length?(r=+t,n):r},alphaMin:function(t){return arguments.length?(i=+t,n):i},alphaDecay:function(t){return arguments.length?(o=+t,n):+o},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(s=1-t,n):1-s},force:function(t,e){return arguments.length>1?(null==e?u.remove(t):u.set(t,p(e)),n):u.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,h=t.length;for(null==r?r=1/0:r*=r,c=0;c<h;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(h.on(t,e),n):h.on(t)}}}().force("link",a).force("charge",s).force("center",function(t,e){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-t,s=s/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r}(n/2,r/2)).velocityDecay(i.oneShot?.1:i.friction).nodes(this.vertices),a.links(this.edges),i.oneShot){this.force.restart();var u=t.nodeCount();u=Math.min(u*u,500);for(var c=0;c<u;++c)this.force.tick();this.force.stop()}}function jh(t,e,n,r){var i=new Fc.Graph({multigraph:!0,compound:!0}).setGraph(r).setDefaultNodeLabel(function(){return{}}).setDefaultEdgeLabel(function(){return{}});t.eachNode(function(e){var n=t.node(e).getBBox();i.setNode(e,{width:n.width,height:n.height})}),t.eachEdge(function(e,n,o){var a=t.edge(e);i.setEdge(n,o,{weight:a.weight()},a._id),r.digraph||i.setEdge(o,n,{weight:a.weight()},a._id)}),t.eachNode(function(e){i.setParent(e,t.parent(e))}),this.dagreLayout=zc(i,{debugTiming:!1});var o=-i.graph().width/2,a=-i.graph().height/2;i.nodes().forEach(function(t){var r=i.node(t);r.x+=o+e/2,r.y+=a+n/2}),i.edges().forEach(function(t){for(var r=i.edge(t),s=0;s<r.points.length;++s)r.points[s].x+=o+e/2,r.points[s].y+=a+n/2}),this.digraph=i}Eh.prototype.nodePos=function(t){return this.pos[t]},Eh.prototype.edgePoints=function(t){return[]},kh.prototype.nodePos=function(t){return this.vertexMap[t]},kh.prototype.edgePoints=function(t){return[]},jh.prototype.nodePos=function(t){return this.digraph.node(t)},jh.prototype.edgePoints=function(t){return this.digraph.edge(t._sourceVertex.id(),t._targetVertex.id(),t._id).points};T(".graph_Subgraph .border {\r\n    fill: none;\r\n    stroke: #1f77b4;\r\n    stroke-width: 1.0px;\r\n    pointer-events: none;\r\n}\r\n\r\n.graph_Subgraph.selected > rect {\r\n    stroke:red !important;\r\n}\r\n");var Nh=14,Sh=18,Dh=function(t){function n(){var n=t.call(this)||this;return n._textWidget=(new e.Text).anchor("start").fontSize(Nh),n._buttonMin=(new e.Icon).diameter(Sh).shape_colorStroke("#1f77b4").shape_colorFill("#dcf1ff").image_colorFill("#1f77b4").on("click",function(){n.minClick()},!0).on("dblclick",function(){},!0),n._minState="normal",n}return i(n,t),n.prototype.minState=function(t){return arguments.length?(this._minState=t,this):this._minState},n.prototype.calcIcon=function(){switch(this._minState){case"normal":return"";case"partial":return""}},n.prototype.getBBox=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=this.width(),r=this.height();return{x:-n/2,y:-r/2-Nh,width:n,height:r}},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._border=n.append("rect").attr("class","border"),this._textWidget.target(e),this._buttonMin.target(e)},n.prototype.update=function(n,r){t.prototype.update.call(this,n,r);var i=this.getBBox();this._border.attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height).style("fill",this.border_colorFill()).style("stroke",this.border_colorStroke()),this.border_colorFill_exists()&&!this.title_colorFill_exists()&&this.title_colorFill(e.Palette.textColor(this.border_colorFill())),this._textWidget.pos({x:i.x+4,y:i.y+Nh}).width(this.width()-8).text(this.showTitle()?this.title():"").render(),this._buttonMin.visible(this.showMinMax()).pos({x:i.x+i.width-(Sh/2+4),y:i.y+(Sh/2+4)}).faChar(this.calcIcon()).render()},n.prototype.exit=function(e,n){this._buttonMin.target(null),this._textWidget.target(null),this._border.remove(),t.prototype.exit.call(this,e,n)},n.prototype.intersection=function(t,e){var n=null;return[].forEach(function(t){(null===n||n.d>t.d)&&(n=t)}),n&&n.i?n.i:null},n.prototype.click=function(t){console.log("Clicked: "+t.id)},n.prototype.minClick=function(){switch(this._minState){case"normal":this._minState="partial";break;case"partial":this._minState="normal"}this._buttonMin.faChar(this.calcIcon()).render()},n}(e.SVGWidget);Dh.prototype._class+=" graph_Subgraph",Dh.prototype.publish("border_colorStroke",null,"html-color","Stroke Color",null,{optional:!0}),Dh.prototype.publish("border_colorFill",null,"html-color","Fill Color",null,{optional:!0}),Dh.prototype.publish("showTitle",!0,"boolean","Show Title",null,{tags:["Basic"]}),Dh.prototype.publish("title","","string","Title",null,{tags:["Basic"]}),Dh.prototype.publishProxy("titleFontSize","_textWidget","fontSize"),Dh.prototype.publishProxy("title_colorFill","_textWidget","colorFill"),Dh.prototype.publish("showMinMax",!1,"boolean","Show Min/Max",null,{tags:["Basic"]});T(".graph_Vertex.selected .common_Shape {\r\n    stroke:red !important;\r\n}\r\n");var Mh=function(t){function n(){var n=t.call(this)||this;return n._icon=new e.Icon,n._textBox=new e.TextBox,n._annotationWidgets={},n.pos({x:void 0,y:void 0}),n}return i(n,t),n.prototype.getIconBBox=function(){var t=this._icon.getBBox(!0),e=this._textBox.getBBox(!0);switch(this.iconAnchor()){case"start":return{x:-e.width/2+t.width/3,y:-e.height/2-t.height/3,width:t.width,height:t.height};case"middle":return{x:0,y:-e.height/2-t.height/3,width:t.width,height:t.height};case"end":return{x:e.width/2-t.width/3,y:-e.height/2-t.height/3,width:t.width,height:t.height};case"left":return{x:-e.width/2-t.width/2,y:0,width:t.width,height:t.height}}return{x:0,y:0,width:t.width,height:t.height}},n.prototype.getBBox=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=this.getIconBBox(),r=this._textBox.getBBox(!0),i=Math.min(n.x,r.x),o=Math.min(n.y,r.y);return{x:i,y:o,width:Math.max(n.x+n.width,r.x+r.width)-i,height:Math.max(n.y+n.height,r.y+r.height)-o}},n.prototype.enter=function(e,n){var r=this;t.prototype.enter.call(this,e,n),delete this._prevHash,this._icon.target(e),this._textBox.target(e),n.on("mouseover",function(t){return r.mouseover(t.data())}).on("mouseout",function(t){return r.mouseout(t.data())})},n.prototype.update=function(n,r){t.prototype.update.call(this,n,r);var i=this.hashSum();if(this._prevHash!==i){this._prevHash=i,r.classed("centroid",this.centroid()),r.style("filter",this.centroid()?"url(#"+this._graphID+"_glow)":null),this._icon.tooltip(this.iconTooltip()?this.iconTooltip():this.tooltip()).render(),this._textBox.tooltip(this.tooltip()).render();var o=this.getIconBBox();this._icon.move(o);var a=this,s=r.selectAll(".annotation").data(this.annotationIcons()),u=s.enter().append("g").attr("class","annotation").each(function(t,n){a._annotationWidgets[n]=(new e.Icon).target(this).shape("square")}),c=this._textBox.getBBox(!0),h=c.width/2,l=c.height/2;u.merge(s).each(function(t,e){var n=a._annotationWidgets[e];for(var r in n.diameter(a.annotationDiameter()).shape_colorFill(a.textbox_shape_colorFill()).shape_colorStroke(a.textbox_shape_colorStroke()),t)n[r]?n[r](t[r]):window.__hpcc_debug&&console.log("Invalid annotation property:  "+r);n.render();var i=n.getBBox(!0);n.move({x:h-i.width/2+4,y:l+i.height/2-4}),h-=i.width+a.annotationSpacing()}),s.exit().each(function(t,n){var r=e.select(this);a._annotationWidgets[n].target(null),delete a._annotationWidgets[n],r.remove()})}},n.prototype.exit=function(e,n){for(var r in this._annotationWidgets)this._annotationWidgets[r].target(null);this._icon.target(null),this._textBox.target(null),t.prototype.exit.call(this,e,n)},n.prototype.contains=function(t){return this._icon.contains(t)||this._textBox.contains(t)},n.prototype.intersection=function(t,e){var n=this._icon.intersection(t,e),r=this._textBox.intersection(t,e);return n&&r?this.distance(n,e)<this.distance(r,e)?n:r:n||r},n.prototype.mouseover=function(t){},n.prototype.mouseout=function(t){},n}(e.SVGWidget);Mh.prototype._class+=" graph_Vertex",Mh.prototype.publishProxy("faChar","_icon"),Mh.prototype.publishProxy("imageUrl","_icon"),Mh.prototype.publishProxy("icon_diameter","_icon","diameter"),Mh.prototype.publishProxy("icon_paddingPercent","_icon","paddingPercent"),Mh.prototype.publishProxy("icon_shape_colorFill","_icon","shape_colorFill"),Mh.prototype.publishProxy("icon_shape_colorStroke","_icon","shape_colorStroke"),Mh.prototype.publishProxy("icon_image_colorFill","_icon","image_colorFill"),Mh.prototype.publish("centroid",!1,"boolean","Centroid Vertex"),Mh.prototype.publishProxy("text","_textBox"),Mh.prototype.publishProxy("anchor","_textBox"),Mh.prototype.publishProxy("textbox_shape_colorStroke","_textBox","shape_colorStroke"),Mh.prototype.publishProxy("textbox_shape_colorFill","_textBox","shape_colorFill"),Mh.prototype.publishProxy("textbox_text_colorFill","_textBox","text_colorFill"),Mh.prototype.publish("iconAnchor","start","set","Horizontal anchor position of icon",["","start","middle","end","left"],{tags:["Basic"]}),Mh.prototype.publish("iconTooltip","","string","iconTooltip",null,{tags:["Private"]}),Mh.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),Mh.prototype.publish("annotationDiameter",14,"number","Annotation Diameter",null,{tags:["Private"]}),Mh.prototype.publish("annotationSpacing",3,"number","Annotation Spacing",null,{tags:["Private"]}),Mh.prototype.publish("annotationIcons",[],"array","Annotations",null,{tags:["Private"]});T(".graph_Graph .marker {\r\n    fill: #656565;\r\n    stroke: none;\r\n    stroke-width: 1.0px;\r\n}\r\n\r\n.graph_Graph .zoom {\r\n    fill: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.graph_Graph .selectionBrush {\r\n    fill: none;\r\n    stroke: darkgray;\r\n}\r\n\r\n.graph_Graph .graphEdge.shortest-path .graph_Edge {\r\n    stroke:red;\r\n}\r\n");var Oh=function(t){function r(){var r=t.call(this)||this;r._toggleHierarchy=(new e.ToggleButton).faChar("fa-sitemap").tooltip("Hierarchy").on("click",function(){return r.layoutClick("Hierarchy")}),r._toggleForceDirected=(new e.ToggleButton).faChar("fa-expand").tooltip("Force Directed").on("click",function(){return r.layoutClick("ForceDirected")}),r._toggleForceDirected2=(new e.ToggleButton).faChar("fa-arrows").tooltip("Spring").on("click",function(){return r.layoutClick("ForceDirected2")}),r._toggleCircle=(new e.ToggleButton).faChar("fa-circle-o").tooltip("Circle").on("click",function(){return r.layoutClick("Circle")}),r._dataHash=0,r._neighborOffsets=[],n.IGraph.call(r),n.ITooltip.call(r),r.tooltipHTML(function(t){var e;return t instanceof Dh?e=t.title().replace("\n","<br>"):(t instanceof Mh||t instanceof I)&&(e=t.text().replace("\n","<br>")),e?'<p style="text-align:center">'+e+"</p>":null}),r._drawStartPos="origin";var i=[r._toggleHierarchy,r._toggleForceDirected,r._toggleForceDirected2,r._toggleCircle,new e.Spacer];return r._iconBar.buttons(i.concat(r._iconBar.buttons())),r._graphData=new Rc,r.highlight={zoom:1.1,opacity:.33,edge:"1.25px"},r._selection=new e.Utility.Selection(r),r.zoomToFitLimit(1),r}return i(r,t),r.prototype.iconBarButtons=function(){return this._iconBar.buttons()},r.prototype.layoutClick=function(t){var e=this;this.layout(t),"ForceDirected2"!==t&&this.applyScaleOnLayout(!0),this.layout(t).render(function(t){e.applyScaleOnLayout(!1)})},r.prototype.getOffsetPos=function(){return{x:0,y:0}},r.prototype.size=function(e){return t.prototype.size.apply(this,arguments)},r.prototype.clear=function(){this.data({subgraphs:[],vertices:[],edges:[],hierarchy:[]},!1)},r.prototype.data=function(e,n){var r=t.prototype.data.apply(this,arguments);if(arguments.length){n||(this._graphData=new Rc,this._renderCount=0);var i=this._graphData.setData(e.subgraphs||[],e.vertices||[],e.edges||[],e.hierarchy||[],n||!1);i.addedVertices.length&&this._dataHash++;var o=this;i.addedVertices.forEach(function(t){t._graphID=o._id}),i.addedEdges.forEach(function(t){t._graphID=o._id});var a={};this._graphData.edges().forEach(function(t){a[t._sourceVertex._id]||(a[t._sourceVertex._id]={}),a[t._sourceVertex._id][t._targetVertex._id]||(a[t._sourceVertex._id][t._targetVertex._id]=0);var e=++a[t._sourceVertex._id][t._targetVertex._id];t.arcDepth(16*e)})}return r},r.prototype.graphData=function(){return this._graphData},r.prototype.selection=function(t){return arguments.length?(this._selection.set(t),this):this._selection.get()},r.prototype.linkcolor_default=function(t){return arguments.length?(this._linkcolor=t,this):this._linkcolor},r.prototype.linktooltip_default=function(t){return arguments.length?(this._linktooltip=t,this):this._linktooltip},r.prototype.dragstart=function(t){var n=this;if(this.allowDragging()){if(e.event.sourceEvent.stopPropagation(),t.__drag_dx=e.event.x-t.x(),t.__drag_dy=e.event.y-t.y(),this._dragging=!0,this.forceLayout){e.event.active||this.forceLayout.force.alphaTarget(.3).restart();var r=this.forceLayout.vertexMap[t.id()];r.fixed=!0,r.fx=r.x,r.fy=r.y}this._neighborOffsets=[],this.dragSingleNeighbors()&&(this._neighborOffsets=this._graphData.singleNeighbors(t.id()).map(function(n){return e.select(n.target()).raise(),{neighbor:n,offsetX:t.x()-n.x(),offsetY:t.y()-n.y()}}));for(var i=t.target(),o=i.nextSibling;o;)i.parentNode.insertBefore(o,i),o=i.nextSibling;e.Platform.svgMarkerGlitch&&this._graphData.nodeEdges(t.id()).forEach(function(t){var e=n._graphData.edge(t);n._pushMarkers(e.element())})}},r.prototype.dragging=function(t){var n=this;if(this.allowDragging()){if(e.event.sourceEvent.stopPropagation(),t.move({x:e.event.x-t.__drag_dx,y:e.event.y-t.__drag_dy}),this.forceLayout){var r=this.forceLayout.vertexMap[t.id()];r.fixed=!0,r.fx=e.event.x-t.__drag_dx,r.fy=e.event.y-t.__drag_dy}this._neighborOffsets.forEach(function(r){var i=e.event.x-t.__drag_dx-r.offsetX,o=e.event.y-t.__drag_dy-r.offsetY;if(n.forceLayout){var a=n.forceLayout.vertexMap[r.neighbor.id()];a.fixed=!0,a.fx=i,a.fy=o}r.neighbor.move({x:i,y:o})}),this.refreshIncidentEdges(t,!0)}},r.prototype.dragend=function(t){var n=this;if(this.allowDragging()){if(e.event.sourceEvent.stopPropagation(),this._dragging=!1,this.snapToGrid()){var r=t.calcSnap(this.snapToGrid());t.move(r[0]),this.refreshIncidentEdges(t,!0)}if(this.forceLayout){var i=this.forceLayout.vertexMap[t.id()];i.fixed=!1,i.fx=null,i.fy=null,this._neighborOffsets.forEach(function(t){var e=n.forceLayout.vertexMap[t.neighbor.id()];e.fixed=!1,e.fx=null,e.fy=null})}this._neighborOffsets=[],e.Platform.svgMarkerGlitch&&this._graphData.nodeEdges(t.id()).forEach(function(t){var e=this._graphData.edge(t);this._popMarkers(e.element())})}},r.prototype.enter=function(n,r){var i=this;t.prototype.enter.call(this,n,r),this._zoomGrab.on("click.clear",function(){i.selectionClearOnBackgroundClick()&&i._selection.clear()}),this._d3Drag=e.drag().on("start",function(t){return i.dragstart(t)}).on("end",function(t){return i.dragend(t)}).on("drag",function(t){return i.dragging(t)}),this.defs=this._renderElement.append("defs"),this.addMarkers(),this._centroidFilter=new e.SVGGlowFilter(this.defs,this._id+"_glow"),this.svg=this._renderElement.append("svg:g"),this.svgC=this.svg.append("g").attr("id",this._id+"C"),this.svgE=this.svg.append("g").attr("id",this._id+"E"),this.svgV=this.svg.append("g").attr("id",this._id+"V")},r.prototype.getBounds=function(t,e){var n=[[null,null],[null,null]];return t.forEach(function(t){var r=e?e.nodePos(t._id):{x:t.x(),y:t.y(),width:t.width(),height:t.height()},i=r.x-r.width/2,o=r.x+r.width/2,a=r.y-r.height/2,s=r.y+r.height/2;(null===n[0][0]||n[0][0]>i)&&(n[0][0]=i),(null===n[0][1]||n[0][1]>a)&&(n[0][1]=a),(null===n[1][0]||n[1][0]<o)&&(n[1][0]=o),(null===n[1][1]||n[1][1]<s)&&(n[1][1]=s)}),n},r.prototype.getVertexBounds=function(t){return this.getBounds(this._graphData.nodes(),t)},r.prototype.getSelectionBounds=function(t){return this.getBounds(this._selection.get(),t)},r.prototype.centerOn=function(t,e){var n=[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2];this.zoomTo(n,1,e)},r.prototype.centerOnItem=function(t){var e=t.getBBox(!0),n=e.x+e.width/2,r=e.y+e.height/2,i={x:t.x()+n-e.width/2,y:t.y()+r-e.height/2,width:e.width,height:e.height};this.centerOnBBox(i)},r.prototype.zoomToItem=function(t){var e=t.getBBox(!0),n=e.x+e.width/2,r=e.y+e.height/2,i={x:t.x()+n-e.width/2,y:t.y()+r-e.height/2,width:e.width,height:e.height};this.zoomToBBox(i)},r.prototype.updateVertices=function(t,n,r){var i=this.width(),o=this.height(),a=this,s=t.selectAll("#"+this._id+n+" > .graphVertex").data(r,function(t){return t.id()});s.enter().append("g").attr("class","graphVertex").style("opacity",1e-6).on("click.selectionBag",function(t){a._selection.click(t,e.event),a.selectionChanged()}).on("click",function(t){var n=e.select(this).select(".graph_Vertex"),r=!1;n.empty()||(r=n.classed("selected")),a.vertex_click(a.rowToObj(t.data()),"",r,{vertex:t})}).on("dblclick",function(t){var n=e.select(this).select(".graph_Vertex"),r=!1;n.empty()||(r=n.classed("selected")),a.vertex_dblclick(a.rowToObj(t.data()),"",r,{vertex:t})}).on("contextmenu",function(t){var n=e.select(this).select(".graph_Vertex"),r=!1;n.empty()||(r=n.classed("selected")),a.vertex_contextmenu(a.rowToObj(t.data()),"",r,{vertex:t})}).on("mouseout.tooltip",this.tooltip.hide).on("mousemove.tooltip",this.tooltip.show).on("mouseover",function(t){a._dragging||a.vertex_mouseover(e.select(this),t)}).on("mouseout",function(t){a._dragging||a.vertex_mouseout(e.select(this),t)}).each(function(t){e.select(this).style("cursor",a.allowDragging()?"move":"pointer"),t.target(this).pos({x:t.x()||i/2,y:t.y()||o/2}).animationFrameRender(),a.allowDragging()&&e.select(this).call(a._d3Drag);t.dispatch&&(t.dispatch.on("sizestart",function(t){t.allowResize(a.allowDragging()),a.allowDragging()&&(a._dragging=!0)}),t.dispatch.on("size",function(t){a.refreshIncidentEdges(t,!1)}),t.dispatch.on("sizeend",function(t){if(a._dragging=!1,a.snapToGrid()){var e=t.calcSnap(a.snapToGrid());t.pos(e[0]).size(e[1]).render(),a.refreshIncidentEdges(t,!1)}}))}).transition().duration(750).style("opacity",1),s.each(function(t){t.animationFrameRender()}),s.exit().each(function(t){t.target(null)}).remove(),s.order()},r.prototype.update=function(n,r){var i=this;t.prototype.update.call(this,n,r),this.tooltip.hide(),this._centroidFilter.update(this.centroidColor());var o=this.layout();this._toggleHierarchy.selected("Hierarchy"===o).render(),this._toggleForceDirected.selected("ForceDirected"===o).render(),this._toggleForceDirected2.selected("ForceDirected2"===o).render(),this._toggleCircle.selected("Circle"===o).render();var a=this;this.updateVertices(this.svgC,"C",this._graphData.nodes().filter(function(t){return"Hierarchy"===i.layout()&&t instanceof Dh})),this.updateVertices(this.svgV,"V",this._graphData.nodes().filter(function(t){return!(t instanceof Dh)}));var s=this.svgE.selectAll("#"+this._id+"E > .graphEdge").data(this.showEdges()?this._graphData.edges():[],function(t){return t.id()});s.enter().append("g").attr("class","graphEdge").style("opacity",1e-6).on("click.selectionBag",function(t){a._selection.click(t,e.event)}).on("click",function(t){var n=e.select(this).select(".graph_Edge"),r=!1;n.empty()||(r=n.classed("selected")),a.edge_click(a.rowToObj(t.data()),"",r,{edge:t})}).on("dblclick",function(t){var n=e.select(this).select(".graph_Edge"),r=!1;n.empty()||(r=n.classed("selected")),a.edge_dblclick(a.rowToObj(t.data()),"",r,{edge:t})}).on("mouseout.tooltip",this.tooltip.hide).on("mousemove.tooltip",this.tooltip.show).on("mouseover",function(t){a._dragging||a.edge_mouseover(e.select(this),t)}).on("mouseout",function(t){a._dragging||a.edge_mouseout(e.select(this),t)}).each(function(t){t.target(this).animationFrameRender()}).transition().duration(750).style("opacity",1),s.each(function(t){t.animationFrameRender()}),s.exit().each(function(t){t.target(null)}).remove(),this._renderCount||(this._renderCount++,this.layout(this.layout()))},r.prototype.exit=function(e,n){this._graphData.nodes().forEach(function(t){return t.target(null)}),this._graphData.edges().forEach(function(t){return t.target(null)}),t.prototype.exit.call(this,e,n)},r.prototype.render=function(e){var n=this;return this.progress("start"),t.prototype.render.call(this,function(t){n.doLayout().then(function(){n.progress("end"),e&&e(t)})}),this},r.prototype.doLayout=function(t){var e=this;return void 0===t&&(t=0),new Promise(function(n,r){requestAnimationFrame(function(){e._prevLayout!==e.layout()||e._prevDataHash!==e._dataHash?(e._prevLayout=e.layout(),e._prevDataHash=e._dataHash,e._doLayout(t).then(function(){n()})):n()})})},r.prototype._doLayout=function(t){var e=this;return void 0===t&&(t=0),new Promise(function(n,i){e.progress("layout-start"),e.forceLayout&&(e.forceLayout.force.stop(),e.forceLayout=null);var o=e,a=e.getLayoutEngine();"ForceDirected2"===e.layout()?(e.forceLayout=a,e.forceLayout.force.on("tick",function(){o.progress("layout-tick"),a.vertices.forEach(function(t){if(t.fixed);else{var e=o._graphData.node(t.id);e&&e.move({x:t.x,y:t.y})}}),o._graphData.edges().forEach(function(t){t.points([],!1,!1)}),o.applyScaleOnLayout()}).on("end",function(){o.progress("layout-end")}),e.forceLayout.force.restart(),n()):a&&(e.forceLayout=null,o._dragging=!0,o._graphData.nodes().forEach(function(t){var e=a.nodePos(t._id);t instanceof r.Subgraph?t.pos({x:e.x,y:e.y}).size({width:e.width,height:e.height}).animationFrameRender():t.move({x:e.x,y:e.y},0)}),o._graphData.edges().forEach(function(e){var n=a.edgePoints(e);e.points(n,t)}),o.applyScaleOnLayout()&&requestAnimationFrame(function(){o.zoomToFit(),n()}),e._fixIEMarkers(),setTimeout(function(){o._dragging=!1},t?t+50:50),e.progress("layout-end"),o.applyScaleOnLayout()||n())})},r.prototype.getLayoutEngine=function(){switch(this.layout()){case"Circle":return new Eh(this._graphData,this._size.width,this._size.height);case"ForceDirected":return new kh(this._graphData,this._size.width,this._size.height,{oneShot:!0,linkDistance:this.forceDirectedLinkDistance(),linkStrength:this.forceDirectedLinkStrength(),friction:this.forceDirectedFriction(),charge:this.forceDirectedCharge(),chargeDistance:this.forceDirectedChargeDistance(),theta:this.forceDirectedTheta(),gravity:this.forceDirectedGravity()});case"ForceDirected2":return new kh(this._graphData,this._size.width,this._size.height,{linkDistance:this.forceDirectedLinkDistance(),linkStrength:this.forceDirectedLinkStrength(),friction:this.forceDirectedFriction(),charge:this.forceDirectedCharge(),chargeDistance:this.forceDirectedChargeDistance(),theta:this.forceDirectedTheta(),gravity:this.forceDirectedGravity()});case"Hierarchy":return new jh(this._graphData,this._size.width,this._size.height,{rankdir:this.hierarchyRankDirection(),nodesep:this.hierarchyNodeSeparation(),edgesep:this.hierarchyEdgeSeparation(),ranksep:this.hierarchyRankSeparation(),digraph:this.hierarchyDigraph()})}return null},r.prototype.getNeighborMap=function(t){var e={},n={};if(t)for(var r=this._graphData.nodeEdges(t.id()),i=0;i<r.length;++i){var o=this._graphData.edge(r[i]);n[o.id()]=o,o._sourceVertex.id()!==t.id()&&(e[o._sourceVertex.id()]=o._sourceVertex),o._targetVertex.id()!==t.id()&&(e[o._targetVertex.id()]=o._targetVertex)}return{vertices:e,edges:n}},r.prototype.highlightVerticies=function(t){var e=this,n=this;return this.svgV.selectAll(".graphVertex").classed("graphVertex-highlighted",function(e){return!t||t[e.id()]}).style("filter",function(n){return t&&t[n.id()]?"url(#"+e.id()+"_glow)":null}).transition().duration(this.transitionDuration()).on("end",function(e){t&&t[e.id()]&&e._placeholderElement.node()&&e._placeholderElement.node().parentNode&&e._placeholderElement.node().parentNode.appendChild(e._placeholderElement.node())}).style("opacity",function(e){return!t||t[e.id()]?1:n.highlight.opacity}),this},r.prototype.highlightEdges=function(t){var e=this;return this.svgE.selectAll(".graphEdge").classed("graphEdge-highlighted",function(e){return!t||t[e.id()]}).style("stroke-width",function(n){return t&&t[n.id()]?e.highlight.edge:"1px"}).transition().duration(this.transitionDuration()).style("opacity",function(n){return!t||t[n.id()]?1:e.highlight.opacity}),this},r.prototype.highlightVertex=function(t,e){if(this.highlightOnMouseOverVertex())if(e){var n=this.getNeighborMap(e);n.vertices[e.id()]=e,this.highlightVerticies(n.vertices),this.highlightEdges(n.edges)}else this.highlightVerticies(null),this.highlightEdges(null)},r.prototype.highlightEdge=function(t,e){if(this.highlightOnMouseOverEdge())if(e){var n={};n[e._sourceVertex.id()]=e._sourceVertex,n[e._targetVertex.id()]=e._targetVertex;var r={};r[e.id()]=e,this.highlightVerticies(n),this.highlightEdges(r)}else this.highlightVerticies(null),this.highlightEdges(null)},r.prototype.refreshIncidentEdges=function(t,e){var n=this;this._graphData.nodeEdges(t.id()).forEach(function(t){n._graphData.edge(t).points([],!1,e)})},r.prototype.centroids=function(){return this._graphData.nodes().filter(function(t){return t.centroid()})},r.prototype.selectionChanged=function(){var t=this;if(this.highlightSelectedPathToCentroid()){var e={};this.centroids().forEach(function(n){t.selection().forEach(function(r){t._graphData.undirectedShortestPath(n.id(),r.id()).forEach(function(t){e[t.id()]=!0})})}),this.svgE.selectAll(".graphEdge").classed("shortest-path",function(t){return!0===e[t.id()]})}},r.prototype.vertex_click=function(t,e,r,i){i&&i.vertex&&i.vertex._placeholderElement.node().parentNode.appendChild(i.vertex._placeholderElement.node()),n.IGraph.prototype.vertex_click.apply(this,arguments)},r.prototype.vertex_dblclick=function(t,e,n,r){},r.prototype.vertex_contextmenu=function(t,e,n,r){},r.prototype.vertex_mouseover=function(t,e){this.highlightVertex(t,e)},r.prototype.vertex_mouseout=function(t,e){this.highlightVertex(null,null)},r.prototype.edge_mouseover=function(t,e){this.highlightEdge(t,e)},r.prototype.edge_mouseout=function(t,e){this.highlightEdge(null,null)},r.prototype.addMarkers=function(t){void 0===t&&(t=!1),t&&(this.defs.select("#"+this._id+"_arrowHead").remove(),this.defs.select("#"+this._id+"_circleFoot").remove(),this.defs.select("#"+this._id+"_circleHead").remove(),this.defs.select("#"+this._id+"_glow").remove()),this.defs.append("marker").attr("class","marker").attr("id",this._id+"_arrowHead").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",8).attr("markerHeight",8).attr("markerUnits","strokeWidth").attr("orient","auto").append("polyline").attr("points","0,0 10,5 0,10 1,5"),this.defs.append("marker").attr("class","marker").attr("id",this._id+"_circleFoot").attr("viewBox","0 0 10 10").attr("refX",1).attr("refY",5).attr("markerWidth",7).attr("markerHeight",7).attr("markerUnits","strokeWidth").attr("orient","auto").append("circle").attr("cx",5).attr("cy",5).attr("r",4),this.defs.append("marker").attr("class","marker").attr("id",this._id+"_circleHead").attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerWidth",7).attr("markerHeight",7).attr("markerUnits","strokeWidth").attr("orient","auto").append("circle").attr("cx",5).attr("cy",5).attr("r",4)},r.prototype.progress=function(t){},r.Subgraph=Dh,r.Vertex=Mh,r.Edge=I,r.profileID=0,r}(e.SVGZoomWidget);Oh.prototype._class+=" graph_Graph",Oh.prototype.implements(n.IGraph.prototype),Oh.prototype.implements(n.ITooltip.prototype),Oh.prototype.publish("allowDragging",!0,"boolean","Allow Dragging of Vertices",null,{tags:["Advanced"]}),Oh.prototype.publish("dragSingleNeighbors",!1,"boolean","Dragging a Vertex also moves its singleton neighbors",null,{tags:["Advanced"]}),Oh.prototype.publish("layout","Circle","set","Default Layout",["Circle","ForceDirected","ForceDirected2","Hierarchy","None"],{tags:["Basic"]}),Oh.prototype.publish("scale","100%","set","Zoom Level",["all","width","selection","100%","90%","75%","50%","25%","10%"],{tags:["Basic"]}),Oh.prototype.publish("applyScaleOnLayout",!1,"boolean","Shrink to fit on Layout",null,{tags:["Basic"]}),Oh.prototype.publish("highlightOnMouseOverVertex",!1,"boolean","Highlight Vertex on Mouse Over",null,{tags:["Basic"]}),Oh.prototype.publish("highlightOnMouseOverEdge",!1,"boolean","Highlight Edge on Mouse Over",null,{tags:["Basic"]}),Oh.prototype.publish("transitionDuration",250,"number","Transition Duration",null,{tags:["Intermediate"]}),Oh.prototype.publish("showEdges",!0,"boolean","Show Edges",null,{tags:["Intermediate"]}),Oh.prototype.publish("snapToGrid",0,"number","Snap to Grid",null,{tags:["Private"]}),Oh.prototype.publish("selectionClearOnBackgroundClick",!1,"boolean","Clear selection on background click"),Oh.prototype.publish("centroidColor","#00A000","html-color","Centroid Color",null,{tags:["Basic"]}),Oh.prototype.publish("highlightSelectedPathToCentroid",!1,"boolean","Highlight path to Center Vertex (for selected vertices)",null,{tags:["Basic"]}),Oh.prototype.publish("hierarchyRankDirection","TB","set","Direction for Rank Nodes",["TB","BT","LR","RL"],{tags:["Advanced"]}),Oh.prototype.publish("hierarchyNodeSeparation",50,"number","Number of pixels that separate nodes horizontally in the layout",null,{tags:["Advanced"]}),Oh.prototype.publish("hierarchyEdgeSeparation",10,"number","Number of pixels that separate edges horizontally in the layout",null,{tags:["Advanced"]}),Oh.prototype.publish("hierarchyRankSeparation",50,"number","Number of pixels between each rank in the layout",null,{tags:["Advanced"]}),Oh.prototype.publish("hierarchyDigraph",!0,"boolean","Directional Graph",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedLinkDistance",300,"number","Target distance between linked nodes",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedLinkStrength",1,"number","Strength (rigidity) of links",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedFriction",.9,"number","Friction coefficient",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedCharge",-25,"number","Charge strength ",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedChargeDistance",1e4,"number","Maximum distance over which charge forces are applied",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedTheta",.8,"number","BarnesHut approximation criterion",null,{tags:["Advanced"]}),Oh.prototype.publish("forceDirectedGravity",.1,"number","Gravitational strength",null,{tags:["Advanced"]});var Ch=Oh.prototype.scale;Oh.prototype.scale=function(t,e){var n=Ch.apply(this,arguments);return arguments.length&&this.zoomTo(t,e),n};var Ph=function(t){function e(){var e=t.call(this)||this;return e._vertexMap={},e._edgeMap={},e._adjacencyData=[],e}return i(e,t),e.prototype.data=function(e,n){var r=this;if(!arguments.length)return this._adjacencyData;if(e instanceof Array){var i=JSON.stringify(e);if(this._prevAdjacencyData!==i){var o,a,s;this._prevAdjacencyData=i,this._adjacencyData=e;for(var u=void 0,c=[],h=0,l=0,f=this.columns();l<f.length;l++){var d=f[l];switch(d){case"uid":o=h;break;case"label":a=h;break;case"icon":s=h;break;case"links":u=h;break;default:0===d.indexOf("annotation_")&&c.push(h)}++h}var p=void 0,g={},v={};p={vertices:e.map(function(t){var e=g[t[o]]||r._vertexMap[t[o]];if(!e){for(var n in e=new Mh,t[s])"function"==typeof e[n]&&e[n](t[s][n]);for(var i=[],u=0,h=c;u<h.length;u++){var l=t[h[u]];l.faChar&&(l.faChar=l.faChar,i.push(l))}e.text(t[a]).data(t).annotationIcons(i)}return g[t[o]]=e,e}),edges:[]};for(var _=0,y=e;_<y.length;_++)for(var x=y[_],m=0,b=x[u];m<b.length;m++){var w=b[m],E=x[o]+"->"+w[o],k=v[E]||this._edgeMap[E];k||(g[x[o]]&&g[w[o]]?(k=(new I).sourceVertex(g[x[o]]).targetVertex(g[w[o]]).data(w),v[E]=k):console.log("Missing vertices for edge:  "+E)),k&&p.edges.push(k)}return this._vertexMap=g,this._edgeMap=v,t.prototype.data.call(this,p,n)}return this}throw new Error("Invalid data shape.")},e.prototype.click=function(t,e,n){console.log("click")},e}(Oh);function Th(t){return function(){return t}}function Bh(t,e){return t.source.y-e.source.y}function Ih(t,e){return t.target.y-e.target.y}function Ah(t,e){return t.y-e.y}function Lh(t){return t.value}function Vh(t){return t.y+t.dy/2}function Fh(t){return Vh(t.source)*t.value}function zh(t){return Vh(t.target)*t.value}function Gh(t){return t.nodes}function Rh(t){return t.links}function Uh(){var t=0,n=0,r=1,i=1,o=24,a=8,s=Gh,u=Rh,c=32;function h(){var h={nodes:s.apply(null,arguments),links:u.apply(null,arguments)};return function(t){t.nodes.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),t.links.forEach(function(e){var n=e.source,r=e.target;"number"==typeof n&&(n=e.source=t.nodes[e.source]),"number"==typeof r&&(r=e.target=t.nodes[e.target]),n.sourceLinks.push(e),r.targetLinks.push(e)})}(h),function(t){t.nodes.forEach(function(t){t.value=Math.max(e.sum(t.sourceLinks,Lh),e.sum(t.targetLinks,Lh))})}(h),function(e){var n,i=e.nodes,a=0;for(;i.length;)n=[],i.forEach(function(t){t.x=a,t.dx=o,t.sourceLinks.forEach(function(t){n.indexOf(t.target)<0&&n.push(t.target)})}),i=n,++a;(function(t,e){t.nodes.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})})(e,a),function(e,n){e.nodes.forEach(function(e){e.x=t+e.x*n})}(e,(r-t-o)/(a-1))}(h),function(t){var r=e.nest().key(function(t){return t.x}).sortKeys(e.ascending).entries(t.nodes).map(function(t){return t.values});o=e.min(r,function(t){return(i-n-(t.length-1)*a)/e.sum(t,Lh)}),r.forEach(function(t){t.forEach(function(t,e){t.y=e,t.dy=t.value*o})}),t.links.forEach(function(t){t.dy=t.value*o}),f();var o;for(var s=1,u=c;u>0;--u)l(s*=.99),f(),h(s),f();function h(t){r.forEach(function(n){n.forEach(function(n){n.targetLinks.length&&(n.y+=(e.sum(n.targetLinks,Fh)/e.sum(n.targetLinks,Lh)-Vh(n))*t)})})}function l(t){r.slice().reverse().forEach(function(n){n.forEach(function(n){n.sourceLinks.length&&(n.y+=(e.sum(n.sourceLinks,zh)/e.sum(n.sourceLinks,Lh)-Vh(n))*t)})})}function f(){r.forEach(function(t){var e,r,o,s=n,u=t.length;for(t.sort(Ah),o=0;o<u;++o)e=t[o],(r=s-e.y)>0&&(e.y+=r),s=e.y+e.dy+a;if((r=s-a-i)>0)for(s=e.y-=r,o=u-2;o>=0;--o)e=t[o],(r=e.y+e.dy+a-s)>0&&(e.y-=r),s=e.y})}}(h),l(h),h}function l(t){t.nodes.forEach(function(t){t.sourceLinks.sort(Ih),t.targetLinks.sort(Bh)}),t.nodes.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}return h.update=function(t){return l(t),t},h.nodeWidth=function(t){return arguments.length?(o=+t,h):o},h.nodePadding=function(t){return arguments.length?(a=+t,h):a},h.nodes=function(t){return arguments.length?(s="function"==typeof t?t:Th(t),h):s},h.links=function(t){return arguments.length?(u="function"==typeof t?t:Th(t),h):u},h.size=function(e){return arguments.length?(t=n=0,r=+e[0],i=+e[1],h):[r-t,i-n]},h.extent=function(e){return arguments.length?(t=+e[0][0],r=+e[1][0],n=+e[0][1],i=+e[1][1],h):[[t,n],[r,i]]},h.iterations=function(t){return arguments.length?(c=+t,h):c},h}function Wh(t){return[t.source.x+t.source.dx,t.source.y+t.sy+t.dy/2]}function qh(t){return[t.target.x,t.target.y+t.ty+t.dy/2]}Ph.prototype._class+=" graph_AdjacencyGraph";T(".graph_Sankey .node rect {\r\n  cursor: move;\r\n  fill-opacity: .9;\r\n  shape-rendering: crispEdges;\r\n  stroke: darkgray;\r\n}\r\n\r\n.graph_Sankey .node.selected rect {\r\n    stroke: red;\r\n}\r\n\r\n.graph_Sankey .node.over rect {\r\n    stroke: orange;\r\n}\r\n\r\n.graph_Sankey .node.selected.over rect {\r\n    stroke: red;\r\n}\r\n\r\n.graph_Sankey .node text {\r\n  pointer-events: none;\r\n  text-shadow: 0 1px 0 #fff;\r\n}\r\n\r\n.graph_Sankey .node.selected text {\r\n    fill: red;\r\n}\r\n\r\n.graph_Sankey .node.over text {\r\n    fill: orange;\r\n}\r\n\r\n.graph_Sankey .node.selected.over text {\r\n    fill: red;\r\n}\r\n\r\n.graph_Sankey .link {\r\n  fill: none;\r\n  stroke: #000;\r\n  stroke-opacity: .2;\r\n}\r\n\r\n.graph_Sankey .link:hover {\r\n  stroke-opacity: .5;\r\n}\r\n\r\n");var Hh={mean:e.mean,median:e.median,min:e.min,max:e.max,sum:e.sum},Yh=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.owner=function(t){return arguments.length?(this._owner=t,this):this._owner},e.prototype.valid=function(){return!!this.column()},e.prototype.aggregate=function(t){switch(this.aggrType()){case null:case void 0:case"":return t.length;default:var e=this._owner.columns().indexOf(this.aggrColumn());return Hh[this.aggrType()](t,function(t){return+t[e]})}},e}(e.PropertyExt);Yh.prototype._class+=" graph_Sankey.SankeyColumn",Yh.prototype.publish("column",null,"set","Field",function(){return this._owner?this._owner.columns():[]},{optional:!0}),Yh.prototype.publish("aggrType",null,"set","Aggregation Type",[null,"mean","median","sum","min","max"],{optional:!0,disable:function(t){return!t._owner||0===t._owner.mappings().indexOf(t)}}),Yh.prototype.publish("aggrColumn",null,"set","Aggregation Field",function(){return this._owner?this._owner.columns():[]},{optional:!0,disable:function(t){return!t._owner||!t.aggrType()||0===t._owner.mappings().indexOf(t)}});var $h=function(t){function n(){var n=t.call(this)||this;return e.Utility.SimpleSelectionMixin.call(n),n._drawStartPos="origin",n}return i(n,t),n.prototype.sankeyData=function(){var t={vertices:[],edges:[]};if(0===this.data().length)return t;var e={},n=this.mappings().filter(function(t){return t.valid()});return n.forEach(function(n,r){this._db.rollupView([n.column()]).entries().forEach(function(i){var o=n.column()+":"+r+":"+i.key;e[o]||(t.vertices.push({__id:o,__category:n.column(),name:i.key,origRow:i.values}),e[o]=t.vertices.length-1)},this)},this),n.forEach(function(r,i){if(i<n.length-1){var o=n[i+1];this._db.rollupView([r.column(),o.column()]).entries().forEach(function(n){var a=r.column()+":"+i+":"+n.key;n.values.forEach(function(n){var r=o.column()+":"+(i+1)+":"+n.key;t.edges.push({__id:a+"_"+r,source:e[a],target:e[r],value:o.aggregate(n.value)})})})}},this),t},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._d3Sankey=new Uh,this._selection.widgetElement(n)},n.prototype.update=function(n,r){t.prototype.update.call(this,n,r),this._palette=this._palette.switch(this.paletteID());var i=this.sankeyData();this._d3Sankey.extent([[0,0],[this.width(),this.height()]]).nodeWidth(this.vertexWidth()).nodePadding(this.vertexPadding()),this._d3Sankey({nodes:i.vertices,links:i.edges});var o=this,a=r.selectAll(".link").data(i.edges);a.enter().append("path").attr("class","link").each(function(){e.select(this).append("title")}).merge(a).attr("d",m().source(Wh).target(qh)).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy}).select("title").text(function(t){return t.source.name+"  "+t.target.name+"\n"+t.value}),a.exit().remove();var s=r.selectAll(".node").data(i.vertices);s.enter().append("g").attr("class","node").call(this._selection.enter.bind(this._selection)).on("click",function(t){o.click(o.rowToObj(t.origRow[0]),"",o._selection.selected(this))}).on("dblclick",function(t){o.dblclick(o.rowToObj(t.origRow[0]),"",o._selection.selected(this))}).each(function(){var t=e.select(this);t.append("rect"),t.append("text")}).merge(s).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).each(function(){var t=e.select(this);t.select("rect").attr("height",function(t){return t.dy}).attr("width",o._d3Sankey.nodeWidth()).style("fill",function(t){return o._palette(t.name)}).style("cursor",o.xAxisMovement()||o.yAxisMovement()?null:"default"),t.select("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<o.width()/2}).attr("x",6+o._d3Sankey.nodeWidth()).attr("text-anchor","start")}),s.exit().remove()},n.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},n.prototype.click=function(t,e,n){console.log("Click:  "+JSON.stringify(t)+", "+e+","+n)},n.prototype.dblclick=function(t,e,n){console.log("Double Click:  "+JSON.stringify(t)+", "+e+","+n)},n}(e.SVGWidget);$h.prototype._class+=" graph_Sankey",$h.prototype.Column=Yh,$h.prototype.mixin(e.Utility.SimpleSelectionMixin),$h.prototype._palette=e.Palette.ordinal("default"),$h.prototype.publish("paletteID","default","set","Color palette for this widget",$h.prototype._palette.switch()),$h.prototype.publish("mappings",[],"propertyArray","Source Columns",null,{autoExpand:Yh}),$h.prototype.publish("vertexWidth",36,"number","Vertex Width"),$h.prototype.publish("vertexPadding",40,"number","Vertex Padding"),$h.prototype.publish("xAxisMovement",!1,"boolean","Enable x-axis movement"),$h.prototype.publish("yAxisMovement",!1,"boolean","Enable y-axis movement"),t.PKG_NAME="@hpcc-js/graph",t.PKG_VERSION="2.6.0",t.BUILD_VERSION="2.3.0",t.AdjacencyGraph=Ph,t.Edge=I,t.Graph=Oh,t.SankeyColumn=Yh,t.Sankey=$h,t.Subgraph=Dh,t.Vertex=Mh,Object.defineProperty(t,"__esModule",{value:!0})});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ })

}]);