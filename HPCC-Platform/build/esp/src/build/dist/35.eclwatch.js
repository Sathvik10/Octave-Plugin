(function(){
(this||window)["webpackJsonp"].registerAbsMids({
	"@hpcc-js/chart":"./node_modules/@hpcc-js/chart/dist/index.min.js"
})
})(),(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[35],{

/***/ "./node_modules/@hpcc-js/chart/dist/index.min.js":
/*!*******************************************************!*\
  !*** ./node_modules/@hpcc-js/chart/dist/index.min.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?e(exports,__webpack_require__(/*! @hpcc-js/api */ "./node_modules/@hpcc-js/api/dist/index.min.js"),__webpack_require__(/*! @hpcc-js/common */ "./node_modules/@hpcc-js/common/dist/index.min.js"),__webpack_require__(/*! @hpcc-js/util */ "./node_modules/@hpcc-js/util/dist/index.min.js")):undefined}(this,function(t,e,n,i){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var l=Math.PI,h=2*l,u=h-1e-6;function c(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new c}function d(t){return function(){return t}}c.prototype=p.prototype={constructor:c,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,o,r){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,n,i,o){t=+t,e=+e,n=+n,i=+i,o=+o;var r=this._x1,a=this._y1,s=n-t,h=i-e,u=r-t,c=a-e,p=u*u+c*c;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(p>1e-6)if(Math.abs(c*s-h*u)>1e-6&&o){var d=n-r,f=i-a,y=s*s+h*h,x=d*d+f*f,_=Math.sqrt(y),m=Math.sqrt(p),g=o*Math.tan((l-Math.acos((y+p-x)/(2*_*m)))/2),v=g/m,b=g/_;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*u)+","+(e+v*c)),this._+="A"+o+","+o+",0,0,"+ +(c*d>u*f)+","+(this._x1=t+b*s)+","+(this._y1=e+b*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,o,r){t=+t,e=+e;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),c=t+a,p=e+s,d=1^r,f=r?i-o:o-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+p:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-p)>1e-6)&&(this._+="L"+c+","+p),n&&(f<0&&(f=f%h+h),f>u?this._+="A"+n+","+n+",0,1,"+d+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=p):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=l)+","+d+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var f=Math.abs,y=Math.atan2,x=Math.cos,_=Math.max,m=Math.min,g=Math.sin,v=Math.sqrt,b=1e-12,w=Math.PI,k=w/2,S=2*w;function A(t){return t>=1?k:t<=-1?-k:Math.asin(t)}function M(t){return t.innerRadius}function P(t){return t.outerRadius}function T(t){return t.startAngle}function C(t){return t.endAngle}function I(t){return t&&t.padAngle}function z(t,e,n,i,o,r,a){var s=t-n,l=e-i,h=(a?r:-r)/v(s*s+l*l),u=h*l,c=-h*s,p=t+u,d=e+c,f=n+u,y=i+c,x=(p+f)/2,m=(d+y)/2,g=f-p,b=y-d,w=g*g+b*b,k=o-r,S=p*y-f*d,A=(b<0?-1:1)*v(_(0,k*k*w-S*S)),M=(S*b-g*A)/w,P=(-S*g-b*A)/w,T=(S*b+g*A)/w,C=(-S*g+b*A)/w,I=M-x,z=P-m,F=T-x,O=C-m;return I*I+z*z>F*F+O*O&&(M=T,P=C),{cx:M,cy:P,x01:-u,y01:-c,x11:M*(o/k-1),y11:P*(o/k-1)}}function F(){var t=M,e=P,n=d(0),i=null,o=T,r=C,a=I,s=null;function l(){var l,h,u,c=+t.apply(this,arguments),d=+e.apply(this,arguments),_=o.apply(this,arguments)-k,M=r.apply(this,arguments)-k,P=f(M-_),T=M>_;if(s||(s=l=p()),d<c&&(h=d,d=c,c=h),d>b)if(P>S-b)s.moveTo(d*x(_),d*g(_)),s.arc(0,0,d,_,M,!T),c>b&&(s.moveTo(c*x(M),c*g(M)),s.arc(0,0,c,M,_,T));else{var C,I,F=_,O=M,j=_,D=M,R=P,E=P,N=a.apply(this,arguments)/2,L=N>b&&(i?+i.apply(this,arguments):v(c*c+d*d)),B=m(f(d-c)/2,+n.apply(this,arguments)),H=B,V=B;if(L>b){var q=A(L/c*g(N)),W=A(L/d*g(N));(R-=2*q)>b?(j+=q*=T?1:-1,D-=q):(R=0,j=D=(_+M)/2),(E-=2*W)>b?(F+=W*=T?1:-1,O-=W):(E=0,F=O=(_+M)/2)}var G=d*x(F),X=d*g(F),Y=c*x(D),U=c*g(D);if(B>b){var Z=d*x(O),J=d*g(O),Q=c*x(j),K=c*g(j);if(P<w){var $=R>b?function(t,e,n,i,o,r,a,s){var l=n-t,h=i-e,u=a-o,c=s-r,p=(u*(e-r)-c*(t-o))/(c*l-u*h);return[t+p*l,e+p*h]}(G,X,Q,K,Z,J,Y,U):[Y,U],tt=G-$[0],et=X-$[1],nt=Z-$[0],it=J-$[1],ot=1/g(((u=(tt*nt+et*it)/(v(tt*tt+et*et)*v(nt*nt+it*it)))>1?0:u<-1?w:Math.acos(u))/2),rt=v($[0]*$[0]+$[1]*$[1]);H=m(B,(c-rt)/(ot-1)),V=m(B,(d-rt)/(ot+1))}}E>b?V>b?(C=z(Q,K,G,X,d,V,T),I=z(Z,J,Y,U,d,V,T),s.moveTo(C.cx+C.x01,C.cy+C.y01),V<B?s.arc(C.cx,C.cy,V,y(C.y01,C.x01),y(I.y01,I.x01),!T):(s.arc(C.cx,C.cy,V,y(C.y01,C.x01),y(C.y11,C.x11),!T),s.arc(0,0,d,y(C.cy+C.y11,C.cx+C.x11),y(I.cy+I.y11,I.cx+I.x11),!T),s.arc(I.cx,I.cy,V,y(I.y11,I.x11),y(I.y01,I.x01),!T))):(s.moveTo(G,X),s.arc(0,0,d,F,O,!T)):s.moveTo(G,X),c>b&&R>b?H>b?(C=z(Y,U,Z,J,c,-H,T),I=z(G,X,Q,K,c,-H,T),s.lineTo(C.cx+C.x01,C.cy+C.y01),H<B?s.arc(C.cx,C.cy,H,y(C.y01,C.x01),y(I.y01,I.x01),!T):(s.arc(C.cx,C.cy,H,y(C.y01,C.x01),y(C.y11,C.x11),!T),s.arc(0,0,c,y(C.cy+C.y11,C.cx+C.x11),y(I.cy+I.y11,I.cx+I.x11),T),s.arc(I.cx,I.cy,H,y(I.y11,I.x11),y(I.y01,I.x01),!T))):s.arc(0,0,c,D,j,T):s.lineTo(Y,U)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +r.apply(this,arguments))/2-w/2;return[x(i)*n,g(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:d(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:d(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:d(+t),l):i},l.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:d(+t),l):o},l.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:d(+t),l):r},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:d(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}function O(t){this._context=t}function j(t){return new O(t)}function D(t){return t[0]}function R(t){return t[1]}function E(){var t=D,e=R,n=d(!0),i=null,o=j,r=null;function a(a){var s,l,h,u=a.length,c=!1;for(null==i&&(r=o(h=p())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===c&&((c=!c)?r.lineStart():r.lineEnd()),c&&r.point(+t(l,s,a),+e(l,s,a));if(h)return r=null,h+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:d(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:d(!!t),a):n},a.curve=function(t){return arguments.length?(o=t,null!=i&&(r=o(i)),a):o},a.context=function(t){return arguments.length?(null==t?i=r=null:r=o(i=t),a):i},a}function N(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function L(t){return t}function B(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function H(t){this._context=t}function V(t){return new H(t)}function q(t,e){this._basis=new H(t),this._beta=e}O.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},H.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},q.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,o=t[0],r=e[0],a=t[n]-o,s=e[n]-r,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(o+i*a),this._beta*e[l]+(1-this._beta)*(r+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var W=function t(e){function n(t){return 1===e?new H(t):new q(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function G(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function X(t,e){this._context=t,this._k=(1-e)/6}X.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:G(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:G(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Y=function t(e){function n(t){return new X(t,e)}return n.tension=function(e){return t(+e)},n}(0);function U(t,e){this._context=t,this._alpha=e}U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,o=t._y1,r=t._x2,a=t._y2;if(t._l01_a>b){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,o=(o*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>b){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*h+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*h+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,o,r,a,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Z=function t(e){function n(t){return e?new U(t,e):new X(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function J(t){return t<0?-1:1}function Q(t,e,n){var i=t._x1-t._x0,o=e-t._x1,r=(t._y1-t._y0)/(i||o<0&&-0),a=(n-t._y1)/(o||i<0&&-0),s=(r*o+a*i)/(i+o);return(J(r)+J(a))*Math.min(Math.abs(r),Math.abs(a),.5*Math.abs(s))||0}function K(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function $(t,e,n){var i=t._x0,o=t._y0,r=t._x1,a=t._y1,s=(r-i)/3;t._context.bezierCurveTo(i+s,o+s*e,r-s,a-s*n,r,a)}function tt(t){this._context=t}function et(t){this._context=t}function nt(t){return new tt(t)}function it(t){this._context=t}function ot(t){var e,n,i=t.length-1,o=new Array(i),r=new Array(i),a=new Array(i);for(o[0]=0,r[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)o[e]=1,r[e]=4,a[e]=4*t[e]+2*t[e+1];for(o[i-1]=2,r[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=o[e]/r[e-1],r[e]-=n,a[e]-=n*a[e-1];for(o[i-1]=a[i-1]/r[i-1],e=i-2;e>=0;--e)o[e]=(a[e]-o[e+1])/r[e];for(r[i-1]=(t[i]+o[i-1])/2,e=0;e<i-1;++e)r[e]=2*t[e+1]-o[e+1];return[o,r]}function rt(t){return new it(t)}function at(t,e){this._context=t,this._t=e}function st(t){return new at(t,.5)}function lt(t){return new at(t,0)}function ht(t){return new at(t,1)}tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$(this,this._t0,K(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,$(this,K(this,n=Q(this,t,e)),n);break;default:$(this,this._t0,n=Q(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new et(t)}.prototype=Object.create(tt.prototype)).point=function(t,e){tt.prototype.point.call(this,e,t)},et.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,o,r){this._context.bezierCurveTo(e,t,i,n,r,o)}},it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=ot(t),o=ot(e),r=0,a=1;a<n;++r,++a)this._context.bezierCurveTo(i[0][r],o[0][r],i[1][r],o[1][r],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},at.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var ut=Array.prototype.slice;function ct(t){return t}var pt=1,dt=2,ft=3,yt=4,xt=1e-6;function _t(t){return"translate("+(t+.5)+",0)"}function mt(t){return"translate(0,"+(t+.5)+")"}function gt(){return!this.__axis}function vt(t,e){var n=[],i=null,o=null,r=6,a=6,s=3,l=t===pt||t===yt?-1:1,h=t===yt||t===dt?"x":"y",u=t===pt||t===ft?_t:mt;function c(c){var p=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,d=null==o?e.tickFormat?e.tickFormat.apply(e,n):ct:o,f=Math.max(r,0)+s,y=e.range(),x=+y[0]+.5,_=+y[y.length-1]+.5,m=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),g=c.selection?c.selection():c,v=g.selectAll(".domain").data([null]),b=g.selectAll(".tick").data(p,e).order(),w=b.exit(),k=b.enter().append("g").attr("class","tick"),S=b.select("line"),A=b.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(k),S=S.merge(k.append("line").attr("stroke","#000").attr(h+"2",l*r)),A=A.merge(k.append("text").attr("fill","#000").attr(h,l*f).attr("dy",t===pt?"0em":t===ft?"0.71em":"0.32em")),c!==g&&(v=v.transition(c),b=b.transition(c),S=S.transition(c),A=A.transition(c),w=w.transition(c).attr("opacity",xt).attr("transform",function(t){return isFinite(t=m(t))?u(t):this.getAttribute("transform")}),k.attr("opacity",xt).attr("transform",function(t){var e=this.parentNode.__axis;return u(e&&isFinite(e=e(t))?e:m(t))})),w.remove(),v.attr("d",t===yt||t==dt?"M"+l*a+","+x+"H0.5V"+_+"H"+l*a:"M"+x+","+l*a+"V0.5H"+_+"V"+l*a),b.attr("opacity",1).attr("transform",function(t){return u(m(t))}),S.attr(h+"2",l*r),A.attr(h,l*f).text(d),g.filter(gt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===dt?"start":t===yt?"end":"middle"),g.each(function(){this.__axis=m})}return c.scale=function(t){return arguments.length?(e=t,c):e},c.ticks=function(){return n=ut.call(arguments),c},c.tickArguments=function(t){return arguments.length?(n=null==t?[]:ut.call(t),c):n.slice()},c.tickValues=function(t){return arguments.length?(i=null==t?null:ut.call(t),c):i&&i.slice()},c.tickFormat=function(t){return arguments.length?(o=t,c):o},c.tickSize=function(t){return arguments.length?(r=a=+t,c):r},c.tickSizeInner=function(t){return arguments.length?(r=+t,c):r},c.tickSizeOuter=function(t){return arguments.length?(a=+t,c):a},c.tickPadding=function(t){return arguments.length?(s=+t,c):s},c}function bt(t){return vt(pt,t)}function wt(t){return vt(dt,t)}function kt(t){return vt(ft,t)}function St(t){return vt(yt,t)}function At(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}At(".chart_Axis {\r\n  fill: black;\r\n  font: 10px sans-serif;\r\n}\r\n\r\n.chart_Axis .axis .tick > text {\r\n  font: 10px sans-serif;\r\n}\r\n\r\n.chart_Axis .axis path.domain,\r\n.chart_Axis .axis .tick line {\r\n  fill: none;\r\n  stroke: black;\r\n}\r\n\r\n.chart_Axis .guide path.domain\r\n{\r\n  fill: none;\r\n  stroke: none;\r\n}\r\n.chart_Axis .guide .tick line {\r\n  fill: none;\r\n  stroke: lightgrey;\r\n  opacity: 0.7;\r\n}\r\n.chart_Axis .guide .tick.guide-0 line {\r\n  stroke: black;\r\n  stroke-width: 1;\r\n  stroke-dasharray: 3 5;\r\n}\r\n.chart_Axis line,\r\n.chart_Axis path{\r\n  shape-rendering: crispEdges;\r\n}\r\n");var Mt=function(t){function e(){var e=t.call(this)||this;return e._drawStartPos="origin",e.updateScale(),e}return r(e,t),e.prototype.type=function(t){return arguments.length?(this._type=t,this.updateScale(),this):this._type},e.prototype.timePattern=function(t){return arguments.length?(this._timePattern=t,this.updateScale(),this):this._timePattern},e.prototype.lowValue=function(){return this.parse(this.low())},e.prototype.highValue=function(){return this.parse(this.high())},e.prototype.parse=function(t,e){if(t instanceof Array)return t.map(function(t){return this.parse(t)},this);if(null!=t){if(this.parser)return this.parser("number"==typeof t?t.toString():t);if(e&&"string"==typeof t)return+t}return t},e.prototype.parseInvert=function(t){return t instanceof Array?t.map(function(t){return this.parseInvert(t)},this):this.parserInvert&&t?this.parserInvert(t):t},e.prototype.format=function(t){return t instanceof Array?t.map(function(t){return this.format(t)},this):null!=t&&this.formatter?this.formatter(t):t},e.prototype.parseFormat=function(t){return this.format(this.parse(t))},e.prototype.scalePos=function(t){var e=this.d3Scale(this.parse(t));return"ordinal"===this.type()&&(e+=this.bandwidth()/2),e},e.prototype.bandwidth=function(){return this.d3Scale.bandwidth?this.d3Scale.bandwidth():0},e.prototype.isHorizontal=function(){switch(this.orientation()){case"left":case"right":return!1}return!0},e.prototype.domain=function(t){return arguments.length?(this.d3Scale.domain(t),this):this.d3Scale.domain()},e.prototype.range=function(t){if(!arguments.length){if(this.d3Scale.rangeRoundBands)return this.d3Scale.rangeExtent();if(this.d3Scale.rangeRound)return this.d3Scale.range()}return this.d3Scale.rangeRoundBands?this.d3Scale.rangeRoundBands(t,.1):this.d3Scale.rangeRound&&this.d3Scale.range(t),this},e.prototype.invert=function(t){return this.d3Scale.invert(t)},e.prototype.guideTarget=function(t){return this._guideElement=n.select(t).attr("class",this._class),this},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this.svg=n.append("g"),this.svgAxis=this.svg.append("g").attr("class","axis"),this.svgGuides=(this._guideElement||n).append("g").attr("class","guide")},e.prototype.updateScale=function(){var t=this;switch(this.type()){case"ordinal":this.d3Scale=n.scaleBand().paddingInner(this.ordinalPaddingInner()).paddingOuter(this.ordinalPaddingOuter()),this.ordinals_exists()&&this.d3Scale.domain(this.ordinals()),this.parser=null,this.formatter=null;break;case"linear":this.d3Scale=n.scaleLinear(),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=null,this.formatter=this.tickFormat_exists()?n.format(this.tickFormat()):null;break;case"pow":this.d3Scale=n.scalePow().exponent(this.powExponent()),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=null,this.formatter=this.tickFormat_exists()?n.format(this.tickFormat()):null;break;case"log":this.d3Scale=n.scaleLog().base(this.logBase()),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=null,this.formatter=this.tickFormat_exists()?n.format(this.tickFormat()):null;break;case"time":this.d3Scale=n.scaleTime(),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=this.timePattern_exists()?n.timeParse(this.timePattern()):null,this.parserInvert=this.timePattern_exists()?n.timeFormat(this.timePattern()):null,this.formatter=this.tickFormat_exists()?n.timeFormat(this.tickFormat()):null}if(this._prevOrientation!==this.orientation()){switch(this.orientation()){case"left":this.d3Axis=St(this.d3Scale),this.d3Guides=St(this.d3Scale);break;case"top":this.d3Axis=bt(this.d3Scale),this.d3Guides=bt(this.d3Scale);break;case"right":this.d3Axis=wt(this.d3Scale),this.d3Guides=wt(this.d3Scale);break;case"bottom":default:this.d3Axis=kt(this.d3Scale),this.d3Guides=kt(this.d3Scale)}this._prevOrientation=this.orientation(),this.svgAxis&&this.svgAxis.html(""),this.svgGuides&&this.svgGuides.html("")}if(this.extend())switch(this.type()){case"ordinal":break;default:var e,i=void 0,o=void 0,r=void 0,a=void 0,s=void 0;this.isHorizontal()?(e=this.width(),this.d3Scale.range([0,e]),i=e*this.extend()/100,o=this.d3Scale.invert(0),a=this.d3Scale.invert(-i),r=this.d3Scale.invert(e),s=this.d3Scale.invert(e+i)):(e=this.height(),this.d3Scale.range([e,0]),i=e*this.extend()/100,o=this.d3Scale.invert(e),a=this.d3Scale.invert(e+i),r=this.d3Scale.invert(0),s=this.d3Scale.invert(-i)),a===o&&(a=o-o*this.extend()/100),s===r&&(s=r+r*this.extend()/100),Math.sign(o)!==Math.sign(a)&&(a=0),Math.sign(r)!==Math.sign(s)&&(s=0),this.d3Scale.domain([a,s])}this.d3Axis.scale(this.d3Scale).tickFormat(this.formatter).ticks(this.tickCount()),this.d3Guides.scale(this.d3Scale).tickSize(this.tickLength_exists()?-this.tickLength():0).tickFormat("").ticks(this.tickCount());var l=this.ticks();return l.length&&(this.d3Axis.tickValues(l.map(function(e){return t.parse(e.value)})).tickFormat(function(t,e){return l[e].label}),this.d3Guides.tickValues(l.map(function(e){return t.parse(e.value)}))),this},e.prototype.adjustText=function(t,e){var i=this.isHorizontal(),o="left"===this.orientation(),r="bottom"===this.orientation(),a=this;if("linebreak"===this.overlapMode())"ordinal"===this.type()&&t.selectAll(".tick > text").call(function(){return a.linebreak.apply(a,arguments)},this.bandwidth());else if("wrap"===this.overlapMode())"ordinal"===this.type()&&t.selectAll(".tick > text").call(function(){return a.wrap.apply(a,arguments)},this.bandwidth());else switch(i?this.overlapMode():"none"){case"stagger":t.selectAll(".tick > text").style("text-anchor","middle").attr("dy",function(t,n){return(r?1:-1)*((r?.71:0)+n%e)+"em"}).attr("dx",0).attr("visibility",null).attr("transform","rotate(0)");break;case"hide":t.selectAll(".tick > text").style("text-anchor","middle").attr("dy",(r?.71:0)+"em").attr("dx",0).attr("visibility",function(t,n){return n%e?"hidden":null}).attr("transform","rotate(0)");break;case"rotate":var s=-this.labelRotation()||0;if(0!==s&&e>1){t.selectAll(".tick > text").each(function(){var t=n.select(this),e=t.node().getBBox(),i=(r?1:-1)*Math.sin(Math.PI*(-Math.abs(s)/180));t.style("text-anchor",s>0?r?"start":"end":r?"end":"start").attr("dy",e.height/2*i+"px").attr("dx",s>0?r?"0.71em":"-0.71em":r?"-0.71em":"0.71em").attr("transform","rotate("+s+")").attr("visibility",null)});break}default:t.selectAll(".tick > text").style("text-anchor",i?"middle":o?"end":"start").attr("dy",i?(r?.71:0)+"em":"0.32em").attr("dx",0).attr("visibility",null).attr("transform","rotate(0)")}},e.prototype.calcTickOverlapModulus=function(t){var e=1;switch(this.overlapMode()){case"rotate":case"stagger":case"hide":var n=[];t.selectAll(".tick > text").each(function(){for(var t=this.getBoundingClientRect(),i=n.length-1;i>=0&&!(n[i].right<t.left);--i)n.length+1-i>e&&(e=n.length+1-i);n.push(t)})}return e},e.prototype.calcOverflow=function(t,e){if(this.updateScale(),this.hidden())return{left:0,top:0,right:0,bottom:0,depth:0,tickOverlapModulus:1};var n=this.isHorizontal();this.range(n?[0,this.width()]:[this.height(),0]);var i=t.append("g").attr("class",this.classID()),o=i.append("g");o.attr("class",n?"x":"y").call(this.d3Axis),e&&t.selectAll(".tick > text").remove();var r={left:0,top:0,right:0,bottom:0,depth:0,tickOverlapModulus:this.calcTickOverlapModulus(o)};this.adjustText(o,r.tickOverlapModulus);var a=o.node().getBBox();switch(r.depth=n?a.height:a.width,this.shrinkToFit()){case"low":case"both":r.left=n?-a.x:0,r.bottom=n?0:-(this.height()-(a.height+a.y))}switch(this.shrinkToFit()){case"high":case"both":r.top=n?0:-a.y,r.right=n?-(this.width()-a.x-a.width):0}return i.remove(),r},e.prototype.wrap=function(t,e,i){i=i||/\s+/;var o=this;t.each(function(){for(var t=n.select(this),r=t.text().split(i).reverse(),a=[],s=0,l=t.attr("x"),h=t.attr("y"),u=parseFloat(t.style("font-size"))||10,c=Math.floor(e/(1.1*u))-1,p=o.isHorizontal()?1:Math.ceil(r.length/c),d=parseFloat(t.attr("dy")),f=t.text(null).append("tspan").attr("x",l).attr("y",h).attr("dy",d+"em"),y=0,x=r.pop();x;)a.push(x),f.text(a.join(" ")),y++,f.node().getComputedTextLength()>e&&y>=p&&(a.pop(),f.text(a.join(" ")),a=[x],f=t.append("tspan").attr("x",l).attr("y",h).attr("dy",1.1*++s+d+"em").text(x),y=0),x=r.pop();o.isHorizontal()||t.selectAll("tspan").attr("y",-s/2+"em")})},e.prototype.linebreak=function(t,e){this.wrap(t,e,"\n")},e.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n),this.svg.style("display",this.hidden()?"none":null);var o=this.calcOverflow(n),r=this.isHorizontal()?o.left:this.height()-o.top-o.bottom,a=this.isHorizontal()?this.width()-o.right:0;this.range(this.reverse()?[a,r]:[r,a]);var s=this;function l(t){t.attr("transform",function(){switch(s.orientation()){case"left":return"translate("+o.depth+", "+o.top+")";case"top":return"translate(0,"+o.depth+")";case"right":return"translate("+(s.width()-o.depth)+", "+o.top+")";case"bottom":return"translate(0,"+(s.height()-o.depth)+")"}return"translate(0,0)"})}this.svg.style("visibility","none"===this.type()?"hidden":null).transition().call(l),this._guideElement&&this.svgGuides.transition().call(l),this.svgAxis.call(this.d3Axis),this.adjustText(this.svgAxis,o.tickOverlapModulus);this.pos().x;var h=this.width(),u=this.svgAxis.selectAll(".axisTitle").data(this.title()?[this.title()]:[]),c=u.enter().append("text").attr("class","axisTitle").merge(u);switch(this.orientation()){case"left":c.transition().attr("transform","rotate(-90)").attr("x",-2).attr("y",2).attr("dx",null).attr("dy",".71em").style("text-anchor","end").text(this.title());break;case"right":c.transition().attr("transform","rotate(-90)").attr("x",-2).attr("y",4).attr("dx",null).attr("dy","-.71em").style("text-anchor","end").text(this.title());break;case"top":c.transition().attr("transform","rotate(0)").attr("x",h-2).attr("y",2).attr("dx",null).attr("dy",".71em").style("text-anchor","end").text(this.title());break;case"bottom":c.transition().attr("transform","rotate(0)").attr("x",h-2).attr("y",-2).attr("dx",null).attr("dy",null).style("text-anchor","end").text(this.title())}u.exit().remove(),this.svgGuides.call(this.d3Guides).selectAll(".tick").classed("guide-0",function(t){return 0===t&&i.low()<0})},e.prototype.rerender=function(){this.svgAxis.call(this.d3Axis),this.svgGuides.call(this.d3Guides)},e.prototype.postUpdate=function(e,n){t.prototype.postUpdate.call(this,e,n),this._guideElement&&this._guideElement.attr("transform",this._element.attr("transform"))},a([n.publish("linear","set","Type",["none","ordinal","linear","pow","log","time"]),s("design:type",String)],e.prototype,"_type",void 0),a([n.publish("%Y-%m-%d","string","Time Series Pattern",null,{disable:function(t){return"time"!==t.type()}}),s("design:type",String)],e.prototype,"_timePattern",void 0),a([n.publish(!1,"boolean","Reverse"),s("design:type",Function)],e.prototype,"reverse",void 0),e}(n.SVGWidget);Mt.prototype._class+=" chart_Axis",Mt.prototype.publish("title","","string","Title"),Mt.prototype.publish("orientation","bottom","set","Placement/orientation of the axis",["left","top","right","bottom"]),Mt.prototype.publish("powExponent",2,"number","Power exponent (disabled when type is not 'pow')",null,{disable:function(t){return"pow"!==t.type()}}),Mt.prototype.publish("logBase",10,"number","Logarithmic base (disabled when type is not 'log')",null,{disable:function(t){return"log"!==t.type()}}),Mt.prototype.publish("ordinals",[],"array","Array of ordinal values to display (disabled when type is not 'ordinal')",null,{disable:function(t){return"ordinal"!==t.type()}}),Mt.prototype.publish("tickCount",null,"number","Number of ticks to display (disabled when type is 'ordinal')",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),Mt.prototype.publish("tickFormat",null,"string","Format rules for tick text (disabled when type is 'ordinal')",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),Mt.prototype.publish("tickLength",null,"number","Height (or width for left/right orientations) of the axis ticks (in pixels)",null,{optional:!0}),Mt.prototype.publish("ticks",[],"array","Custom tick labels",null,{optional:!0}),Mt.prototype.publish("low",null,"any","Minimum tick value (disabled when type is ordinal)",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),Mt.prototype.publish("high",null,"any","Maximum tick value (disabled when type is ordinal)",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),Mt.prototype.publish("overlapMode","none","set","Specifies the behavior when tick labels overlap",["none","stagger","hide","rotate","linebreak","wrap"]),Mt.prototype.publish("labelRotation",33,"number","Angle of rotation for tick labels (disabled when overlapMode is not 'rotate')",null,{optional:!0,disable:function(t){return"rotate"!==t.overlapMode()}}),Mt.prototype.publish("shrinkToFit","both","set","shrinkToFit",["none","low","high","both"]),Mt.prototype.publish("extend",5,"number","Extend the axis range by this % beyond what is needed to display the data (disabled when type is 'ordinal')",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),Mt.prototype.publish("hidden",!1,"boolean","Hides axis when 'true'"),Mt.prototype.publish("ordinalPaddingInner",.1,"number","Determines the ratio of the range that is reserved for blank space between band (0->1)",null,{disable:function(t){return"ordinal"!==t.type()}}),Mt.prototype.publish("ordinalPaddingOuter",.1,"number","Determines the ratio of the range that is reserved for blank space before the first band and after the last band (0->1)",null,{disable:function(t){return"ordinal"!==t.type()}});At(".chart_XYAxis .axis {\r\n  fill: black;\r\n  font: 10px sans-serif;\r\n}\r\n\r\n.chart_XYAxis .tick > text {\r\n  font: 10px sans-serif;\r\n}\r\n\r\n.chart_XYAxis .focus .chart_Axis.value .tick {\r\n  visibility:hidden;\r\n}\r\n\r\n.chart_XYAxis .axis path,\r\n.chart_XYAxis .axis line {\r\n  fill: none;\r\n  stroke: #000;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.chart_XYAxis .region {\r\n  opacity: 0.33;\r\n}\r\n\r\n.chart_XYAxis .brush rect.background {\r\n  z-index: -999;\r\n}\r\n\r\n.chart_XYAxis .brush .selection {\r\n  stroke: steelblue;\r\n  stroke-opacity: 1;\r\n  stroke-width: 1px;\r\n  fill: steelblue;\r\n  fill-opacity: .125;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.chart_XYAxis .brush path.handle--custom {\r\n    fill: #eee;\r\n    stroke: #666;\r\n}\r\n");var Pt=function(t){function e(){var e=t.call(this)||this;return e._skipSelection=!1,n.Utility.SimpleSelectionMixin.call(e),e._drawStartPos="origin",e.domainAxis=(new Mt).classed({domain:!0}).orientation_default("bottom").type("ordinal").overlapMode_default("stagger").shrinkToFit_default("high").extend_default(0),e.valueAxis=(new Mt).classed({value:!0}).orientation_default("left").type("linear").shrinkToFit_default("high"),e.xyBrush=n.brush().on("end",function(){return e.brushMoved()}).on("start.handle brush.handle end.handle",function(){return e.brushMoved2()}),e.xBrush=n.brushX().on("end",function(){return e.brushMoved()}).on("start.handle brush.handle end.handle",function(){return e.brushMoved2()}),e.yBrush=n.brushY().on("end",function(){return e.brushMoved()}).on("start.handle brush.handle end.handle",function(){return e.brushMoved2()}),e}return r(e,t),e.prototype.resetSelection=function(){return this._prevBrush=null,this},e.prototype.parseData=function(t){return this.domainAxis.parse(t)},e.prototype.parseValue=function(t){return this.valueAxis.parse(t,!0)},e.prototype.formatData=function(t){return this.domainAxis.format(t)},e.prototype.formatValue=function(t){return this.valueAxis.format(t)},e.prototype.parsedData=function(){return this.data().map(function(t){var e=0;return t.map(function(t,n){if(0===n)return this.parseData(t);if(n>=this.columns().length)return t;var i=this.yAxisStacked()?[e,e+this.parseValue(t)]:this.parseValue(t);return e+=this.parseValue(t),i},this)},this)},e.prototype.bandwidth=function(){return this.domainAxis.bandwidth()},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this.svg=n.append("g"),this.svgRegions=n.append("g"),this.svgDomainGuide=this.svg.append("g"),this.svgValueGuide=this.svg.append("g"),this.svgData=this.svg.append("g"),this.svgDataClipRect=this.svg.append("clipPath").attr("id",this.id()+"_clippath").append("rect").attr("x",0).attr("y",0),this.svgData=this.svg.append("g").attr("clip-path","url(#"+this.id()+"_clippath)"),this._selection.widgetElement(this.svgData),this.svgFocus=n.append("g"),this.domainAxis.target(this.svg.node()).guideTarget(this.svgDomainGuide.node()),this.valueAxis.target(this.svg.node()).guideTarget(this.svgValueGuide.node()),this.svgBrush=n.append("g").attr("class","brush"),this.chartsEnter(this,this.svgData,250)},e.prototype.resizeBrushHandle=function(t,e,n){var i,o,r;return"e"===t.type||"w"===t.type?"M"+.5*(o=(i=+("e"===t.type))?1:-1)+","+(r=n/3)+"A6,6 0 0 "+i+" "+6.5*o+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+i+" "+.5*o+","+2*r+"ZM"+2.5*o+","+(r+8)+"V"+(2*r-8)+"M"+4.5*o+","+(r+8)+"V"+(2*r-8):"M"+(o=e/3)+", "+.5*(r=(i=+("s"===t.type))?1:-1)+"A6,6 0 0 "+(i+1)%2+" "+(o+6)+","+6.5*r+"H"+(2*o-6)+"A6,6 0 0 "+(i+1)%2+" "+2*o+","+.5*r+"ZM"+(o+8)+","+2.5*r+"H"+(2*o-8)+"M"+(o+8)+","+4.5*r+"H"+(2*o-8)},e.prototype.skipSelection=function(t){return arguments.length?(this._skipSelection=t,this):this._skipSelection},e.prototype.brushMoved=function(){if(!this._skipSelection){var t=[],e=this,i=n.brushSelection(this.svgBrush.node());i&&(t=this.data().filter(function(t){var n=e.dataPos(t[0]);if(e.use2dSelection()){var o=e.valuePos(t[1])+e.valueAxis.bandwidth()/2;return n>=i[0][0]&&n<=i[1][0]&&o>=i[0][1]&&o<=i[1][1]}return n>=i[0]&&n<=i[1]})),this.selection(t)}},e.prototype.brushMoved2=function(){var t="horizontal"===this.orientation(),e=this.use2dSelection()?[]:t?[{type:"w"},{type:"e"}]:[{type:"n"},{type:"s"}],i=this.svgBrush.selectAll(".handle--custom").data(e),o=n.event.selection;null==o?i.attr("display","none"):t?i.attr("display",null).attr("transform",function(t,e){return"translate("+o[e]+",0)"}):i.attr("display",null).attr("transform",function(t,e){return"translate(0, "+o[e]+")"})},e.prototype.dataPos=function(t){return this.domainAxis.scalePos(t)},e.prototype.valuePos=function(t){return this.valueAxis.scalePos(t)},e.prototype.getAxisSize=function(t){return{width:this.xAxis?this.xAxis.width():t.xAxis.width(),height:this.yAxis?this.yAxis.height():t.yAxis.width()}},e.prototype.calcMargin=function(t,e,n){for(var i={top:!n&&this.selectionMode()?10:2,right:n&&(this.selectionMode()||this.xAxisFocus())?10:2,bottom:(this.xAxisFocus()?this.xAxisFocusHeight():0)+2,left:2},o=this.width()-i.left-i.right,r=this.height()-i.top-i.bottom,a=0,s=30,l=0,h=30,u=0;u<10;++u){this.xAxis.width(o-h).height(0);var c=this.xAxis.calcOverflow(e),p=c.depth;this.yAxis.width(0).height(r-s);var d=this.yAxis.calcOverflow(e),f=d.depth;if(a=c.right,l=d.top,p===s&&f===h)break;s=p,h=f}return this.xAxis.x(o/2+h/2+i.left).y(r+i.top).width(o-h),this.yAxis.x(i.left).y(r/2-s/2+i.top).height(r-s),i.left+=h,i.top+=l,i.right+=a,i.bottom+=s,i},e.prototype.updateRegions=function(t,e,i){var o=this,r=this.svgRegions.selectAll(".region").data(this.regions());r.enter().append("rect").attr("class","region"),i?r.attr("x",function(t){return o.dataPos(t.x0)}).attr("y",0).attr("width",function(t){return o.dataPos(t.x1)-o.dataPos(t.x0)}).attr("height",this.height()).style("stroke",function(t){return o._palette(t.colorID)}).style("fill",function(t){return n.hsl(o._palette(t.colorID)).brighter()}):r.attr("x",0).attr("y",function(t){return o.dataPos(t.x0)}).attr("width",this.width()).attr("height",function(t){return o.dataPos(t.x0)-o.dataPos(t.x1)}).style("stroke",function(t){return o._palette(t.colorID)}).style("fill",function(t){return n.hsl(o._palette(t.colorID)).brighter()}),r.exit().remove()},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i);var o=this,r="horizontal"===this.orientation();switch(this.updateRegions(e,i,r),this.domainAxis.orientation(r?"bottom":"left").title(this.columns()[0]),this.valueAxis.orientation(r?"left":"bottom"),this.xAxis=r?this.domainAxis:this.valueAxis,this.yAxis=r?this.valueAxis:this.domainAxis,this.xAxisType()){case"ordinal":this.domainAxis.ordinals(this.data().map(function(t){return t[0]}));break;default:var a=this.xAxisDomainLow()?this.xAxisDomainLow():this.domainAxis.parseInvert(n.min(this.parsedData(),function(t){return t[0]})),s=this.xAxisDomainHigh()?this.xAxisDomainHigh():this.domainAxis.parseInvert(n.max(this.parsedData(),function(t){return t[0]}));void 0!==a&&void 0!==s&&this.domainAxis.low(a).high(s)}var l=this.yAxisDomainLow()?this.yAxisDomainLow():this.valueAxis.parseInvert(n.min(this.parsedData(),function(t){return n.min(t.filter(function(t,e){return e>0&&o.columns()[e]&&0!==o.columns()[e].indexOf("__")&&null!==t}),function(t){return t instanceof Array?t[0]:t})})),h=this.yAxisDomainHigh()?this.yAxisDomainHigh():this.valueAxis.parseInvert(n.max(this.parsedData(),function(t){return n.max(t.filter(function(t,e){return e>0&&o.columns()[e]&&0!==o.columns()[e].indexOf("__")&&null!==t}),function(t){return t instanceof Array?t[1]:t})}));this.valueAxis.low(l).high(h),this.margin=this.calcMargin(e,i,r);var u=this.width()-this.margin.left-this.margin.right;u<0&&(u=0);var c=this.height()-this.margin.top-this.margin.bottom;c<0&&(c=0);var p=r?u:c,d=r?c:u;if(this.domainAxis.tickLength(this.xAxisGuideLines()?d:0).render(),this.valueAxis.tickLength(this.yAxisGuideLines()?p:0).render(),this.svgDataClipRect.attr("width",u).attr("height",c),this.svgData.transition().attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.updateBrush(u,c,p,r),this.updateFocusChart(e,i,this.margin,u,c,r),this.chartsUpdate(u,c,250),this.selectionMode())return this.brushMoved()},e.prototype.updateBrush=function(t,e,i,o){var r=this,a=this.use2dSelection()?this.xyBrush:o?this.xBrush:this.yBrush,s=n.brushSelection(this.svgBrush.node());a.extent([[0,0],[t,e]]),this.svgBrush.attr("transform","translate("+this.margin.left+", "+this.margin.top+")").style("display",this.selectionMode()?null:"none").call(a);var l=this.use2dSelection()?[]:o?[{type:"w"},{type:"e"}]:[{type:"n"},{type:"s"}],h=this.svgBrush.selectAll(".handle--custom").data(l);if(h.enter().append("path").attr("class","handle--custom").merge(h).attr("cursor",o?"ew-resize":"ns-resize").attr("d",function(n){return r.resizeBrushHandle(n,t,e)}),this.selectionMode()){if(this._prevXAxisType!==this.xAxisType()&&(this._prevXAxisType=this.xAxisType(),this._prevBrush=null),this._prevBrush){if(s){if(this._prevBrush.orientation!==this.orientation()){var u=s[0];s[0]=this._prevBrush.maxCurrExtent-s[1],s[1]=this._prevBrush.maxCurrExtent-u}var c=i/this._prevBrush.maxCurrExtent;1!==c&&this.svgBrush.transition().on("start",function(){a.on("end",null)}).call(a.move,[s[0]*c,s[1]*c]).on("end",function(){a.on("end",function(){return r.brushMoved()})})}}else this.svgBrush.call(a.move,[0,i]);this._prevBrush={orientation:this.orientation(),maxCurrExtent:i}}},e.prototype.updateFocusChart=function(t,e,n,i,o,r){var a=this,s=this.svgFocus.selectAll("#"+this.id()+"_focusChart").data(this.xAxisFocus()?[!0]:[]);s.enter().append("g").attr("id",this.id()+"_focusChart").attr("class","focus").each(function(){a.focusChart=(new a.constructor).target(this),a.focusChart.xBrush.on("brush.focus",function(){a.syncAxis(i),a.chartsUpdate(i,o,0)}),a.focusChart.layers(a.layers().map(function(t){return new t.constructor}))}).merge(s).each(function(){a.copyPropsTo(a.focusChart,["layers"]);for(var t=0,e=0,n=a.layers();e<n.length;e++){n[e].copyPropsTo(a.focusChart.layers()[t]),t++}a.focusChart.xAxisFocus(!1).selectionMode(!0).skipSelection(!0).orientation("horizontal").xAxisGuideLines(!1).xAxisDomainLow(null).xAxisDomainHigh(null).yAxisGuideLines(!1).x(a.width()/2).y(a.height()-a.xAxisFocusHeight()/2).width(a.width()).height(a.xAxisFocusHeight()).columns(a.columns()).data(a.data()).render(),a.syncAxis(i)}),s.exit().each(function(){a.focusChart&&(a.focusChart.target(null),delete a.focusChart)}).remove()},e.prototype.syncAxis=function(t){var e=n.brushSelection(this.focusChart.svgBrush.node());if(e){if("ordinal"!==this.focusChart.xAxisType())console.log(JSON.stringify([this.focusChart.xAxis.invert(e[0]),this.focusChart.xAxis.invert(e[1])])),this.xAxis.domain([this.focusChart.xAxis.invert(e[0]),this.focusChart.xAxis.invert(e[1])]);else{var i=(e[1]-e[0])/t;this.xAxis.range([-e[0]/i,(t-e[0])/i])}this.xAxis.rerender()}},e.prototype.layerColumns=function(e){var n=e.columns(),i=t.prototype.columns.call(this).filter(function(t){return t!==n[0]});return i.length?[n[0]].concat(i):n},e.prototype.layerColumnIndices=function(t){var e=t.columns();return this.layerColumns(t).map(function(t){return e.indexOf(t)})},e.prototype.layerColumnIndex=function(t,e){return t.columns().indexOf(e)},e.prototype.layerData=function(t){if(1===arguments.length){var e=this.layerColumnIndices(t);return t.data().map(function(t){var n=e.map(function(e){return t[e]});return n.__hpcc_origRow=t,n})}throw new Error("Setting data on XYAxisLayer is not supported.")},e.prototype.layerEnter=function(t,e,n){void 0===n&&(n=250)},e.prototype.layerUpdate=function(t,e,n){void 0===n&&(n=250)},e.prototype.layerExit=function(t,e,n){void 0===n&&(n=250)},e.prototype.chartsEnter=function(t,e,n){void 0===n&&(n=250),this.layerEnter(this,e,n);for(var i=0,o=this.layers();i<o.length;i++){var r=o[i];r.__xyAxisElement=e.append("g").attr("class",r.class()),r.target(r.__xyAxisElement.node()).layerEnter(this,e,n)}},e.prototype.chartsUpdate=function(t,e,n){this.layerUpdate(this,this.svgData,n);for(var i=0,o=this.layers();i<o.length;i++){var r=o[i];r.resize({width:t,height:e}).layerUpdate(this,r.__xyAxisElement,n)}},e.prototype.exit=function(e,n){this.valueAxis.target(null),this.domainAxis.target(null),t.prototype.exit.call(this,e,n)},e.prototype.selection=function(t){var e=this,i=this;this._selection.widgetElement().selectAll(".selected,.deselected").each(function(e){var o=t.indexOf(e.origRow)>=0;n.select(this).classed("selected",o).classed("deselected",!o).attr("filter",i._selection.svgGlowID()&&o?"url(#"+i._selection.svgGlowID()+")":null)});var o=t.map(function(t){return e.rowToObj(t)});setTimeout(function(){e.click(o,"",!0)},0)},e.prototype.click=function(t,e,n){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+n)},a([n.publish("horizontal","set","Selects orientation for the axis",["horizontal","vertical"]),s("design:type",Function)],e.prototype,"orientation",void 0),a([n.publish(null,"string","pointSizeColumn"),s("design:type",Function)],e.prototype,"pointSizeColumn",void 0),a([n.publish(6,"number","minPointSize"),s("design:type",Function)],e.prototype,"minPointSize",void 0),a([n.publish(26,"number","maxPointSize"),s("design:type",Function)],e.prototype,"maxPointSize",void 0),a([n.publish(!1,"boolean","2D Range Selector"),s("design:type",Function)],e.prototype,"use2dSelection",void 0),a([n.publish(!1,"boolean","Range Selector"),s("design:type",Function)],e.prototype,"selectionMode",void 0),a([n.publishProxy("domainAxis","tickCount"),s("design:type",Function)],e.prototype,"xAxisTickCount",void 0),a([n.publishProxy("domainAxis","tickFormat"),s("design:type",Function)],e.prototype,"xAxisTickFormat",void 0),a([n.publishProxy("domainAxis","type"),s("design:type",Function)],e.prototype,"xAxisType",void 0),a([n.publishProxy("domainAxis","timePattern"),s("design:type",Function)],e.prototype,"xAxisTypeTimePattern",void 0),a([n.publish(null,"string","X-Axis Low",null,{optional:!0,disable:function(t){return"ordinal"===t.xAxisType()}}),s("design:type",Function)],e.prototype,"xAxisDomainLow",void 0),a([n.publish(null,"string","X-Axis High",null,{optional:!0,disable:function(t){return"ordinal"===t.xAxisType()}}),s("design:type",Function)],e.prototype,"xAxisDomainHigh",void 0),a([n.publishProxy("domainAxis","ordinalPaddingInner"),s("design:type",Function)],e.prototype,"xAxisOrdinalPaddingInner",void 0),a([n.publishProxy("domainAxis","ordinalPaddingOuter"),s("design:type",Function)],e.prototype,"xAxisOrdinalPaddingOuter",void 0),a([n.publishProxy("domainAxis","overlapMode"),s("design:type",Function)],e.prototype,"xAxisOverlapMode",void 0),a([n.publishProxy("domainAxis","labelRotation"),s("design:type",Function)],e.prototype,"xAxisLabelRotation",void 0),a([n.publishProxy("domainAxis","extend"),s("design:type",Function)],e.prototype,"xAxisDomainPadding",void 0),a([n.publish(!1,"boolean","Y-Axis Guide Lines"),s("design:type",Function)],e.prototype,"xAxisGuideLines",void 0),a([n.publish(!1,"boolean","X-Axis Focus",null,{disable:function(t){return"horizontal"!==t.orientation()}}),s("design:type",Function)],e.prototype,"xAxisFocus",void 0),a([n.publish(80,"number","X-Axis Focus Height",null,{disable:function(t){return!t.xAxisFocus()}}),s("design:type",Function)],e.prototype,"xAxisFocusHeight",void 0),a([n.publishProxy("domainAxis","hidden"),s("design:type",Function)],e.prototype,"xAxisHidden",void 0),a([n.publishProxy("valueAxis","title"),s("design:type",Function)],e.prototype,"yAxisTitle",void 0),a([n.publishProxy("valueAxis","tickCount"),s("design:type",Function)],e.prototype,"yAxisTickCount",void 0),a([n.publishProxy("valueAxis","tickFormat"),s("design:type",Function)],e.prototype,"yAxisTickFormat",void 0),a([n.publishProxy("valueAxis","type"),s("design:type",Function)],e.prototype,"yAxisType",void 0),a([n.publishProxy("valueAxis","timePattern"),s("design:type",Function)],e.prototype,"yAxisTypeTimePattern",void 0),a([n.publishProxy("valueAxis","powExponent"),s("design:type",Function)],e.prototype,"yAxisTypePowExponent",void 0),a([n.publish(!1,"boolean","Stacked Chart",null,{tags:["Basic"],disable:function(t){return"ordinal"!==t.xAxisType()||t._class.indexOf("chart_Column")<0}}),s("design:type",Function)],e.prototype,"yAxisStacked",void 0),a([n.publish(null,"string","Y-Axis Low",null,{optional:!0,disable:function(t){return"ordinal"===t.yAxisType()}}),s("design:type",Function)],e.prototype,"yAxisDomainLow",void 0),a([n.publish(null,"string","Y-Axis High",null,{optional:!0,disable:function(t){return"ordinal"===t.yAxisType()}}),s("design:type",Function)],e.prototype,"yAxisDomainHigh",void 0),a([n.publishProxy("valueAxis","extend"),s("design:type",Function)],e.prototype,"yAxisDomainPadding",void 0),a([n.publish(!0,"boolean","Y-Axis Guide Lines"),s("design:type",Function)],e.prototype,"yAxisGuideLines",void 0),a([n.publishProxy("valueAxis","hidden"),s("design:type",Function)],e.prototype,"yAxisHidden",void 0),a([n.publish([],"array","Regions"),s("design:type",Function)],e.prototype,"regions",void 0),a([n.publish([],"widgetArray","Layers",null,{render:!1}),s("design:type",Function)],e.prototype,"layers",void 0),e}(n.SVGWidget);Pt.prototype._class+=" chart_XYAxis",Pt.prototype.mixin(n.Utility.SimpleSelectionMixin);At(".chart_Scatter .pointShape,\r\n.chart_Scatter .line,\r\n.chart_Scatter .area {\r\n    pointer-events: none;\r\n}\r\n\r\n.chart_Scatter .point .pointSelection {\r\n    fill: none;\r\n    stroke: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.chart_Scatter .point .pointSelection.selected {\r\n    fill: none;\r\n    stroke: red;\r\n}\r\n");var Tt=function(t){function i(){var n=t.call(this)||this;return e.INDChart.call(n),e.ITooltip.call(n),n.xAxisGuideLines_default(!0).yAxisGuideLines_default(!0),n}return r(i,t),i.prototype.xPos=function(t,e){return"horizontal"===t.orientation()?t.dataPos(e.label):t.valuePos(e.value)},i.prototype.yPos=function(t,e){return"horizontal"===t.orientation()?t.valuePos(e.value):t.dataPos(e.label)},i.prototype.curve=function(){switch(this.interpolate()){case"linear":return j;case"step":return st;case"step-before":return lt;case"step-after":return ht;case"basis":return V;case"bundle":return W;case"cardinal":return Y;case"catmullRom":return Z;case"natural":return rt;case"monotone":default:return nt}},i.prototype.getScale=function(){switch(this.pointSizeScale()){case"linear":return n.scaleLinear();case"pow":return n.scalePow().exponent(2);case"log":return n.scaleLog();case"sqrt":return n.scaleSqrt()}},i.prototype.pointColor=function(t,e,n){return this.interpolate()&&this.pointDarken()?this.strokeColor(t,e,n):this.fillColor(t,e,n)},i.prototype.lineColor=function(t,e,n){return this.interpolateFill()&&this.interpolateDarken()?this.strokeColor(t,e,n):this.fillColor(t,e,n)},i.prototype.areaColor=function(t,e,n){return this.fillColor(t,e,n)},i.prototype.layerEnter=function(e,n,i){void 0===i&&(i=250),t.prototype.layerEnter.call(this,e,n,i);var o=this;this.tooltipHTML(function(t){switch(o.tooltipStyle()){case"series-table":return o.tooltipFormat({label:t.label,arr:o.columns().slice(1).map(function(e,n){return{label:e,color:o._palette(e),value:o.data()[t.rowIdx][n+1]}})});default:return o.tooltipFormat({label:t.label,series:t.column,value:t.value})}})},i.prototype.layerUpdate=function(e,i,o){var r=this;void 0===o&&(o=250),t.prototype.layerUpdate.call(this,e,i);var a,s,l,h="horizontal"===e.orientation(),u=h?this.height():this.width(),c=this;this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._prevPointShape!==this.pointShape()&&(i.selectAll(".data").remove(),this._prevPointShape=this.pointShape()),null!==this.pointSizeColumn()&&(a=this.columns().indexOf(this.pointSizeColumn()),s=n.extent(this.data(),function(t){return t[a]}),l=this.getScale().domain(s));var f=this.layerColumns(e),y=this.layerData(e),x=this.flattenData(f,y).map(function(t){return t.shape=function(t){switch(t){case"rectangle":return"rect";case"circle":return"circle";case"cross":return"path"}}(c.pointShape()),t.column=f[t.colIdx],t.row=y[t.rowIdx],t.origRow=y[t.rowIdx].__hpcc_origRow,s?(t.size=l(t.row[a])*(c.maxPointSize()-c.minPointSize())+c.minPointSize(),t.column!==c.pointSizeColumn()&&t):(t.size=c.pointSize(),t)}).filter(function(t){return t}),_=i.selectAll(".point").data(x,function(t,e){return t.shape+"_"+e});_.enter().append("g").each(function(t){var i=n.select(this);i.append("text").attr("class","pointValue").style("display","none").attr("text-anchor",c.valueAnchor()).attr("alignment-baseline",c.valueBaseline()),i.append("circle").attr("class","pointSelection").on("mouseout.tooltip",c.tooltip.hide).on("mousemove.tooltip",c.tooltip.show).call(e._selection.enter.bind(e._selection)).on("click",function(t,n){c.click(e.rowToObj(e.data()[t.rowIdx]),t.column,e._selection.selected(this))}).on("dblclick",function(t,n){c.dblclick(e.rowToObj(e.data()[t.rowIdx]),t.column,e._selection.selected(this))}),i.append(t.shape).attr("class","pointShape")}).merge(_).attr("class",function(t){return"point series series-"+r.cssTag(t.column)}).each(function(t){n.select(this).select(".pointValue").attr("x",function(t){return c.xPos(e,t)}).attr("y",function(t){return c.yPos(e,t)}).style("display",c.showValue()?"block":"none").attr("text-anchor",c.valueAnchor()).attr("alignment-baseline",c.valueBaseline()).text(function(t){return t.value}),n.select(this).select(".pointSelection").attr("cx",function(t){return c.xPos(e,t)}).attr("cy",function(t){return c.yPos(e,t)}).attr("r",t.size);var i=n.select(this).select(".pointShape");switch(t.shape){case"rect":i.attr("x",function(n){return c.xPos(e,n)-t.size/2}).attr("y",function(n){return c.yPos(e,n)-t.size/2}).attr("width",t.size).attr("height",t.size).style("fill",c.pointColor(t.row,t.column,t.value));break;case"circle":i.attr("cx",function(t){return c.xPos(e,t)}).attr("cy",function(t){return c.yPos(e,t)}).attr("r",.9*t.size).style("fill",c.pointColor(t.row,t.column,t.value));break;case"path":i.attr("d",function(n){return"M"+(c.xPos(e,n)-t.size/2)+" "+(c.yPos(e,n)-t.size/2)+" L"+(c.xPos(e,n)+t.size/2)+" "+(c.yPos(e,n)+t.size/2)+" M"+(c.xPos(e,n)-t.size/2)+" "+(c.yPos(e,n)+t.size/2)+" L"+(c.xPos(e,n)+t.size/2)+" "+(c.yPos(e,n)-t.size/2)}).style("stroke",c.pointColor(t.row,t.column,t.value))}}),_.exit().remove();var m=i.selectAll(".area").data(f.filter(function(t,e){return c.interpolate()&&c.interpolateFill()&&e>0})),g=m.enter().append("path"),v=function(){var t=D,e=null,n=d(0),i=R,o=d(!0),r=null,a=j,s=null;function l(l){var h,u,c,d,f,y=l.length,x=!1,_=new Array(y),m=new Array(y);for(null==r&&(s=a(f=p())),h=0;h<=y;++h){if(!(h<y&&o(d=l[h],h,l))===x)if(x=!x)u=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),c=h-1;c>=u;--c)s.point(_[c],m[c]);s.lineEnd(),s.areaEnd()}x&&(_[h]=+t(d,h,l),m[h]=+n(d,h,l),s.point(e?+e(d,h,l):_[h],i?+i(d,h,l):m[h]))}if(f)return s=null,f+""||null}function h(){return E().defined(o).curve(a).context(r)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:d(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:d(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:d(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:d(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:d(+t),l):i},l.lineX0=l.lineY0=function(){return h().x(t).y(n)},l.lineY1=function(){return h().x(t).y(i)},l.lineX1=function(){return h().x(e).y(n)},l.defined=function(t){return arguments.length?(o="function"==typeof t?t:d(!!t),l):o},l.curve=function(t){return arguments.length?(a=t,null!=r&&(s=a(r)),l):a},l.context=function(t){return arguments.length?(null==t?r=s=null:s=a(r=t),l):r},l}().curve(this.curve());h?v.x(function(t){return c.xPos(e,t)}).y0(Math.min(u,this.yPos(e,{value:0}))).y1(function(t){return c.yPos(e,t)}):v.y(function(t){return c.yPos(e,t)}).x0(Math.max(0,this.xPos(e,{value:0}))).x1(function(t){return c.xPos(e,t)}),g.merge(m).attr("class",function(t){return"area series series-"+r.cssTag(t)}).each(function(t,e){n.select(this).attr("d",v(x.filter(function(t){return t.colIdx===e+1}))).style("opacity",c.interpolateFillOpacity()).style("stroke","none").style("fill",c.areaColor([],t,void 0))}),m.exit().remove();var b=i.selectAll(".line").data(f.filter(function(t,e){return c.interpolate()&&e>0})),w=b.enter().append("path"),k=E().x(function(t){return c.xPos(e,t)}).y(function(t){return c.yPos(e,t)}).curve(this.curve());w.merge(b).attr("class",function(t){return"line series series-"+r.cssTag(t)}).each(function(t,e){var i=n.select(this),o=x.filter(function(t){return t.colIdx===e+1});i.attr("d",k(o)).style("stroke",c.lineColor([],t,void 0)).style("fill","none")}),b.exit().remove()},i.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},i.__inputs=[{id:"label",type:"any"},{id:"values",type:"number",multi:!0}],i}(Pt);Tt.prototype._class+=" chart_Scatter",Tt.prototype.implements(e.INDChart.prototype),Tt.prototype.implements(e.ITooltip.prototype),Tt.prototype.publish("paletteID","default","set","Color palette for this widget",Tt.prototype._palette.switch(),{tags:["Basic","Shared"]}),Tt.prototype.publish("pointSizeScale","linear","set","pointSizeScale",["linear","pow","log","sqrt"]),Tt.prototype.publish("pointShape","cross","set","Shape of the data points",["circle","rectangle","cross"]),Tt.prototype.publish("pointSize",6,"number","Point Size",null,{range:{min:1,step:1,max:200}}),Tt.prototype.publish("interpolate","","set","Interpolate Data",["","linear","step","step-before","step-after","basis","bundle","cardinal","catmullRom","natural","monotone"]),Tt.prototype.publish("pointDarken",!0,"boolean","If true, and interpolate is set, then points will have a slightly darker color than their assigned palette color",null,{disable:function(t){return!t.interpolate()}}),Tt.prototype.publish("interpolateDarken",!0,"boolean","If true, and interpolateFill is true, then lines will have a slightly darker color than their assigned palette color",null,{disable:function(t){return!t.interpolateFill()}}),Tt.prototype.publish("interpolateFill",!1,"boolean","If true, the area between the line and zero will be filled"),Tt.prototype.publish("interpolateFillOpacity",.66,"number","Fill interpolation Opacity",null,{range:{min:0,step:.01,max:1}}),Tt.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),Tt.prototype.publish("showValue",!1,"boolean"),Tt.prototype.publish("valueAnchor","middle","set","text-anchor for shown value text",["start","middle","end"]),Tt.prototype.publish("valueBaseline","ideographic","set","alignment-baseline for shown value text",["auto","baseline","before-edge","text-before-edge","middle","central","after-edge","text-after-edge","ideographic","alphabetic","hanging","mathematical","inherit"]);var Ct=function(t){function e(){var e=t.call(this)||this;return e.interpolate_default("linear").interpolateFill_default(!0),e}return r(e,t),e}(Tt);Ct.prototype._class+=" chart_Area";At(".chart_Column .columnRect {\r\n  fill: steelblue;\r\n  cursor: pointer;\r\n}\r\n\r\n.chart_Column .data.axis path {\r\n  display: none;\r\n}\r\n\r\n.chart_Column .columnRect {\r\n    stroke: transparent;\r\n    border-width: 1.5px;\r\n}\r\n\r\n.chart_Column .columnRect.selected {\r\n    stroke: red;\r\n}\r\n");var It=function(t){function i(){var i=t.call(this)||this;return i.textLocal=n.local(),e.INDChart.call(i),e.ITooltip.call(i),i._linearGap=25,i}return r(i,t),i.prototype.layerEnter=function(e,n,i){void 0===i&&(i=250),t.prototype.layerEnter.call(this,e,n,i);var o=this;this.tooltipHTML(function(t){switch(o.tooltipStyle()){case"series-table":return o.tooltipFormat({label:t.row[0],arr:o.columns().slice(1).map(function(e,n){return{label:e,color:o._palette(e),value:t.row[n+1]}})});default:var n=t.row[t.idx];return n instanceof Array&&(n=n[1]-n[0]),o.tooltipFormat({label:t.row[0],series:o.layerColumns(e)[t.idx],value:n})}})},i.prototype.adjustedData=function(t){var e=this;return this.layerData(t).map(function(n){var i=0;return n.map(function(n,o){if(0===o)return n;if(o>=e.layerColumns(t).length)return n;var r=t.yAxisStacked()?[i,i+n]:n;return i+=n,r},e)},this)},i.prototype.layerUpdate=function(e,i,o){void 0===o&&(o=250),t.prototype.layerUpdate.call(this,e,i,o);var r="horizontal"===e.orientation(),a=this;this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id()));var s=10,l=0;switch(e.xAxisType()){case"ordinal":s=e.bandwidth(),l=-s/2;break;case"linear":case"time":s=Math.max(Math.abs(e.dataPos(2)-e.dataPos(1))*(100-this._linearGap)/100,s),l=-s/2}this.tooltip.direction(r?"n":"e");var h=n.scaleBand().domain(a.layerColumns(e).filter(function(t,e){return e>0})).rangeRound(r?[0,s]:[s,0]).paddingInner(this.xAxisSeriesPaddingInner()).paddingOuter(0),u=this.adjustedData(e),c=[],p=[];if(this.showValue()){var d=this.columns().length;switch(this.showValueAsPercent()){case"series":u.forEach(function(t){t.filter(function(t,e){return e>0&&e<d}).forEach(function(t,e){void 0===p[e+1]&&(p[e+1]=0),p[e+1]+=t})});break;case"domain":c=u.map(function(t){return t.filter(function(t,e){return e>0&&e<d}).reduce(function(t,e){return t+e},0)})}}var f=i.selectAll(".dataRow").data(this.adjustedData(e)),y=e.data(),x=this.getAxisSize(e);f.enter().append("g").attr("class","dataRow").merge(f).each(function(t,i){var u=n.select(this).selectAll(".dataCell").data(t.filter(function(t,n){return n<a.layerColumns(e).length}).map(function(n,o){return{column:a.layerColumns(e)[o],row:t,origRow:y[i],value:n,idx:o}}).filter(function(t){return null!==t.value&&t.idx>0}),function(t){return t.column}),d=u.enter().append("g").attr("class","dataCell").style("opacity",0).each(function(t){n.select(this).append("rect").attr("class","columnRect series series-"+a.cssTag(t.column)).call(e._selection.enter.bind(e._selection)).on("mouseout.tooltip",a.tooltip.hide).on("mousemove.tooltip",a.tooltip.show).on("click",function(t){a.click(e.rowToObj(t.origRow),t.column,e._selection.selected(this))}).on("dblclick",function(t){a.dblclick(e.rowToObj(t.origRow),t.column,e._selection.selected(this))})});d.transition().duration(o).style("opacity",1);var f=e.yAxisStacked()?s:h.bandwidth();d.merge(u).each(function(s){var u=n.select(this),d=e.dataPos(t[0])+(e.yAxisStacked()?0:h(s.column))+l,y=s.value instanceof Array?s.value[1]:s.value,_=s.origRow[s.idx];if(a.showValue())switch(a.showValueAsPercent()){case"series":_=n.format(a.showValueAsPercentFormat())(_/p[s.idx]);break;case"domain":_=n.format(a.showValueAsPercentFormat())(_/c[i]);break;case null:default:_=n.format(a.showValueFormat())(_)}var m=e.valuePos(y),g=e.valuePos(s.value instanceof Array?s.value[0]:0),v=Math.min(g,m),b=Math.abs(m-g);u.select("rect").transition().duration(o).attr(r?"x":"y",d).attr(r?"y":"x",v).attr(r?"width":"height",f).attr(r?"height":"width",b).style("fill",function(t){return a.fillColor(t.row,t.column,t.value)});var w=a.valueCentered(),k=u.selectAll(".dataText").data(a.showValue()?[""+y]:[]);k.enter().append("g").attr("class","dataText").each(function(t){a.textLocal.set(this,(new n.Text).target(this))}).merge(k).each(function(){var t=y>=0,e={x:0,y:0},n=a.textSize(_);e.x=d+f/2,e.y=d+f/2;var i,o=w||a.yAxisStacked();r?t?(i=v-12>=n.height,e.y=i?v-12:v+12):(i=x.height-(v+b+12)>=n.height,e.y=i?v+b+12:v+b-12):t?(i=x.width-(v+b+12)>=n.width,e.x=i?v+b+12:v+b-12):(i=v-12>=n.width,e.x=i?v-12:v+12);var l,h=a.showValue();o&&(r?((l=b>=n.height)&&(e.y+=t?b/2+12:-b/2-12),h=n.height<b||!a.yAxisStacked()):(l=b>=n.width,e.x+=l?t?-b/2-12:b/2+12:t?12:-12,h=n.width<b||!a.yAxisStacked()));var u=o&&l||!o&&!i;a.textLocal.get(this).pos(e).anchor(a.valueAnchor()?a.valueAnchor():r?"middle":"start").text(""+_).colorFill(u?a.textColor(s.row,s.column,s.value):null).visible(h).render()}),k.exit().each(function(t){a.textLocal.get(this).target(null)}).remove()}),u.exit().transition().duration(o).style("opacity",0).remove()}),f.exit().transition().duration(o).remove()},i.__inputs=[{id:"label",type:"string"},{id:"values",type:"number",multi:!0}],i}(Pt);It.prototype._class+=" chart_Column",It.prototype.implements(e.INDChart.prototype),It.prototype.implements(e.ITooltip.prototype),It.prototype.publish("paletteID","default","set","Color palette for this widget",function(){return It.prototype._palette.switch()},{tags:["Basic","Shared"]}),It.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),It.prototype.publish("showValue",!1,"boolean","Show Value in column"),It.prototype.publish("showValueFormat",".2s","string","D3 Format for Value",null,{disable:function(t){return!t.showValue()||!!t.showValueAsPercent()}}),It.prototype.publish("showValueAsPercent",null,"set","If showValue is true, optionally show value as a percentage by Series or Domain",[null,"series","domain"],{disable:function(t){return!t.showValue()},optional:!0}),It.prototype.publish("showValueAsPercentFormat",".0%","string","D3 Format for %",null,{disable:function(t){return!t.showValue()||!t.showValueAsPercent()}}),It.prototype.publish("valueCentered",!1,"boolean","Show Value in center of column"),It.prototype.publish("valueAnchor","middle","set","text-anchor for shown value text",["start","middle","end"]),It.prototype.publish("xAxisSeriesPaddingInner",0,"number","Determines the ratio of the range that is reserved for blank space between band (0->1)");var zt=function(t){function e(){var e=t.call(this)||this;return e.orientation_default("vertical"),e}return r(e,t),e}(It);function Ft(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function Ot(t,e){var n,i,o,r,a,s=new Et(t),l=+t.value&&(s.value=t.value),h=[s];for(null==e&&(e=jt);n=h.pop();)if(l&&(n.value=+n.data.value),(o=e(n.data))&&(a=o.length))for(n.children=new Array(a),r=a-1;r>=0;--r)h.push(i=n.children[r]=new Et(o[r])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(Rt)}function jt(t){return t.children}function Dt(t){t.data=t.data.data}function Rt(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Et(t){this.data=t,this.depth=this.height=0,this.parent=null}function Nt(t){this._=t,this.next=null}function Lt(t){return function t(e,n){var i,o,r,a=null,s=e.head;switch(n.length){case 1:l=n[0],i={x:l.x,y:l.y,r:l.r};break;case 2:i=function(t,e){var n=t.x,i=t.y,o=t.r,r=e.x,a=e.y,s=e.r,l=r-n,h=a-i,u=s-o,c=Math.sqrt(l*l+h*h);return{x:(n+r+l/c*u)/2,y:(i+a+h/c*u)/2,r:(c+o+s)/2}}(n[0],n[1]);break;case 3:i=function(t,e,n){var i=t.x,o=t.y,r=t.r,a=e.x,s=e.y,l=e.r,h=n.x,u=n.y,c=n.r,p=2*(i-a),d=2*(o-s),f=2*(l-r),y=i*i+o*o-r*r-a*a-s*s+l*l,x=2*(i-h),_=2*(o-u),m=2*(c-r),g=i*i+o*o-r*r-h*h-u*u+c*c,v=x*d-p*_,b=(d*g-_*y)/v-i,w=(_*f-d*m)/v,k=(x*y-p*g)/v-o,S=(p*m-x*f)/v,A=w*w+S*S-1,M=2*(b*w+k*S+r),P=b*b+k*k-r*r,T=(-M-Math.sqrt(M*M-4*A*P))/(2*A);return{x:b+w*T+i,y:k+S*T+o,r:T}}(n[0],n[1],n[2])}var l;for(;s;)r=s._,o=s.next,i&&Bt(i,r)?a=s:(a?(e.tail=a,a.next=null):e.head=e.tail=null,n.push(r),i=t(e,n),n.pop(),e.head?(s.next=e.head,e.head=s):(s.next=null,e.head=e.tail=s),(a=e.tail).next=o),s=o;e.tail=a;return i}(function(t){for(var e=(t=t.slice()).length,n=null,i=n;e;){var o=new Nt(t[e-1]);i=i?i.next=o:n=o,t[void 0]=t[--e]}return{head:n,tail:i}}(t),[])}function Bt(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r-e.r;return o*o+1e-6>n*n+i*i}function Ht(t,e,n){var i=t.x,o=t.y,r=e.r+n.r,a=t.r+n.r,s=e.x-i,l=e.y-o,h=s*s+l*l;if(h){var u=.5+((a*=a)-(r*=r))/(2*h),c=Math.sqrt(Math.max(0,2*r*(a+h)-(a-=h)*a-r*r))/(2*h);n.x=i+u*s+c*l,n.y=o+u*l-c*s}else n.x=i+a,n.y=o}function Vt(t,e){var n=e.x-t.x,i=e.y-t.y,o=t.r+e.r;return o*o-1e-6>n*n+i*i}function qt(t,e,n){var i=t._,o=t.next._,r=i.r+o.r,a=(i.x*o.r+o.x*i.r)/r-e,s=(i.y*o.r+o.y*i.r)/r-n;return a*a+s*s}function Wt(t){this._=t,this.next=null,this.previous=null}function Gt(t){return null==t?null:function(t){if("function"!=typeof t)throw new Error;return t}(t)}function Xt(){return 0}function Yt(t){return Math.sqrt(t.value)}function Ut(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Zt(t,e){return function(n){if(i=n.children){var i,o,r,a=i.length,s=t(n)*e||0;if(s)for(o=0;o<a;++o)i[o].r+=s;if(r=function(t){if(!(o=t.length))return 0;var e,n,i,o;if((e=t[0]).x=0,e.y=0,!(o>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(o>2))return e.r+n.r;Ht(n,e,i=t[2]);var r,a,s,l,h,u,c,p=e.r*e.r,d=n.r*n.r,f=i.r*i.r,y=p+d+f,x=p*e.x+d*n.x+f*i.x,_=p*e.y+d*n.y+f*i.y;e=new Wt(e),n=new Wt(n),i=new Wt(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<o;++s){Ht(e._,n._,i=t[s]),i=new Wt(i),l=n.next,h=e.previous,u=n._.r,c=e._.r;do{if(u<=c){if(Vt(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}u+=l._.r,l=l.next}else{if(Vt(h._,i._)){(e=h).next=n,n.previous=e,--s;continue t}c+=h._.r,h=h.previous}}while(l!==h.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,y+=f=i._.r*i._.r,p=qt(e,r=(x+=f*i._.x)/y,a=(_+=f*i._.y)/y);(i=i.next)!==n;)(f=qt(i,r,a))<p&&(e=i,p=f);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Lt(e),s=0;s<o;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}(i),s)for(o=0;o<a;++o)i[o].r-=s;n.r=r+s}}}function Jt(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}zt.prototype._class+=" chart_Bar",Et.prototype=Ot.prototype={constructor:Et,count:function(){return this.eachAfter(Ft)},each:function(t){var e,n,i,o,r=this,a=[r];do{for(e=a.reverse(),a=[];r=e.pop();)if(t(r),n=r.children)for(i=0,o=n.length;i<o;++i)a.push(n[i])}while(a.length);return this},eachAfter:function(t){for(var e,n,i,o=this,r=[o],a=[];o=r.pop();)if(a.push(o),e=o.children)for(n=0,i=e.length;n<i;++n)r.push(e[n]);for(;o=a.pop();)t(o);return this},eachBefore:function(t){for(var e,n,i=this,o=[i];i=o.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)o.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,o=i&&i.length;--o>=0;)n+=i[o].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),o=null;for(t=n.pop(),e=i.pop();t===e;)o=t,t=n.pop(),e=i.pop();return o}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var o=i.length;t!==n;)i.splice(o,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Ot(this).eachBefore(Dt)}};At(".chart_Bubble circle {\r\n    cursor: pointer;\r\n}\r\n\r\n.chart_Bubble .selected circle {\r\n    stroke: red;\r\n    stroke-width: 1.5px\r\n}\r\n\r\n.chart_Bubble .common_FAChar {\r\n    fill: white;\r\n    pointer-events: none;\r\n}\r\n\r\n.chart_Bubble .common_Text {\r\n    pointer-events: none;\r\n}");var Qt=function(t){function i(){var i=t.call(this)||this;return e.I2DChart.call(i),e.ITooltip.call(i),n.Utility.SimpleSelectionMixin.call(i),i._drawStartPos="origin",i.labelWidgets={},i.d3Pack=function(){var t=null,e=1,n=1,i=Xt;function o(o){return o.x=e/2,o.y=n/2,t?o.eachBefore(Ut(t)).eachAfter(Zt(i,.5)).eachBefore(Jt(1)):o.eachBefore(Ut(Yt)).eachAfter(Zt(Xt,1)).eachAfter(Zt(i,o.r/Math.min(e,n))).eachBefore(Jt(Math.min(e,n)/(2*o.r))),o}return o.radius=function(e){return arguments.length?(t=Gt(e),o):t},o.size=function(t){return arguments.length?(e=+t[0],n=+t[1],o):[e,n]},o.padding=function(t){return arguments.length?(i="function"==typeof t?t:function(t){return function(){return t}}(+t),o):i},o}().size([i.width(),i.height()]).padding(1.5),i}return r(i,t),i.prototype.size=function(e){var n=t.prototype.size.apply(this,arguments);return arguments.length&&this.d3Pack.size([this.width(),this.height()]),n},i.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._selection.widgetElement(n);var i=this;this.tooltipHTML(function(t){switch(i.tooltipStyle()){case"series-table":return i.tooltipFormat({label:t[0],arr:i.columns().slice(1).map(function(e,n){return{label:e,color:i._palette(t[0]),value:t[1]}})});default:return i.tooltipFormat({label:t.data[0],value:t.data[1]})}})},i.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i);var r=this;this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id()));var a=Ot({children:this.cloneData()}).sum(function(t){return t[1]}).sort(function(t,e){return e[1]<t[1]?-1:e[1]>t[1]?1:0});this.d3Pack(a);var s=i.selectAll(".node").data(a.children||[],function(t){return t.data[0]});s.enter().append("g").attr("class",function(t,e){return"node series series-"+o.cssTag(t.data[0])}).attr("opacity",0).call(this._selection.enter.bind(this._selection)).on("click",function(t){r.click(r.rowToObj(t.data),r.columns()[1],r._selection.selected(this))}).on("dblclick",function(t){r.dblclick(r.rowToObj(t.data),r.columns()[1],r._selection.selected(this))}).each(function(t){var e=n.select(this),i=t.x,o=t.y;e.append("circle").attr("transform","translate("+i+","+o+")").attr("r",0).on("mouseout.tooltip",r.tooltip.hide).on("mousemove.tooltip",r.tooltip.show),t.__viz_faChar?r.labelWidgets[t.data[0]]=(new n.FAChar).char(t.__viz_faChar).target(this).render():r.labelWidgets[t.data[0]]=(new n.Text).text(t.data[0]).target(this).render()}).merge(s).transition().attr("opacity",1).each(function(t){var e=n.select(this),i={x:t.x,y:t.y};e.select("circle").transition().attr("transform","translate("+i.x+","+i.y+")").style("fill",r.fillColor(t.data,r.columns()[1],t.data[1])).attr("r",t.r).select("title").text(t.data[0]+" ("+t.data[1]+")"),t.__viz_faChar?r.labelWidgets[t.data[0]].pos(i).render():r.labelWidgets[t.data[0]].pos(i).colorFill_default(r.textColor(t.data,r.columns()[1],t.data[1])).width(2*t.r).text(t.data[0]).render()}),s.exit().transition().style("opacity",0).remove()},i.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},i.__inputs=[{id:"label",type:"string"},{id:"value",type:"number"}],i}(n.SVGWidget);Qt.prototype._class+=" chart_Bubble",Qt.prototype.implements(e.I2DChart.prototype),Qt.prototype.implements(e.ITooltip.prototype),Qt.prototype.mixin(n.Utility.SimpleSelectionMixin),Qt.prototype.publish("paletteID","default","set","Color palette for this widget",Qt.prototype._palette.switch(),{tags:["Basic","Shared"]}),Qt.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]});var Kt=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.enter=function(e,n){null===this.pointSizeColumn()&&this.pointSizeColumn(this.columns()[this.columns().length-1]),t.prototype.enter.call(this,e,n)},e}(Tt);Kt.prototype._class+=" chart_BubbleXY";var $t,te=0,ee=0,ne="object"==typeof performance&&performance.now?performance:Date,ie="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function oe(){te=0}function re(){te||(ie(oe),te=ne.now()+ee);for(var t,e=$t;e;)(t=te-e._time)>=0&&e._call.call(null,t),e=e._next}function ae(t){return t.ranges}function se(t){return t.markers}function le(t){return t.measures}function he(t){var e=t(0);return function(n){return Math.abs(t(n)-e)}}At(".chart_Bullet .domain {\r\n    opacity: 0;\r\n}\r\n\r\n.chart_Bullet .bullet {\r\n    border: solid 1px;\r\n    border-color: transparent;\r\n    font: 10px sans-serif;\r\n}\r\n\r\n.chart_Bullet .bullet.selected {\r\n    border-color: red;\r\n}\r\n\r\n.chart_Bullet .bullet.over {\r\n    border-color: orange;\r\n}\r\n\r\n.chart_Bullet .bullet.selected.over {\r\n    border-color: red;\r\n}\r\n\r\n.chart_Bullet .bullet .marker {\r\n    stroke: #000;\r\n    stroke-width: 2px;\r\n}\r\n\r\n.chart_Bullet .bullet .tick line {\r\n    stroke: #666;\r\n    stroke-width: .5px;\r\n}\r\n\r\n.chart_Bullet .bullet .range.s0 {\r\n    fill: #eee;\r\n}\r\n\r\n.chart_Bullet .bullet .range.s1 {\r\n    fill: #ddd;\r\n}\r\n\r\n.chart_Bullet .bullet .range.s2 {\r\n    fill: #ccc;\r\n}\r\n\r\n.chart_Bullet .bullet .measure.s0 {\r\n    fill: lightsteelblue;\r\n}\r\n\r\n.chart_Bullet .bullet .measure.s1 {\r\n    fill: steelblue;\r\n}\r\n\r\n.chart_Bullet .bullet .title {\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n}\r\n\r\n.chart_Bullet .bullet .subtitle {\r\n    fill: #999;\r\n}\r\n");var ue=function(t){function e(){var e=t.call(this)||this;return n.Utility.SimpleSelectionMixin.call(e,!0),e}return r(e,t),e.prototype.bulletData=function(){var t=this.columns();return this.data().map(function(t){return{title:e(t,this.titleColumn()),subtitle:e(t,this.subtitleColumn()),ranges:e(t,this.rangesColumn()),measures:e(t,this.measuresColumn()),markers:e(t,this.markersColumn()),origRow:t}},this);function e(e,n){var i=t.indexOf(n);return i>=0?e[i]instanceof Array?e[i]:[e[i]]:[]}},e.prototype.enter=function(e,i){t.prototype.enter.call(this,e,i),n.select(e.parentNode).style("overflow","auto"),this._selection.widgetElement(i)},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i);var o=this,r=2,a=8,s=2,l=8,h=this.width()-r-s,u=40-a-l,c=i.selectAll("svg").data(this.bulletData()),p=c.enter().append("svg").attr("class","bullet").call(this._selection.enter.bind(this._selection)).on("click",function(t){o.click(o.rowToObj(t.origRow),o.titleColumn(),o._selection.selected(this))}).on("dblclick",function(t){o.dblclick(o.rowToObj(t.origRow),o.titleColumn(),o._selection.selected(this))}).each(function(){var t=n.select(this).append("g").attr("class",function(t,e){return"bulletBar series series-"+o.cssTag(o.titleColumn())}).append("g").attr("class","bulletTitle");t.append("text").attr("class","title"),t.append("text").attr("class","subtitle").attr("dy","1em")}).merge(c),d=p.select(".bulletTitle").style("text-anchor","end").attr("transform","translate(-6,"+u/2+")");d.select(".title").text(function(t){return t.title}),d.select(".subtitle").text(function(t){return t.subtitle});var f=0;d.each(function(){var t=this.getBBox();console.log(t.width),t.width>f&&(f=t.width)});var y=function(){var t="left",e=!1,i=!1,o=ae,r=se,a=le,s=380,l=30,h=St();function u(t){t.each(function(t,u){var c,p,d=o.call(this,t,u).slice().sort(n.descending),f=r.call(this,t,u).slice().sort(n.descending),y=a.call(this,t,u).slice().sort(n.descending),x=n.select(this),_=x.select("g.wrap");_.empty()&&(_=x.append("g").attr("class","wrap")),i?(c=l,p=s,_.attr("transform","rotate(90)translate(0,"+-s+")")):(c=s,p=l,_.attr("transform",null));var m=n.scaleLinear().domain([0,Math.max(d[0],f[0],y[0])]).range(e?[c,0]:[0,c]),g=this.__chart__||n.scaleLinear().domain([0,1/0]).range(m.range());this.__chart__=m;var v=he(g),b=he(m),w=_.selectAll("rect.range").data(d);w.enter().append("rect").attr("class",function(t,e){return"range s"+e}).attr("width",v).attr("height",p).attr("x",e?g:0).merge(w).transition(w).attr("x",e?m:0).attr("width",b).attr("height",p);var k=_.selectAll("rect.measure").data(y);k.enter().append("rect").attr("class",function(t,e){return"measure s"+e}).attr("width",v).attr("height",p/3).attr("x",e?g:0).attr("y",p/3).merge(k).transition(k).attr("width",b).attr("height",p/3).attr("x",e?m:0).attr("y",p/3);var S=_.selectAll("line.marker").data(f);S.enter().append("line").attr("class","marker").attr("x1",g).attr("x2",g).attr("y1",p/6).attr("y2",5*p/6).merge(S).transition(S).attr("x1",m).attr("x2",m).attr("y1",p/6).attr("y2",5*p/6);var A=x.selectAll("g.axis").data([0]);A.enter().append("g").attr("class","axis"),A.attr("transform",i?null:"translate(0,"+p+")").call(h.scale(m))}),re()}return u.orient=function(n){return arguments.length?(e="right"==(t=n+"")||"bottom"===t,h.orient((i="top"===t||"bottom"===t)?"left":"bottom"),u):t},u.ranges=function(t){return arguments.length?(o=t,u):o},u.markers=function(t){return arguments.length?(r=t,u):r},u.measures=function(t){return arguments.length?(a=t,u):a},u.width=function(t){return arguments.length?(s=+t,u):s},u.height=function(t){return arguments.length?(l=+t,u):l},u.tickFormat=function(t){return arguments.length?(h.tickFormat(t),u):h.tickFormat()},u}().width(h-f-6).height(u);p.attr("width",h).attr("height",u+a+l).style("margin-left",r+"px"),p.select(".bulletBar").attr("transform","translate("+(f+6)+","+a+")").call(y),c.exit().remove()},e.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},e.prototype.click=function(t,e,n){console.log("Click:  "+JSON.stringify(t)+", "+e+","+n)},e.prototype.dblclick=function(t,e,n){console.log("Double click:  "+JSON.stringify(t)+", "+e+","+n)},a([n.publish(null,"set","Title Column",function(){return this.columns()},{optional:!0}),s("design:type",Function)],e.prototype,"titleColumn",void 0),a([n.publish(null,"set","Subtitle Column",function(){return this.columns()},{optional:!0}),s("design:type",Function)],e.prototype,"subtitleColumn",void 0),a([n.publish(null,"set","Ranges Column",function(){return this.columns()},{optional:!0}),s("design:type",Function)],e.prototype,"rangesColumn",void 0),a([n.publish(null,"set","Measures Column",function(){return this.columns()},{optional:!0}),s("design:type",Function)],e.prototype,"measuresColumn",void 0),a([n.publish(null,"set","Markers Column",function(){return this.columns()},{optional:!0}),s("design:type",Function)],e.prototype,"markersColumn",void 0),e}(n.HTMLWidget);ue.prototype._class+=" chart_Bullet";var ce=Array.prototype.slice;function pe(t,e){return t-e}function de(t){return function(){return t}}function fe(t,e){for(var n,i=-1,o=e.length;++i<o;)if(n=ye(t,e[i]))return n;return 0}function ye(t,e){for(var n=e[0],i=e[1],o=-1,r=0,a=t.length,s=a-1;r<a;s=r++){var l=t[r],h=l[0],u=l[1],c=t[s],p=c[0],d=c[1];if(xe(l,c,e))return 0;u>i!=d>i&&n<(p-h)*(i-u)/(d-u)+h&&(o=-o)}return o}function xe(t,e,n){var i,o,r,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(o=t[i=+(t[0]===e[0])],r=n[i],a=e[i],o<=r&&r<=a||a<=r&&r<=o)}function _e(){}var me=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ge(){var t=1,e=1,i=n.thresholdSturges,o=s;function r(r){var s=i(r);if(Array.isArray(s))s=s.slice().sort(pe);else{var l=n.extent(r),h=l[0],u=l[1];s=n.tickStep(h,u,s),s=n.range(Math.floor(h/s)*s,Math.floor(u/s)*s,s)}return s.map(function(n){var i=[],s=[];return function(n,i,o){var r,s,l,h,u,c,p=new Array,d=new Array;r=s=-1,h=n[0]>=i,me[h<<1].forEach(f);for(;++r<t-1;)l=h,h=n[r+1]>=i,me[l|h<<1].forEach(f);me[h<<0].forEach(f);for(;++s<e-1;){for(r=-1,h=n[s*t+t]>=i,u=n[s*t]>=i,me[h<<1|u<<2].forEach(f);++r<t-1;)l=h,h=n[s*t+t+r+1]>=i,c=u,u=n[s*t+r+1]>=i,me[l|h<<1|u<<2|c<<3].forEach(f);me[h|u<<3].forEach(f)}r=-1,u=n[s*t]>=i,me[u<<2].forEach(f);for(;++r<t-1;)c=u,u=n[s*t+r+1]>=i,me[u<<2|c<<3].forEach(f);function f(t){var e,n,i=[t[0][0]+r,t[0][1]+s],l=[t[1][0]+r,t[1][1]+s],h=a(i),u=a(l);(e=d[h])?(n=p[u])?(delete d[e.end],delete p[n.start],e===n?(e.ring.push(l),o(e.ring)):p[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=u]=e):(e=p[u])?(n=d[h])?(delete p[e.start],delete d[n.end],e===n?(e.ring.push(l),o(e.ring)):p[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete p[e.start],e.ring.unshift(i),p[e.start=h]=e):p[h]=d[u]={start:h,end:u,ring:[i,l]}}me[u<<3].forEach(f)}(r,n,function(t){o(t,r,n),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?i.push([t]):s.push(t)}),s.forEach(function(t){for(var e,n=0,o=i.length;n<o;++n)if(-1!==fe((e=i[n])[0],t))return void e.push(t)}),i}).map(function(t,e){return{type:"MultiPolygon",value:s[e],coordinates:t}})}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,i,o){n.forEach(function(n){var r,a=n[0],s=n[1],l=0|a,h=0|s,u=i[h*t+l];a>0&&a<t&&l===a&&(r=i[h*t+l-1],n[0]=a+(o-r)/(u-r)-.5),s>0&&s<e&&h===s&&(r=i[(h-1)*t+l],n[1]=s+(o-r)/(u-r)-.5)})}return r.size=function(n){if(!arguments.length)return[t,e];var i=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(i>0&&o>0))throw new Error("invalid size");return t=i,e=o,r},r.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?de(ce.call(t)):de(t),r):i},r.smooth=function(t){return arguments.length?(o=t?s:_e,r):o===s},r}function ve(t,e,n){for(var i=t.width,o=t.height,r=1+(n<<1),a=0;a<o;++a)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=t.data[s+a*i]),s>=n&&(s>=r&&(l-=t.data[s-r+a*i]),e.data[s-n+a*i]=l/Math.min(s+1,i-1+r-s,r))}function be(t,e,n){for(var i=t.width,o=t.height,r=1+(n<<1),a=0;a<i;++a)for(var s=0,l=0;s<o+n;++s)s<o&&(l+=t.data[a+s*i]),s>=n&&(s>=r&&(l-=t.data[a+(s-r)*i]),e.data[a+(s-n)*i]=l/Math.min(s+1,o-1+r-s,r))}function we(t){return t[0]}function ke(t){return t[1]}function Se(){return new Ae}function Ae(){this.reset()}Ae.prototype={constructor:Ae,reset:function(){this.s=this.t=0},add:function(t){Pe(Me,t,this.t),Pe(this,Me.s,this.s),this.s?this.t+=Me.t:this.s=Me.t},valueOf:function(){return this.s}};var Me=new Ae;function Pe(t,e,n){var i=t.s=e+n,o=i-e,r=i-o;t.t=e-r+(n-o)}var Te=2*Math.PI,Ce=Math.abs,Ie=Math.sqrt;function ze(){}function Fe(t,e){t&&je.hasOwnProperty(t.type)&&je[t.type](t,e)}var Oe={Feature:function(t,e){Fe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)Fe(n[i].geometry,e)}},je={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){De(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)De(n[i],e,0)},Polygon:function(t,e){Re(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)Re(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)Fe(n[i],e)}};function De(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();++o<r;)i=t[o],e.point(i[0],i[1],i[2]);e.lineEnd()}function Re(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)De(t[n],e,1);e.polygonEnd()}function Ee(t,e){t&&Oe.hasOwnProperty(t.type)?Oe[t.type](t,e):Fe(t,e)}Se(),Se(),Se(),Se(),Se();function Ne(t){return t}var Le,Be,He,Ve,qe=Se(),We=Se(),Ge={point:ze,lineStart:ze,lineEnd:ze,polygonStart:function(){Ge.lineStart=Xe,Ge.lineEnd=Ze},polygonEnd:function(){Ge.lineStart=Ge.lineEnd=Ge.point=ze,qe.add(Ce(We)),We.reset()},result:function(){var t=qe/2;return qe.reset(),t}};function Xe(){Ge.point=Ye}function Ye(t,e){Ge.point=Ue,Le=He=t,Be=Ve=e}function Ue(t,e){We.add(Ve*t-He*e),He=t,Ve=e}function Ze(){Ue(Le,Be)}var Je=1/0,Qe=Je,Ke=-Je,$e=Ke,tn={point:function(t,e){t<Je&&(Je=t);t>Ke&&(Ke=t);e<Qe&&(Qe=e);e>$e&&($e=e)},lineStart:ze,lineEnd:ze,polygonStart:ze,polygonEnd:ze,result:function(){var t=[[Je,Qe],[Ke,$e]];return Ke=$e=-(Qe=Je=1/0),t}};var en,nn,on,rn,an=0,sn=0,ln=0,hn=0,un=0,cn=0,pn=0,dn=0,fn=0,yn={point:xn,lineStart:_n,lineEnd:vn,polygonStart:function(){yn.lineStart=bn,yn.lineEnd=wn},polygonEnd:function(){yn.point=xn,yn.lineStart=_n,yn.lineEnd=vn},result:function(){var t=fn?[pn/fn,dn/fn]:cn?[hn/cn,un/cn]:ln?[an/ln,sn/ln]:[NaN,NaN];return an=sn=ln=hn=un=cn=pn=dn=fn=0,t}};function xn(t,e){an+=t,sn+=e,++ln}function _n(){yn.point=mn}function mn(t,e){yn.point=gn,xn(on=t,rn=e)}function gn(t,e){var n=t-on,i=e-rn,o=Ie(n*n+i*i);hn+=o*(on+t)/2,un+=o*(rn+e)/2,cn+=o,xn(on=t,rn=e)}function vn(){yn.point=xn}function bn(){yn.point=kn}function wn(){Sn(en,nn)}function kn(t,e){yn.point=Sn,xn(en=on=t,nn=rn=e)}function Sn(t,e){var n=t-on,i=e-rn,o=Ie(n*n+i*i);hn+=o*(on+t)/2,un+=o*(rn+e)/2,cn+=o,pn+=(o=rn*t-on*e)*(on+t),dn+=o*(rn+e),fn+=3*o,xn(on=t,rn=e)}function An(t){this._context=t}An.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Te)}},result:ze};var Mn,Pn,Tn,Cn,In,zn=Se(),Fn={point:ze,lineStart:function(){Fn.point=On},lineEnd:function(){Mn&&jn(Pn,Tn),Fn.point=ze},polygonStart:function(){Mn=!0},polygonEnd:function(){Mn=null},result:function(){var t=+zn;return zn.reset(),t}};function On(t,e){Fn.point=jn,Pn=Cn=t,Tn=In=e}function jn(t,e){Cn-=t,In-=e,zn.add(Ie(Cn*Cn+In*In)),Cn=t,In=e}function Dn(){this._string=[]}function Rn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Dn.prototype={_radius:4.5,_circle:Rn(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Rn(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var En=function(t){function e(){var e=t.call(this)||this;return e.xAxisGuideLines_default(!1).yAxisGuideLines_default(!1),e}return r(e,t),e.prototype.xPos=function(t,e){return"horizontal"===t.orientation()?t.dataPos(e.label):t.valuePos(e.value)},e.prototype.yPos=function(t,e){return"horizontal"===t.orientation()?t.valuePos(e.value):t.dataPos(e.label)},e.prototype.layerEnter=function(e,n,i){void 0===i&&(i=250),t.prototype.layerEnter.call(this,e,n,i)},e.prototype.layerUpdate=function(e,i,o){var r=this;void 0===o&&(o=250),t.prototype.layerUpdate.call(this,e,i,o),this._palette=this._palette.switch(this.paletteID());var a=this.flattenData(this.layerColumns(e),this.layerData(e)),s=function(){var t=we,e=ke,i=960,o=500,r=20,a=2,s=3*r,l=i+2*s>>a,h=o+2*s>>a,u=de(20);function c(i){var o=new Float32Array(l*h),c=new Float32Array(l*h);i.forEach(function(n,i,r){var u=t(n,i,r)+s>>a,c=e(n,i,r)+s>>a;u>=0&&u<l&&c>=0&&c<h&&++o[u+c*l]}),ve({width:l,height:h,data:o},{width:l,height:h,data:c},r>>a),be({width:l,height:h,data:c},{width:l,height:h,data:o},r>>a),ve({width:l,height:h,data:o},{width:l,height:h,data:c},r>>a),be({width:l,height:h,data:c},{width:l,height:h,data:o},r>>a),ve({width:l,height:h,data:o},{width:l,height:h,data:c},r>>a),be({width:l,height:h,data:c},{width:l,height:h,data:o},r>>a);var d=u(o);if(!Array.isArray(d)){var f=n.max(o);d=n.tickStep(0,f,d),(d=n.range(0,Math.floor(f/d)*d,d)).shift()}return ge().thresholds(d).size([l,h])(o).map(p)}function p(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(f)}function f(t){t.forEach(y)}function y(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function x(){return l=i+2*(s=3*r)>>a,h=o+2*s>>a,c}return c.x=function(e){return arguments.length?(t="function"==typeof e?e:de(+e),c):t},c.y=function(t){return arguments.length?(e="function"==typeof t?t:de(+t),c):e},c.size=function(t){if(!arguments.length)return[i,o];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return i=e,o=n,x()},c.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),x()},c.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Array.isArray(t)?de(ce.call(t)):de(t),c):u},c.bandwidth=function(t){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*t*t+1)-1)/2),x()},c}().x(function(t){return r.xPos(e,t)}).y(function(t){return r.yPos(e,t)}).size([this.width(),this.height()]).bandwidth(this.contourBandwidth())(a),l=s.map(function(t){return t.value}),h=Math.min.apply(this,l),u=Math.max.apply(this,l);this._dataMinWeight=h,this._dataMaxWeight=u;var c=i.selectAll("path").data(s);c.enter().append("path").merge(c).attr("d",function(t,e){var n,i,o=4.5;function r(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),Ee(t,n(i))),i.result()}return r.area=function(t){return Ee(t,n(Ge)),Ge.result()},r.measure=function(t){return Ee(t,n(Fn)),Fn.result()},r.bounds=function(t){return Ee(t,n(tn)),tn.result()},r.centroid=function(t){return Ee(t,n(yn)),yn.result()},r.projection=function(e){return arguments.length?(n=null==e?(t=null,Ne):(t=e).stream,r):t},r.context=function(t){return arguments.length?(i=null==t?(e=null,new Dn):new An(e=t),"function"!=typeof o&&i.pointRadius(o),r):e},r.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),r):o},r.projection(t).context(e)}()).attr("fill",function(t){return r.showContourFill()?r._palette(t.value,h,u):"none"}).attr("stroke",this.contourStrokeColor()).attr("stroke-linejoin","round").attr("stroke-width",this.contourStrokeWidth()),c.exit().remove()},e.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},e.__inputs=[{id:"x",type:"any"},{id:"y",type:"number"}],e}(Pt);En.prototype._class+=" chart_Contour",En.prototype.implements(e.I1DChart.prototype),En.prototype.publish("paletteID","YlGnBu","string","Color palette for this widget"),En.prototype.publish("useClonedPalette",!0,"boolean","Enable or disable using a cloned palette"),En.prototype.publish("showContourFill",!0,"boolean","Show/hide the contour background colors"),En.prototype.publish("showContour",!0,"boolean","Show/hide the contour border lines"),En.prototype.publish("contourBandwidth",40,"number","Controls the sensitivity of the contour grouping algorithm"),En.prototype.publish("contourStrokeColor","#2C3A47","html-color","Color of the contour border lines"),En.prototype.publish("contourStrokeWidth",1,"number","Width of the contour border lines");var Nn=function(t){function e(){var e=t.call(this)||this;return e.orientation_default("vertical").xAxisType_default("ordinal").yAxisType_default("time"),e}return r(e,t),e}(zt);function Ln(t){return function(){return t}}Nn.prototype._class+=" chart_Gantt";var Bn=1e-12,Hn=Math.PI,Vn=Hn/2,qn=2*Hn;function Wn(t){return t.innerRadius}function Gn(t){return t.outerRadius}function Xn(t){return t.startAngle}function Yn(t){return t.endAngle}function Un(t){return t&&t.padAngle}function Zn(t){return t>=1?Vn:t<=-1?-Vn:Math.asin(t)}function Jn(t,e,n,i,o,r,a){var s=t-n,l=e-i,h=(a?r:-r)/Math.sqrt(s*s+l*l),u=h*l,c=-h*s,p=t+u,d=e+c,f=n+u,y=i+c,x=(p+f)/2,_=(d+y)/2,m=f-p,g=y-d,v=m*m+g*g,b=o-r,w=p*y-f*d,k=(g<0?-1:1)*Math.sqrt(Math.max(0,b*b*v-w*w)),S=(w*g-m*k)/v,A=(-w*m-g*k)/v,M=(w*g+m*k)/v,P=(-w*m+g*k)/v,T=S-x,C=A-_,I=M-x,z=P-_;return T*T+C*C>I*I+z*z&&(S=M,A=P),{cx:S,cy:A,x01:-u,y01:-c,x11:S*(o/b-1),y11:A*(o/b-1)}}function Qn(t){this._context=t}function Kn(t){return new Qn(t)}function $n(t){return t[0]}function ti(t){return t[1]}function ei(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ni(t,e){this._context=t,this._k=(1-e)/6}function ii(t,e){this._context=t,this._alpha=e}Qn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},ni.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ei(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ei(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,o=t._y1,r=t._x2,a=t._y2;if(t._l01_a>Bn){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,o=(o*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Bn){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*h+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*h+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,o,r,a,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var oi=function t(e){function n(t){return e?new ii(t,e):new ni(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function ri(t){return t<0?-1:1}function ai(t,e,n){var i=t._x1-t._x0,o=e-t._x1,r=(t._y1-t._y0)/(i||o<0&&-0),a=(n-t._y1)/(o||i<0&&-0),s=(r*o+a*i)/(i+o);return(ri(r)+ri(a))*Math.min(Math.abs(r),Math.abs(a),.5*Math.abs(s))||0}function si(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function li(t,e,n){var i=t._x0,o=t._y0,r=t._x1,a=t._y1,s=(r-i)/3;t._context.bezierCurveTo(i+s,o+s*e,r-s,a-s*n,r,a)}function hi(t){this._context=t}function ui(t){this._context=t}hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:li(this,this._t0,si(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,li(this,si(this,n=ai(this,t,e)),n);break;default:li(this,this._t0,n=ai(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new ui(t)}.prototype=Object.create(hi.prototype)).point=function(t,e){hi.prototype.point.call(this,e,t)},ui.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,o,r){this._context.bezierCurveTo(e,t,i,n,r,o)}};var ci=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},pi=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),di=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fi=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},yi=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},xi=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},_i=function(){function t(e){var n=e.x,i=void 0===n?0:n,o=e.y,r=void 0===o?0:o,a=e.nx,s=e.ny,l=e.dy,h=void 0===l?0:l,u=e.dx,c=void 0===u?0:u,p=e.color,d=void 0===p?"grey":p,f=e.data,y=e.type,x=e.subject,_=e.connector,m=e.note,g=e.disable,v=e.id,b=e.className;ci(this,t),this._dx=void 0!==a?a-i:c,this._dy=void 0!==s?s-r:h,this._x=i,this._y=r,this._color=d,this.id=v,this._className=b||"",this.type=y||"",this.data=f,this.note=m||{},this.connector=_||{},this.subject=x||{},this.disable=g||[]}return pi(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),0!==this.type.subject.selectAll(":not(.handle)").nodes().length&&this.type.redrawSubject())}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),0!==this.type.connector.selectAll(":not(.handle)").nodes().length&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(t){this._className=t,this.type.setClassName&&this.type.setClassName()}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(t){this._color=t,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t,this.updateOffset()}},{key:"nx",set:function(t){this._dx=t-this._x,this.updateOffset()}},{key:"ny",set:function(t){this._dy=t-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(t){var e=t.x,n=t.y;this._dx=e,this._dy=n,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(t){var e=t.x,n=t.y;this._x=e,this._y=n,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var t={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(t.data=this.data),this.type&&(t.type=this.type),this._className&&(t.className=this._className),Object.keys(this.connector).length>0&&(t.connector=this.connector),Object.keys(this.subject).length>0&&(t.subject=this.subject),Object.keys(this.note).length>0&&(t.note=this.note),t}}]),t}(),mi=function(){function t(e){var n=e.annotations,i=e.accessors,o=e.accessorsInverse;ci(this,t),this.accessors=i,this.accessorsInverse=o,this.annotations=n}return pi(t,[{key:"clearTypes",value:function(t){this.annotations.forEach(function(e){e.type=void 0,e.subject=t&&t.subject||e.subject,e.connector=t&&t.connector||e.connector,e.note=t&&t.note||e.note})}},{key:"setPositionWithAccessors",value:function(){var t=this;this.annotations.forEach(function(e){e.type.setPositionWithAccessors(t.accessors)})}},{key:"editMode",value:function(t){this.annotations.forEach(function(e){e.type&&(e.type.editMode=t,e.type.updateEditMode())})}},{key:"updateDisable",value:function(t){this.annotations.forEach(function(e){e.disable=t,e.type&&t.forEach(function(t){e.type[t]&&(e.type[t].remove&&e.type[t].remove(),e.type[t]=void 0)})})}},{key:"updateTextWrap",value:function(t){this.annotations.forEach(function(e){e.type&&e.type.updateTextWrap&&e.type.updateTextWrap(t)})}},{key:"updateText",value:function(){this.annotations.forEach(function(t){t.type&&t.type.drawText&&t.type.drawText()})}},{key:"updateNotePadding",value:function(t){this.annotations.forEach(function(e){e.type&&(e.type.notePadding=t)})}},{key:"json",get:function(){var t=this;return this.annotations.map(function(e){var n=e.json;return t.accessorsInverse&&e.data&&(n.data={},Object.keys(t.accessorsInverse).forEach(function(i){n.data[i]=t.accessorsInverse[i]({x:e.x,y:e.y})})),n})}},{key:"noteNodes",get:function(){return this.annotations.map(function(t){return di({},t.type.getNoteBBoxOffset(),{positionX:t.x,positionY:t.y})})}}]),t}(),gi=function(t,e){return"dynamic"!==t&&"left"!==t&&"right"!==t||(t=e<0?"top":"bottom"),t},vi=function(t,e){return"dynamic"!==t&&"top"!==t&&"bottom"!==t||(t=e<0?"right":"left"),t},bi=["topBottom","top","bottom"],wi=["leftRight","left","right"],ki=function(t){var e=t.data,n=t.curve,i=void 0===n?Kn:n,o=t.canvasContext,r=t.className,a=t.classID,s=function(){var t=$n,e=ti,n=Ln(!0),i=null,o=Kn,r=null;function a(a){var s,l,h,u=a.length,c=!1;for(null==i&&(r=o(h=p())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===c&&((c=!c)?r.lineStart():r.lineEnd()),c&&r.point(+t(l,s,a),+e(l,s,a));if(h)return r=null,h+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:Ln(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Ln(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Ln(!!t),a):n},a.curve=function(t){return arguments.length?(o=t,null!=i&&(r=o(i)),a):o},a.context=function(t){return arguments.length?(null==t?i=r=null:r=o(i=t),a):i},a}().curve(i),l={type:"path",className:r,classID:a,data:e};return o?(s.context(o),l.pathMethods=s):l.attrs={d:s(e)},l},Si=function(t){var e=t.data,n=t.canvasContext,i={type:"path",className:t.className,classID:t.classID,data:e},o=function(){var t=Wn,e=Gn,n=Ln(0),i=null,o=Xn,r=Yn,a=Un,s=null;function l(){var l,h,u=+t.apply(this,arguments),c=+e.apply(this,arguments),d=o.apply(this,arguments)-Vn,f=r.apply(this,arguments)-Vn,y=Math.abs(f-d),x=f>d;if(s||(s=l=p()),c<u&&(h=c,c=u,u=h),c>Bn)if(y>qn-Bn)s.moveTo(c*Math.cos(d),c*Math.sin(d)),s.arc(0,0,c,d,f,!x),u>Bn&&(s.moveTo(u*Math.cos(f),u*Math.sin(f)),s.arc(0,0,u,f,d,x));else{var _,m,g=d,v=f,b=d,w=f,k=y,S=y,A=a.apply(this,arguments)/2,M=A>Bn&&(i?+i.apply(this,arguments):Math.sqrt(u*u+c*c)),P=Math.min(Math.abs(c-u)/2,+n.apply(this,arguments)),T=P,C=P;if(M>Bn){var I=Zn(M/u*Math.sin(A)),z=Zn(M/c*Math.sin(A));(k-=2*I)>Bn?(b+=I*=x?1:-1,w-=I):(k=0,b=w=(d+f)/2),(S-=2*z)>Bn?(g+=z*=x?1:-1,v-=z):(S=0,g=v=(d+f)/2)}var F=c*Math.cos(g),O=c*Math.sin(g),j=u*Math.cos(w),D=u*Math.sin(w);if(P>Bn){var R=c*Math.cos(v),E=c*Math.sin(v),N=u*Math.cos(b),L=u*Math.sin(b);if(y<Hn){var B=k>Bn?function(t,e,n,i,o,r,a,s){var l=n-t,h=i-e,u=a-o,c=s-r,p=(u*(e-r)-c*(t-o))/(c*l-u*h);return[t+p*l,e+p*h]}(F,O,N,L,R,E,j,D):[j,D],H=F-B[0],V=O-B[1],q=R-B[0],W=E-B[1],G=1/Math.sin(Math.acos((H*q+V*W)/(Math.sqrt(H*H+V*V)*Math.sqrt(q*q+W*W)))/2),X=Math.sqrt(B[0]*B[0]+B[1]*B[1]);T=Math.min(P,(u-X)/(G-1)),C=Math.min(P,(c-X)/(G+1))}}S>Bn?C>Bn?(_=Jn(N,L,F,O,c,C,x),m=Jn(R,E,j,D,c,C,x),s.moveTo(_.cx+_.x01,_.cy+_.y01),C<P?s.arc(_.cx,_.cy,C,Math.atan2(_.y01,_.x01),Math.atan2(m.y01,m.x01),!x):(s.arc(_.cx,_.cy,C,Math.atan2(_.y01,_.x01),Math.atan2(_.y11,_.x11),!x),s.arc(0,0,c,Math.atan2(_.cy+_.y11,_.cx+_.x11),Math.atan2(m.cy+m.y11,m.cx+m.x11),!x),s.arc(m.cx,m.cy,C,Math.atan2(m.y11,m.x11),Math.atan2(m.y01,m.x01),!x))):(s.moveTo(F,O),s.arc(0,0,c,g,v,!x)):s.moveTo(F,O),u>Bn&&k>Bn?T>Bn?(_=Jn(j,D,R,E,u,-T,x),m=Jn(F,O,N,L,u,-T,x),s.lineTo(_.cx+_.x01,_.cy+_.y01),T<P?s.arc(_.cx,_.cy,T,Math.atan2(_.y01,_.x01),Math.atan2(m.y01,m.x01),!x):(s.arc(_.cx,_.cy,T,Math.atan2(_.y01,_.x01),Math.atan2(_.y11,_.x11),!x),s.arc(0,0,u,Math.atan2(_.cy+_.y11,_.cx+_.x11),Math.atan2(m.cy+m.y11,m.cx+m.x11),x),s.arc(m.cx,m.cy,T,Math.atan2(m.y11,m.x11),Math.atan2(m.y01,m.x01),!x))):s.arc(0,0,u,w,b,x):s.lineTo(j,D)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+o.apply(this,arguments)+ +r.apply(this,arguments))/2-Hn/2;return[Math.cos(i)*n,Math.sin(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Ln(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Ln(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Ln(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Ln(+t),l):i},l.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:Ln(+t),l):o},l.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Ln(+t),l):r},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Ln(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}().innerRadius(e.innerRadius||0).outerRadius(e.outerRadius||e.radius||2).startAngle(e.startAngle||0).endAngle(e.endAngle||2*Math.PI);return n?(o.context(n),i.pathMethods=lineGen):i.attrs={d:o()},i},Ai=function(t){var e=t.type,n=t.subjectType,i=e.annotation,o=i.position,r=i.x-o.x,a=r+i.dx,s=i.y-o.y,l=s+i.dy,h=i.subject;if("circle"===n&&(h.outerRadius||h.radius)){var u=Math.sqrt((r-a)*(r-a)+(s-l)*(s-l)),c=Math.asin(-l/u),p=h.outerRadius||h.radius+(h.radiusPadding||0);r=Math.abs(Math.cos(c)*p)*(a<0?-1:1),s=Math.abs(Math.sin(c)*p)*(l<0?-1:1)}if("rect"===n){var d=h.width,f=h.height;(d>0&&i.dx>0||d<0&&i.dx<0)&&(r=Math.abs(d)>Math.abs(i.dx)?d/2:d),(f>0&&i.dy>0||f<0&&i.dy<0)&&(s=Math.abs(f)>Math.abs(i.dy)?f/2:f),r===d/2&&s===f/2&&(r=a,s=l)}return[[r,s],[a,l]]},Mi=function(t){var e=t.type,i=t.connectorData,o=t.subjectType;i||(i={}),i.points&&"number"!=typeof i.points||(i.points=Pi(e.annotation.offset,i.points)),i.curve||(i.curve=oi);var r=[];if(e.editMode){var a=i.points.map(function(t,e){return di({},(n={cx:t[0],cy:t[1]},i=n.cx,o=void 0===i?0:i,r=n.cy,{move:{x:o,y:void 0===r?0:r}}),{index:e});var n,i,o,r}),s=function(t){i.points[t][0]+=n.event.dx,i.points[t][1]+=n.event.dy,e.redrawConnector()};r=e.mapHandles(a.map(function(t){return di({},t.move,{drag:s.bind(e,t.index)})}))}var l=Ai({type:e,subjectType:o});return l=[l[0]].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(i.points),[l[1]]),{components:[ki({data:l,curve:i.curve,className:"connector"})],handles:r}},Pi=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.x/(e+1),i=t.y/(e+1),o=[],r=1;r<=e;r++)o.push([n*r+r%2*20,i*r-r%2*20]);return o},Ti=function(t){var e=t.subjectData,i=t.type;e.radius||e.outerRadius||(e.radius=20);var o=[],r=Si({data:e,className:"subject"});if(i.editMode){var a=function(t){var e=t.cx,n=void 0===e?0:e,i=t.cy,o=void 0===i?0:i,r=t.r1,a=t.r2,s=t.padding,l={move:{x:n,y:o}};return void 0!==r&&(l.r1={x:n+r/Math.sqrt(2),y:o+r/Math.sqrt(2)}),void 0!==a&&(l.r2={x:n+a/Math.sqrt(2),y:o+a/Math.sqrt(2)}),void 0!==s&&(l.padding={x:n+r+s,y:o}),l}({r1:r.data.outerRadius||r.data.radius,r2:r.data.innerRadius,padding:e.radiusPadding}),s=function(t){var o=e[t]+n.event.dx*Math.sqrt(2);e[t]=o,i.redrawSubject(),i.redrawConnector()},l=[di({},a.r1,{drag:s.bind(i,void 0!==e.outerRadius?"outerRadius":"radius")})];e.innerRadius&&l.push(di({},a.r2,{drag:s.bind(i,"innerRadius")})),o=i.mapHandles(l)}return r.attrs["fill-opacity"]=0,{components:[r],handles:o}},Ci=function(){function t(e){var n=e.a,i=e.annotation,o=e.editMode,r=e.dispatcher,a=e.notePadding,s=e.accessors;if(ci(this,t),this.a=n,this.note=-1===i.disable.indexOf("note")&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=-1===i.disable.indexOf("connector")&&n.select("g.annotation-connector"),this.subject=-1===i.disable.indexOf("subject")&&n.select("g.annotation-subject"),this.dispatcher=r,r){var l=Di.bind(null,r,i);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=i,this.editMode=i.editMode||o,this.notePadding=void 0!==a?a:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&i.data&&this.init(s)}return pi(t,[{key:"init",value:function(t){this.annotation.x||this.mapX(t),this.annotation.y||this.mapY(t)}},{key:"mapY",value:function(t){t.y&&(this.annotation.y=t.y(this.annotation.data))}},{key:"mapX",value:function(t){t.x&&(this.annotation.x=t.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(t,e){var i=this;Array.isArray(e)||(e=[e]),e.filter(function(t){return t}).forEach(function(e){var o=e.type,r=e.className,a=e.attrs,s=e.handles,l=e.classID;if("handle"===o)!function(t){var e=t.group,i=t.handles,o=t.r,r=void 0===o?10:o,a=e.selectAll("circle.handle").data(i);a.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(n.drag().container(n.select("g.annotations").node()).on("start",function(t){return t.start&&t.start(t)}).on("drag",function(t){return t.drag&&t.drag(t)}).on("end",function(t){return t.end&&t.end(t)})),e.selectAll("circle.handle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(t){return t.r||r}).attr("class",function(t){return"handle "+(t.className||"")}),a.exit().remove()}({group:t,r:a&&a.r,handles:s});else{ji(t,[i.annotation],o,r,l);for(var h=t.select(o+"."+(l||r)),u=Object.keys(a),c=[],p=h.node().attributes,d=p.length-1;d>=0;d--){var f=p[d].name;-1===u.indexOf(f)&&"class"!==f&&c.push(f)}u.forEach(function(t){"text"===t?h.text(a[t]):h.attr(t,a[t])}),c.forEach(function(t){return h.attr(t,null)})}})}},{key:"getNoteBBox",value:function(){return Ei(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var t=Ei(this.note,".annotation-note-content"),e=this.noteContent.attr("transform").split(/\(|\,|\)/g);return t.offsetCornerX=parseFloat(e[1])+this.annotation.dx,t.offsetCornerY=parseFloat(e[2])+this.annotation.dy,t.offsetX=this.annotation.dx,t.offsetY=this.annotation.dy,t}},{key:"drawSubject",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.annotation.subject,o=e.type,r={type:this,subjectData:i},a={};"circle"===o?a=Ti(r):"rect"===o?a=function(t){var e=t.subjectData,i=t.type;e.width||(e.width=100),e.height||(e.height=100);var o=[],r=e.width,a=e.height,s=ki({data:[[0,0],[r,0],[r,a],[0,a],[0,0]],className:"subject"});if(i.editMode){var l=[{x:r,y:a/2,drag:function(){e.width=n.event.x,i.redrawSubject(),i.redrawConnector()}.bind(i)},{x:r/2,y:a,drag:function(){e.height=n.event.y,i.redrawSubject(),i.redrawConnector()}.bind(i)}];o=i.mapHandles(l)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:o}}(r):"threshold"===o?a=function(t){var e=t.subjectData,n=t.type.annotation.position,i=(void 0!==e.x1?e.x1:n.x)-n.x,o=(void 0!==e.x2?e.x2:n.x)-n.x,r=(void 0!==e.y1?e.y1:n.y)-n.y,a=(void 0!==e.y2?e.y2:n.y)-n.y;return{components:[ki({data:[[i,r],[o,a]],className:"subject"})]}}(r):"badge"===o&&(a=function(t){var e=t.subjectData,i=void 0===e?{}:e,o=t.type,r=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.typeSettings&&r.typeSettings.subject;i.radius||(s&&s.radius?i.radius=s.radius:i.radius=14),i.x||s&&s.x&&(i.x=s.x),i.y||s&&s.y&&(i.y=s.y);var l=[],h=[],u=i.radius,c=.7*u,p=0,d=0,f=Math.sqrt(2)*u,y={xleftcorner:-u,xrightcorner:u,ytopcorner:-u,ybottomcorner:u,xleft:-f,xright:f,ytop:-f,ybottom:f};i.x&&!i.y?p=y["x"+i.x]:i.y&&!i.x?d=y["y"+i.y]:i.x&&i.y&&(p=y["x"+i.x+"corner"],d=y["y"+i.y+"corner"]);var x="translate("+p+", "+d+")",_=Si({className:"subject",data:{radius:u}});_.attrs.transform=x,_.attrs.fill=a.color,_.attrs["stroke-linecap"]="round",_.attrs["stroke-width"]="3px";var m=Si({className:"subject-ring",data:{outerRadius:u,innerRadius:c}});m.attrs.transform=x,m.attrs["stroke-width"]="3px",m.attrs.fill="white";var g=void 0;if(p&&d||!p&&!d)g=ki({className:"subject-pointer",data:[[0,0],[p||0,0],[0,d||0],[0,0]]});else if(p||d){var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t&&t/Math.sqrt(2)/Math.sqrt(2)||e*u/Math.sqrt(2)};g=ki({className:"subject-pointer",data:[[0,0],[v(p),v(d)],[v(p,-1),v(d,-1)],[0,0]]})}if(g&&(g.attrs.fill=a.color,g.attrs["stroke-linecap"]="round",g.attrs["stroke-width"]="3px",h.push(g)),r.editMode){var b={x:2*p,y:2*d,drag:function(){i.x=n.event.x<2*-u?"left":n.event.x>2*u?"right":void 0,i.y=n.event.y<2*-u?"top":n.event.y>2*u?"bottom":void 0,r.redrawSubject()}.bind(r)};b.x||b.y||(b.y=-u),l=r.mapHandles([b])}var w=void 0;return i.text&&(w={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:i.text,"text-anchor":"middle",dy:".25em",x:p,y:d}}),h.push(_),h.push(m),h.push(w),{components:h,handles:l}}(r,this.annotation));var s=a,l=s.components,h=void 0===l?[]:l,u=s.handles,c=void 0===u?[]:u;return h.forEach(function(e){e&&e.attrs&&!e.attrs.stroke&&(e.attrs.stroke=t.annotation.color)}),this.editMode&&(c=c.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),h.push({type:"handle",handles:c})),h}},{key:"drawConnector",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.annotation.connector,i=n.type||e.type,o={type:this,connectorData:n};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var r="curve"===i?Mi(o):"elbow"===i?function(t){var e=t.type,n=t.subjectType,i=e.annotation,o=i.position,r=i.x-o.x,a=r+i.dx,s=i.y-o.y,l=s+i.dy,h=i.subject;if("rect"===n){var u=h.width,c=h.height;(u>0&&i.dx>0||u<0&&i.dx<0)&&(r=Math.abs(u)>Math.abs(i.dx)?u/2:u),(c>0&&i.dy>0||c<0&&i.dy<0)&&(s=Math.abs(c)>Math.abs(i.dy)?c/2:c),r===u/2&&s===c/2&&(r=a,s=l)}var p=[[r,s],[a,l]],d=l-s,f=a-r,y=a,x=l,_=l<s&&a>r||a<r&&l>s?-1:1;if(Math.abs(f)<Math.abs(d)?(y=a,x=s+f*_):(x=l,y=r+d*_),"circle"===n&&(h.outerRadius||h.radius)){var m=(h.outerRadius||h.radius)+(h.radiusPadding||0),g=m/Math.sqrt(2);if(Math.abs(f)>g&&Math.abs(d)>g)p=[[r=g*(a<0?-1:1),s=g*(l<0?-1:1)],[y,x],[a,l]];else if(Math.abs(f)>Math.abs(d)){var v=Math.asin(-l/m);p=[[r=Math.abs(Math.cos(v)*m)*(a<0?-1:1),l],[a,l]]}else{var b=Math.acos(a/m);p=[[a,s=Math.abs(Math.sin(b)*m)*(l<0?-1:1)],[a,l]]}}else p=[[r,s],[y,x],[a,l]];return{components:[ki({data:p,className:"connector"})]}}(o):function(t){var e=Ai(t);return{components:[ki({data:e,className:"connector"})]}}(o),a=r.components,s=void 0===a?[]:a,l=r.handles,h=void 0===l?[]:l,u=s[0];u&&(u.attrs.stroke=this.annotation.color,u.attrs.fill="none");var c=n.end||e.end,p={};if("arrow"===c){var d=u.data[1],f=u.data[0];Math.sqrt(Math.pow(d[0]-f[0],2)+Math.pow(d[1]-f[1],2))<5&&u.data[2]&&(d=u.data[2]),p=function(t){var e=t.annotation,n=t.start,i=t.end,o=t.scale,r=void 0===o?1:o,a=e.position;n=n?[-i[0]+n[0],-i[1]+n[1]]:[e.dx,e.dy],i||(i=[e.x-a.x,e.y-a.y]);var s=i[0],l=i[1],h=n[0],u=n[1],c=10*r,p=16/180*Math.PI,d=Math.atan(u/h);h<0&&(d+=Math.PI);var f=[[s,l],[Math.cos(d+p)*c+s,Math.sin(d+p)*c+l],[Math.cos(d-p)*c+s,Math.sin(d-p)*c+l],[s,l]];return{components:[ki({data:f,className:"connector-end connector-arrow",classID:"connector-end"})]}}({annotation:this.annotation,start:d,end:f,scale:n.endScale})}else"dot"===c?p=function(t){var e=t.line,n=t.scale,i=void 0===n?1:n,o=Si({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(i)}});return o.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[o]}}({line:u,scale:n.endScale}):c&&"none"!==c||this.connector&&this.connector.select(".connector-end").remove();return p.components&&(p.components.forEach(function(e){e.attrs.fill=t.annotation.color,e.attrs.stroke=t.annotation.color}),s=s.concat(p.components)),this.editMode&&0!==h.length&&s.push({type:"handle",handles:h}),s}},{key:"drawNote",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.annotation.note,o=i.align||e.align||"dynamic",r={bbox:e.bbox,align:o,offset:this.annotation.offset},a=i.lineType||e.lineType,s={};"vertical"===a?s=function(t){var e=t.align,n=t.x,i=void 0===n?0:n,o=t.y,r=void 0===o?0:o,a=t.bbox,s=t.offset;"top"===(e=gi(e,s.y))?r-=a.height:"middle"===e&&(r-=a.height/2);var l=[[i,r],[i,r+a.height]];return{components:[ki({data:l,className:"note-line"})]}}(r):"horizontal"===a&&(s=function(t){var e=t.align,n=t.x,i=void 0===n?0:n,o=t.y,r=void 0===o?0:o,a=t.offset,s=t.bbox;"right"===(e=vi(e,a.x))?i-=s.width:"middle"===e&&(i-=s.width/2);var l=[[i,r],[i+s.width,r]];return{components:[ki({data:l,className:"note-line"})]}}(r));var l=s,h=l.components,u=void 0===h?[]:h,c=l.handles,p=void 0===c?[]:c;if(u.forEach(function(e){e.attrs.stroke=t.annotation.color}),this.editMode){p=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),u.push({type:"handle",handles:p});var d=this.dragNote.bind(this),f=this.dragstarted.bind(this),y=this.dragended.bind(this);this.note.call(n.drag().container(n.select("g.annotations").node()).on("start",function(t){return f(t)}).on("drag",function(t){return d(t)}).on("end",function(t){return y(t)}))}else this.note.on("mousedown.drag",null);return u}},{key:"drawNoteContent",value:function(t){var e=this.annotation.note,n=void 0!==e.padding?e.padding:this.notePadding,i=e.orientation||t.orientation||"topBottom",o=e.lineType||t.lineType,r=e.align||t.align||"dynamic";"vertical"===o?i="leftRight":"horizontal"===o&&(i="topBottom");var a=function(t){var e=t.padding,n=void 0===e?0:e,i=t.bbox,o=void 0===i?{x:0,y:0,width:0,height:0}:i,r=t.align,a=t.orientation,s=t.offset,l=void 0===s?{x:0,y:0}:s,h=-o.x,u=0;return-1!==bi.indexOf(a)?(r=vi(r,l.x),l.y<0&&"topBottom"===a||"top"===a?u-=o.height+n:u+=n,"middle"===r?h-=o.width/2:"right"===r&&(h-=o.width)):-1!==wi.indexOf(a)&&(r=gi(r,l.y),l.x<0&&"leftRight"===a||"left"===a?h-=o.width+n:h+=n,"middle"===r?u-=o.height/2:"top"===r&&(u-=o.height)),{x:h,y:u}}({padding:n,bbox:t.bbox,offset:this.annotation.offset,orientation:i,align:r}),s=a.x,l=a.y;return this.offsetCornerX=s+this.annotation.dx,this.offsetCornerY=l+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+s+", "+l+")"),[]}},{key:"drawOnScreen",value:function(t,e){return this.drawOnSVG(t,e)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:t})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:t}))}},{key:"setPosition",value:function(){var t=this.annotation.position;this.a.attr("transform","translate("+t.x+", "+t.y+")")}},{key:"setOffset",value:function(){if(this.note){var t=this.annotation.offset;this.note.attr("transform","translate("+t.x+", "+t.y+")")}}},{key:"setPositionWithAccessors",value:function(t){t&&this.annotation.data&&(this.mapX(t),this.mapY(t)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){n.event.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var t=this.annotation.position;t.x+=n.event.dx,t.y+=n.event.dy,this.annotation.position=t}},{key:"dragNote",value:function(){var t=this.annotation.offset;t.x+=n.event.dx,t.y+=n.event.dy,this.annotation.offset=t}},{key:"mapHandles",value:function(t){var e=this;return t.map(function(t){return di({},t,{start:e.dragstarted.bind(e),end:e.dragended.bind(e)})})}}]),t}(),Ii=function(t,e,n){return function(i){function o(t){ci(this,o);var n=xi(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,t));return n.typeSettings=e,e.disable&&e.disable.forEach(function(t){n[t]&&n[t].remove(),n[t]=void 0,"note"===t&&(n.noteContent=void 0)}),n}return yi(o,t),pi(o,[{key:"className",value:function(){return""+(e.className||fi(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"className",this)&&fi(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(t){return this.typeSettings.subject=di({},e.subject,this.typeSettings.subject),fi(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawSubject",this).call(this,di({},t,this.typeSettings.subject))}},{key:"drawConnector",value:function(t){return this.typeSettings.connector=di({},e.connector,this.typeSettings.connector),fi(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawConnector",this).call(this,di({},t,e.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(t){return this.typeSettings.note=di({},e.note,this.typeSettings.note),fi(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawNote",this).call(this,di({},t,e.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(t){return fi(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawNoteContent",this).call(this,di({},t,e.note,this.typeSettings.note))}}],[{key:"init",value:function(t,e){return fi(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,t,e),n&&(t=n(t,e)),t}}]),o}()},zi=function(t){function e(t){ci(this,e);var n=xi(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.textWrap=t.textWrap||120,n.drawText(),n}return yi(e,Ci),pi(e,[{key:"updateTextWrap",value:function(t){this.textWrap=t,this.drawText()}},{key:"drawText",value:function(){if(this.note){ji(this.note,[this.annotation],"g","annotation-note-content");var t=this.note.select("g.annotation-note-content");ji(t,[this.annotation],"rect","annotation-note-bg"),ji(t,[this.annotation],"text","annotation-note-label"),ji(t,[this.annotation],"text","annotation-note-title");var e={height:0},n=this.a.select("text.annotation-note-label"),i=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,o=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter;if(this.annotation.note.title){var r=this.a.select("text.annotation-note-title");r.text(this.annotation.note.title),r.attr("fill",this.annotation.color),r.attr("font-weight","bold"),r.call(Ri,i,o),e=r.node().getBBox()}n.text(this.annotation.note.label).attr("dx","0"),n.call(Ri,i,o),n.attr("y",1.1*e.height||0),n.attr("fill",this.annotation.color);var a=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",a.width).attr("height",a.height).attr("x",a.x).attr("fill","white").attr("fill-opacity",0)}}}]),e}(),Fi=(Ii(zi,{className:"label",note:{align:"middle"},disable:["subject"]}),Ii(zi,{className:"callout",note:{lineType:"horizontal"},disable:["subject"]})),Oi=Ii(Fi,{className:"callout elbow",connector:{type:"elbow"},disable:["subject"]}),ji=(Ii(Fi,{className:"callout curve",connector:{type:"curve"},disable:["subject"]}),Ii(Ci,{className:"badge",subject:{type:"badge"},disable:["connector","note"]}),Ii(Oi,{className:"callout circle",subject:{type:"circle"}}),Ii(Oi,{className:"callout rect",subject:{type:"rect"}}),Ii(function(t){function e(){return ci(this,e),xi(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return yi(e,Fi),pi(e,[{key:"mapY",value:function(t){fi(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,t);var n=this.annotation;(n.subject.x1||n.subject.x2)&&n.data&&t.y&&(n.y=t.y(n.data)),!n.subject.x1&&!n.subject.x2||n.x||(n.x=n.subject.x1||n.subject.x2)}},{key:"mapX",value:function(t){fi(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,t);var n=this.annotation;(n.subject.y1||n.subject.y2)&&n.data&&t.x&&(n.x=t.x(n.data)),!n.subject.y1&&!n.subject.y2||n.y||(n.y=n.subject.y1||n.subject.y2)}}]),e}(),{className:"callout xythreshold",subject:{type:"threshold"}}),function(t,e,n,i,o){var r=t.selectAll(n+"."+(o||i)).data(e);return r.enter().append(n).merge(r).attr("class",i),r.exit().remove(),t}),Di=function(t,e,n){var i=n.component,o=n.name;i&&i.on("mouseover.annotations",function(){t.call(o+"over",i,e)}).on("mouseout.annotations",function(){return t.call(o+"out",i,e)}).on("click.annotations",function(){return t.call(o+"click",i,e)})},Ri=function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.2;t.each(function(){for(var t=n.select(this),r=t.text().split(i||/[ \t\r\n]+/).reverse().filter(function(t){return""!==t}),a=void 0,s=[],l=t.text(null).append("tspan").attr("x",0).attr("dy","0.8em");a=r.pop();)s.push(a),l.text(s.join(" ")),l.node().getComputedTextLength()>e&&s.length>1&&(s.pop(),l.text(s.join(" ")),s=[a],l=t.append("tspan").attr("x",0).attr("dy",o+"em").text(a))})},Ei=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":not(.handle)";return t?t.selectAll(e).nodes().reduce(function(t,e){var n=e.getBBox();t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),t.width=Math.max(t.width,n.width);var i=e&&e.attributes&&e.attributes.y;return t.height=Math.max(t.height,(i&&parseFloat(i.value)||0)+n.height),t},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function Ni(t){return.65*(t-.5)*2*Math.PI}var Li=n.scaleLinear().domain([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]).range(["green","green","green","green","green","green","green","green","orange","red","red"]).interpolate(n.interpolateHcl);function Bi(t){return Li(t)}function Hi(t,e){return{x:Math.cos(t-Math.PI/2)*e,y:Math.sin(t-Math.PI/2)*e}}function Vi(t,e,i){return void 0===i&&(i=!1),function(o){var r=n.interpolate(o.angle,t);return o.angle=t,function(t){return function(t,e,n){void 0===n&&(n=!1);var i=Hi(t,e),o=180*t/Math.PI+(!0===n?180:0);return"translate("+i.x+", "+i.y+") rotate("+o+")"}(r(t),e,i)}}}function qi(t,e,i){return function(o){var r=n.interpolate(o.startAngle,t),a=n.interpolate(o.endAngle,e);return function(t){return o.startAngle=r(t),o.endAngle=a(t),i(o)}}}var Wi=function(t){function e(){var e=t.call(this)||this;return e._d3Arc=F().innerRadius(85).outerRadius(100),e}return r(e,t),e.prototype.tip=function(t){var e=this;if(null===t||""===t.label)this._tooltipG.transition().style("opacity",0).on("interrupt end",function(){e._tooltipG.selectAll("g").remove()});else{this._tooltipG.interrupt().style("opacity",1),t.w=this._centerText.datum().w+10;var i="horizontal",o=0,r=5,a=5;t.y>=5&&t.y<=25?(o=t.x<0?-t.w/2:t.w/2,r=12.5,a=void 0,i="vertical"):t.y>25&&(r=25,a=0);var s=function(){var t=[],e=void 0,i=void 0,o=[],r={},a={},s=!1,l=void 0,h=Fi,u=void 0,c=void 0,p=n.dispatch("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),d=void 0,f=function(i){d=i,s||i.selectAll("circle.handle").remove();var f=t.map(function(t){return t.type||(t.type=h),t.disable||(t.disable=o),new _i(t)});e=e||new mi({annotations:f,accessors:r,accessorsInverse:a,ids:l}),i.selectAll("g").data([e]).enter().append("g").attr("class","annotations");var y=i.select("g.annotations");ji(y,e.annotations,"g","annotation");var x=y.selectAll("g.annotation");x.each(function(t){var e=n.select(this);e.attr("class","annotation"),ji(e,[t],"g","annotation-connector"),ji(e,[t],"g","annotation-subject"),ji(e,[t],"g","annotation-note"),ji(e.select("g.annotation-note"),[t],"g","annotation-note-content"),t.type="[object Object]"===t.type.toString()?t.type:new t.type({a:e,annotation:t,textWrap:u,notePadding:c,editMode:s,dispatcher:p,accessors:r}),t.type.draw(),t.type.drawText&&t.type.drawText()})};return f.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",e.json),window.copy(JSON.stringify(e.json.map(function(t){return delete t.type,t}))),f},f.update=function(){return t&&e&&(t=e.annotations.map(function(t){return t.type.draw(),t})),f},f.updateText=function(){return e&&(e.updateText(u),t=e.annotations),f},f.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,f},f.disable=function(n){return arguments.length?(o=n,e&&(e.updateDisable(o),t=e.annotations),f):o},f.textWrap=function(n){return arguments.length?(u=n,e&&(e.updateTextWrap(u),t=e.annotations),f):u},f.notePadding=function(n){return arguments.length?(c=n,e&&(e.updateNotePadding(c),t=e.annotations),f):c},f.type=function(n,i){return arguments.length?(h=n,e&&(e.annotations.map(function(t){t.type.note&&t.type.note.selectAll("*:not(.annotation-note-content)").remove(),t.type.noteContent&&t.type.noteContent.selectAll("*").remove(),t.type.subject&&t.type.subject.selectAll("*").remove(),t.type.connector&&t.type.connector.selectAll("*").remove(),t.type.typeSettings={},t.type=h,t.subject=i&&i.subject||t.subject,t.connector=i&&i.connector||t.connector,t.note=i&&i.note||t.note}),t=e.annotations),f):h},f.annotations=function(n){return arguments.length?(t=n,e&&e.annotations&&(t.some(function(t){return!t.type||"[object Object]"!==t.type.toString()})?(e=null,f(d)):e.annotations=t),f):e&&e.annotations||t},f.context=function(t){return arguments.length?(i=t,f):i},f.accessors=function(t){return arguments.length?(r=t,f):r},f.accessorsInverse=function(t){return arguments.length?(a=t,f):a},f.ids=function(t){return arguments.length?(l=t,f):l},f.editMode=function(n){return arguments.length?(s=n,d&&d.selectAll("g.annotation").classed("editable",s),e&&(e.editMode(s),t=e.annotations),f):s},f.collection=function(t){return arguments.length?(e=t,f):e},f.on=function(){var t=p.on.apply(p,arguments);return t===p?f:t},f}().type(Oi).annotations([{data:t,dx:-t.x+o,dy:-t.y+r,color:"black",note:{label:t.label,lineType:i,padding:a,align:"middle"}}]).accessors({x:function(t){return t.x},y:function(t){return t.y}});this._tooltipG.call(s)}},e.prototype.calcSize=function(t,e,n){var i=t.node().getBBox(),o=e/i.width,r=n/i.height,a=o<r?o:r;return{width:i.width,height:i.height,scale:a}},e.prototype.updateText=function(t,e,n,i,o){t.datum({x:e,y:n,w:i,h:o}).attr("transform",null);var r=this.calcSize(t,i,o),a=e+i/2-r.width/2*r.scale,s=n+o/2-r.height/2*r.scale;t.attr("transform","translate("+a+", "+s+") scale("+r.scale+")")},e.prototype.calcWidth=function(){return Math.min(this.width(),this.height(),this.maxDiameter())},e.prototype.enter=function(e,n){var i=this;t.prototype.enter.call(this,e,n),n.on("click",function(t){i.click(t)}),this._usageArc=n.append("path").datum({startAngle:Ni(0),endAngle:Ni(0)}).style("fill","green").on("mousemove",function(t){var e=i._d3Arc.centroid(t),n=e[0],o=e[1];i.tip({x:n,y:o,label:i.valueDescription()})}).on("mouseout",function(t){i.tip(null)}),this._freeArc=n.append("path").datum({startAngle:Ni(0),endAngle:Ni(1)}).style("fill","lightGrey"),this._meanArc=n.append("path").datum({startAngle:Ni(0),endAngle:Ni(0)}).style("fill","black").on("mousemove",function(t){var e=i._d3Arc.centroid(t),n=e[0],o=e[1];i.tip({x:n,y:o,label:i.tickValueDescription()})}).on("mouseout",function(t){i.tip(null)});var o=this;function r(){return n.append("path").datum({angle:Ni(0)}).style("fill","black").style("stroke","black").attr("d","M  0 0 l -3 -3 l 6 0 z").on("mousemove",function(t){var e=o._d3Arc.centroid(o._meanArc.datum()),n=e[0],i=e[1];o.tip({x:n,y:i,label:o.tickValueDescription()})}).on("mouseout",function(t){o.tip(null)})}this._indInner=r(),this._indOuter=r(),this._centerText=n.append("text").attr("dy",".66em").style("fill","green").on("mousemove",function(t){i.tip({x:0,y:0,label:i.valueDescription()})}).on("mouseout",function(t){i.tip(null)}),this._bottomText=n.append("text").attr("dy",".66em").style("fill","black").on("mousemove",function(t){i.tip({x:0,y:t.y,label:i.titleDescription()})}).on("mouseout",function(t){i.tip(null)}),this._tooltipG=n.append("g").attr("class","annotation-tip")},e.prototype.update=function(i,o){t.prototype.update.call(this,i,o),o.style("cursor",this.click!==e.prototype.click?"pointer":null);var r=this.calcWidth()/3,a=this.calcWidth()/2-5;this._d3Arc.innerRadius(r).outerRadius(a);var s=this.value(),l=this.tickValue();this._usageArc.style("fill",Bi(s)).transition().duration(750).attrTween("d",qi(Ni(0),Ni(s),this._d3Arc)),this._freeArc.transition().duration(750).attrTween("d",qi(Ni(s),Ni(1),this._d3Arc)),this._meanArc.style("visibility",this.showTick()?"visible":"hidden").transition().duration(750).attrTween("d",qi(Ni(l-.001),Ni(l+.001),this._d3Arc)),this._indInner.style("visibility",this.showTick()?"visible":"hidden").transition().duration(750).attrTween("transform",Vi(Ni(l),r,!0)),this._indOuter.style("visibility",this.showTick()?"visible":"hidden").transition().duration(750).attrTween("transform",Vi(Ni(l),a)),this._centerText.style("fill",Bi(s)).text(n.format(".0%")(s)),this._bottomText.text(this.title());var h=Hi(Ni(1),r-8);this.updateText(this._centerText,-h.x,-h.y,2*h.x,2*h.y);var u=Hi(Ni(1),a);u.y+=5;var c=this.calcWidth()-20,p=this.calcWidth()/2-u.y-5;this.updateText(this._bottomText,-c/2,u.y,c,p)},e.prototype.click=function(t){},a([n.publish("","string"),s("design:type",Function)],e.prototype,"title",void 0),a([n.publish("","string"),s("design:type",Function)],e.prototype,"titleDescription",void 0),a([n.publish(128,"number"),s("design:type",Function)],e.prototype,"maxDiameter",void 0),a([n.publish(0,"number"),s("design:type",Function)],e.prototype,"value",void 0),a([n.publish("","string"),s("design:type",Function)],e.prototype,"valueDescription",void 0),a([n.publish(!1,"boolean"),s("design:type",Function)],e.prototype,"showTick",void 0),a([n.publish(0,"number"),s("design:type",Function)],e.prototype,"tickValue",void 0),a([n.publish("","string"),s("design:type",Function)],e.prototype,"tickValueDescription",void 0),e}(n.SVGWidget);Wi.prototype._class+=" chart_Gauge";At(".chart_Pie path {\r\n    cursor: pointer;\r\n}\r\n\r\n.chart_Pie > g > text {\r\n    cursor: pointer;\r\n}\r\n\r\n.chart_Pie .arc path {\r\n    stroke: white;\r\n    stroke-width: 0.75px;\r\n}\r\n\r\n.chart_Pie .arc.selected path {\r\n    stroke: red;\r\n    stroke-width: 1.5px;\r\n}\r\n\r\n.chart_Pie polyline {\r\n    opacity: .3;\r\n    stroke: black;\r\n    stroke-width: 2px;\r\n    fill: none;\r\n}");var Gi=function(t){function o(){var i=t.call(this)||this;return i._minLabelTop=0,i._maxLabelBottom=0,e.I2DChart.call(i),e.ITooltip.call(i),n.Utility.SimpleSelectionMixin.call(i),i.d3Pie=function(){var t=L,e=N,n=null,i=d(0),o=d(S),r=d(0);function a(a){var s,l,h,u,c,p=a.length,d=0,f=new Array(p),y=new Array(p),x=+i.apply(this,arguments),_=Math.min(S,Math.max(-S,o.apply(this,arguments)-x)),m=Math.min(Math.abs(_)/p,r.apply(this,arguments)),g=m*(_<0?-1:1);for(s=0;s<p;++s)(c=y[f[s]=s]=+t(a[s],s,a))>0&&(d+=c);for(null!=e?f.sort(function(t,n){return e(y[t],y[n])}):null!=n&&f.sort(function(t,e){return n(a[t],a[e])}),s=0,h=d?(_-p*g)/d:0;s<p;++s,x=u)l=f[s],u=x+((c=y[l])>0?c*h:0)+g,y[l]={data:a[l],index:s,value:c,startAngle:x,endAngle:u,padAngle:m};return y}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:d(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:d(+t),a):i},a.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:d(+t),a):o},a.padAngle=function(t){return arguments.length?(r="function"==typeof t?t:d(+t),a):r},a}(),i.d3Arc=F(),i.d3LabelArc=F(),i.tooltipTick_default(!1).tooltipOffset_default(0),i}return r(o,t),o.prototype.intersection=function(t,e){return this.intersectCircle(this.calcOuterRadius(),t,e)},o.prototype.calcInnerRadius=function(){return this.innerRadius_exists()?this.calcOuterRadius()*this.innerRadius()/100:0},o.prototype.calcOuterRadius=function(){var t=this,e=this.textSize(this.data().map(function(e){return t.getLabelText({data:e},!1)}),"Verdana",12).width,n=this._size.width-2*e-20,i=this._size.height-36-this._smallValueLabelHeight,o=Math.min(n,i)/2-2;return n/2-2<this.minOuterRadius()?this._labelWidthLimit=e-(this.minOuterRadius()-(n/2-2)):this._labelWidthLimit=e,o<this.minOuterRadius()?this.minOuterRadius():o},o.prototype.calcSmallValueLabelHeight=function(){var t=this.data().reduce(function(t,e){return t+e[1]},0),e=0;return this.data().forEach(function(n){n[1]/t<.1&&e++}),this.labelHeight()*e},o.prototype.calcTotalValue=function(){return this.data().reduce(function(t,e){return t+e[1]},0)},o.prototype.getLabelText=function(t,e){var n,i=t.data[0];if(void 0!==this._labelWidthLimit&&e){var o=this.textSize(i,"Verdana",this.labelHeight()).width;this._labelWidthLimit<o&&(i=(n=i.length*(this._labelWidthLimit/o)-3)<i.length?i.slice(0,n)+"...":i)}if(this.showSeriesValue()&&(i+=" : "+this._seriesValueFormatter(t.data[1])),this.showSeriesPercentage()){var r=t.data[1]/this._totalValue*100;i+=" : "+this._seriesPercentageFormatter(r)+"%"}return i},o.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._selection.widgetElement(n),this._slices=n.append("g"),this._labels=n.append("g");var i=this;this.tooltipHTML(function(t){switch(i.tooltipStyle()){case"series-table":return i.tooltipFormat({label:t.data[0],arr:i.columns().slice(1).map(function(e,n){return{label:e,color:i._palette(t.data[0]),value:t.data[n+1]}})});default:return i.tooltipFormat({label:t.data[0],value:t.data[1]})}})},o.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i);var r=this;this.updateD3Pie(),this._palette=this._palette.switch(this.paletteID()),this._seriesValueFormatter=n.format(this.seriesValueFormat()),this._seriesPercentageFormatter=n.format(this.seriesPercentageFormat()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._smallValueLabelHeight=this.calcSmallValueLabelHeight(),this._totalValue=this.calcTotalValue();var a=this.calcInnerRadius(),s=this.calcOuterRadius(),l=s+12;this.d3Arc.innerRadius(a).padRadius(s).outerRadius(s),this._quadIdxArr=[[],[],[],[]];var h=this.data().slice().sort(function(t,e){return t[1]-e[1]>0?-1:1}),u=this._slices.selectAll(".arc").data(this.d3Pie(h),function(t){return t.data[0]});this._labelPositions=[],u.enter().append("g").attr("class",function(t,e){return"arc series series-"+o.cssTag(t.data[0])}).attr("opacity",0).call(this._selection.enter.bind(this._selection)).on("click",function(t){r.click(r.rowToObj(t.data),r.columns()[1],r._selection.selected(this))}).on("dblclick",function(t){r.dblclick(r.rowToObj(t.data),r.columns()[1],r._selection.selected(this))}).each(function(t,e){n.select(this).append("path").on("mouseout.tooltip",r.tooltip.hide).on("mousemove.tooltip",r.tooltip.show).on("mouseover",y(0,0)).on("mouseout",y(-5,150))}).merge(u).transition().attr("opacity",1).each(function(t,e){var i=r.getQuadrant(f(t));r._quadIdxArr[i].push(e),t.outerRadius=s-5,n.select(this).select("path").transition().attr("d",r.d3Arc).style("fill",r.fillColor(t.data,r.columns()[1],t.data[1]))}),u.exit().transition().style("opacity",0).remove(),this.d3LabelArc.innerRadius(l).outerRadius(l);var c=this._labels.selectAll("text").data(this.d3Pie(h),function(t){return t.data[0]}),p=c.enter().append("text").on("mouseout.tooltip",r.tooltip.hide).on("mousemove.tooltip",r.tooltip.show).attr("dy",".5em").on("click",function(t){r._slices.selectAll("g").filter(function(e){t.data===e.data&&r._selection.click(this)}),r.click(r.rowToObj(t.data),r.columns()[1],r._selection.selected(this))}).on("dblclick",function(t){r.dblclick(r.rowToObj(t.data),r.columns()[1],r._selection.selected(this))}).merge(c).text(function(t){return o.getLabelText(t,!0)}).each(function(t,e){var n=r.d3LabelArc.centroid(t),i=f(t);n[0]=l*(r.isLeftSide(i)?1:-1),r._labelPositions.push({top:n[1],bottom:n[1]+r.labelHeight()})});this.adjustForOverlap(),p.transition().style("font-size",this.labelHeight()+"px").attr("transform",function(t,e){var n=r.d3LabelArc.centroid(t);return n[0]=l*(r.isLeftSide(f(t))?1:-1),n[1]=r._labelPositions[e].top,"translate("+n+")"}).style("text-anchor",function(t){return o.isLeftSide(f(t))?"start":"end"}),c.exit().remove();var d=this._labels.selectAll("polyline").data(this.d3Pie(h),function(t){return o.getLabelText(t,!0)});function f(t){return t.startAngle+(t.endAngle-t.startAngle)/2}function y(t,e){return function(){n.select(this).transition().delay(e).attrTween("d",function(e){var i=n.interpolate(e.outerRadius,s+t);return function(t){return e.outerRadius=i(t),r.d3Arc(e)}})}}d.enter().append("polyline").merge(d).transition().attr("points",function(t,e){var n=r.d3LabelArc.centroid(t),i=r.d3Arc.centroid(t),o=n.slice();return n[0]=l*(r.isLeftSide(f(t))?1:-1),n[1]=r._labelPositions[e].top,[i,o,n]}),d.exit().remove(),this.centerOnLabels()},o.prototype.isLeftSide=function(t){return(t=i.normalizeRadians(t))>2*Math.PI?t:t<Math.PI&&t>0},o.prototype.getQuadrant=function(t){var e=0,n=i.normalizeRadians(t);return e=n<=1*Math.PI&&n>=.5*Math.PI?3:e,e=n<=.5*Math.PI&&n>=0*Math.PI?2:e,e=n<=0*Math.PI&&n>=-.5*Math.PI?1:e},o.prototype.centerOnLabels=function(){var t=this.pos().y,e=2*t,n=this.calcOuterRadius(),i=Math.min(this._minLabelTop,-n),o=Math.max(this._maxLabelBottom,n),r=e-(o-i),a=Math.abs(this._minLabelTop),s=0;o>t?(s=t-o+this.labelHeight()/2,s-=r/2):i<0&&a>t&&(s=a-t+this.labelHeight()/2,s+=r/2);var l=this.pos();this.pos({y:l.y+s,x:l.x})},o.prototype.adjustForOverlap=function(){var t=this,e=this.labelHeight();this._quadIdxArr.forEach(function(n,i){var o;t._quadIdxArr[i].sort(function(e,n){return 1===i||2===i?t._labelPositions[e].top>t._labelPositions[n].top?-1:1:0===i||3===i?t._labelPositions[e].top>t._labelPositions[n].top?1:-1:void 0}),t._quadIdxArr[i].forEach(function(n,r){if(r>0)if(1===i||2===i){if(o<t._labelPositions[n].bottom){var a=t._labelPositions[n].bottom-o;t._labelPositions[n].top-=a,t._labelPositions[n].bottom-=a}}else if((0===i||3===i)&&o+e>t._labelPositions[n].top){a=Math.abs(t._labelPositions[n].top)-Math.abs(o+e);t._labelPositions[n].top-=a,t._labelPositions[n].bottom-=a}o=t._labelPositions[n].top})}),this._minLabelTop=0,this._maxLabelBottom=0,this._quadIdxArr.forEach(function(e,n){t._quadIdxArr[n].forEach(function(e,n){t._minLabelTop>t._labelPositions[e].top&&(t._minLabelTop=t._labelPositions[e].top),t._maxLabelBottom<t._labelPositions[e].bottom&&(t._maxLabelBottom=t._labelPositions[e].bottom)})})},o.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},o.prototype.updateD3Pie=function(){var t=i.normalizeRadians(i.degreesToRadians(this.startAngle()));this.d3Pie.padAngle(.0025).startAngle(t).endAngle(2*Math.PI+t).sort(function(t,e){return e[1]<t[1]?-1:e[1]>t[1]?1:0}).value(function(t){return t[1]})},o.__inputs=[{id:"label",type:"string"},{id:"value",type:"number"}],o}(n.SVGWidget);Gi.prototype._class+=" chart_Pie",Gi.prototype.implements(e.I2DChart.prototype),Gi.prototype.implements(e.ITooltip.prototype),Gi.prototype.mixin(n.Utility.SimpleSelectionMixin),Gi.prototype.publish("showSeriesValue",!1,"boolean","Append data series value next to label"),Gi.prototype.publish("seriesValueFormat",",.0f","string","Number format used for formatting series values",null,{disable:function(t){return!t.showSeriesValue()}}),Gi.prototype.publish("showSeriesPercentage",!1,"boolean","Append data series percentage next to label"),Gi.prototype.publish("seriesPercentageFormat",",.0f","string","Number format used for formatting series percentages",null,{disable:function(t){return!t.showSeriesPercentage()}}),Gi.prototype.publish("paletteID","default","set","Color palette for this widget",Gi.prototype._palette.switch(),{tags:["Basic","Shared"]}),Gi.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),Gi.prototype.publish("innerRadius",0,"number","Sets inner pie hole radius as a percentage of the radius of the pie chart",null,{tags:["Basic"],range:{min:0,step:1,max:100}}),Gi.prototype.publish("minOuterRadius",20,"number","Minimum outer radius (pixels)"),Gi.prototype.publish("startAngle",0,"number","Starting angle of the first (and largest) wedge (degrees)"),Gi.prototype.publish("labelHeight",12,"number","Font size of labels (pixels)");var Xi=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.postUpdate=function(e,n){t.prototype.postUpdate.call(this,e,n);var i=this._pos.x,o=this._pos.y;"origin"===this._drawStartPos&&this._target instanceof SVGElement&&(i-=this._size.width/2,o-=this._size.height/2),o+=this._size.height/4,this._element.attr("transform","translate("+i+","+o+")scale("+this._widgetScale+")")},e.prototype.updateD3Pie=function(){t.prototype.updateD3Pie.call(this),this.d3Pie.startAngle(-Math.PI/2).endAngle(Math.PI/2)},e}(Gi);Xi.prototype._class+=" chart_HalfPie";var Yi=Math.PI/3,Ui=[0,Yi,2*Yi,3*Yi,4*Yi,5*Yi];function Zi(t){return t[0]}function Ji(t){return t[1]}At(".chart_HexBin .hexagon {\r\n  fill: none;\r\n  stroke: #000;\r\n  stroke-width: .5px;\r\n}\r\n\r\n.chart_HexBin .hexagon.selected {\r\n  stroke: red;\r\n}\r\n");var Qi=function(t){function i(){var i=t.call(this)||this;return e.I2DAggrChart.call(i),i.tooltipValueFormat_default(",.0f"),e.ITooltip.call(i),i.tooltipHTML(function(t){var e=n.extent(t,function(t){return t.label}),o=n.extent(t,function(t){return t.value});return i.tooltipFormat({series:e[0]===e[1]?e[0]:e[0]+" -> "+e[1],label:o[0]===o[1]?o[0]:o[0]+" -> "+o[1],value:t.length})}),i._hexbin=function(){var t,e,n,i=0,o=0,r=1,a=1,s=Zi,l=Ji;function h(t){var i,o={},r=[],a=t.length;for(i=0;i<a;++i)if(!isNaN(u=+s.call(null,h=t[i],i,t))&&!isNaN(c=+l.call(null,h,i,t))){var h,u,c,p=Math.round(c/=n),d=Math.round(u=u/e-(1&p)/2),f=c-p;if(3*Math.abs(f)>1){var y=u-d,x=d+(u<d?-1:1)/2,_=p+(c<p?-1:1),m=u-x,g=c-_;y*y+f*f>m*m+g*g&&(d=x+(1&p?1:-1)/2,p=_)}var v=d+"-"+p,b=o[v];b?b.push(h):(r.push(b=o[v]=[h]),b.x=(d+(1&p)/2)*e,b.y=p*n)}return r}function u(t){var e=0,n=0;return Ui.map(function(i){var o=Math.sin(i)*t,r=-Math.cos(i)*t,a=o-e,s=r-n;return e=o,n=r,[a,s]})}return h.hexagon=function(e){return"m"+u(null==e?t:+e).join("l")+"z"},h.centers=function(){for(var s=[],l=Math.round(o/n),h=Math.round(i/e),u=l*n;u<a+t;u+=n,++l)for(var c=h*e+(1&l)*e/2;c<r+e/2;c+=e)s.push([c,u]);return s},h.mesh=function(){var e=u(t).slice(0,4).join("l");return h.centers().map(function(t){return"M"+t+"m"+e}).join("")},h.x=function(t){return arguments.length?(s=t,h):s},h.y=function(t){return arguments.length?(l=t,h):l},h.radius=function(i){return arguments.length?(e=2*(t=+i)*Math.sin(Yi),n=1.5*t,h):t},h.size=function(t){return arguments.length?(i=o=0,r=+t[0],a=+t[1],h):[r-i,a-o]},h.extent=function(t){return arguments.length?(i=+t[0][0],o=+t[0][1],r=+t[1][0],a=+t[1][1],h):[[i,o],[r,a]]},h.radius(1)}().x(function(t){return t.x}).y(function(t){return t.y}),i.xAxisGuideLines_default(!1).yAxisGuideLines_default(!1),i}return r(i,t),i.prototype.xPos=function(t,e){return"horizontal"===t.orientation()?t.dataPos(e.label):t.valuePos(e.value)},i.prototype.yPos=function(t,e){return"horizontal"===t.orientation()?t.valuePos(e.value):t.dataPos(e.label)},i.prototype.layerUpdate=function(e,i,o){void 0===o&&(o=250),t.prototype.layerUpdate.call(this,e,i,o);var r=this;this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._hexbin.extent([0,0],[this.width(),this.height()]).radius(this.binSize());var a=this.flattenData().map(function(t){return{x:r.xPos(e,t),y:r.yPos(e,t),label:e.parseData(t.label),value:e.parseValue(t.value),origRow:t}}),s=this._hexbin(a),l=n.min(s,function(t){return t.length}),h=n.max(s,function(t){return t.length});this._dataMinWeight=l,this._dataMaxWeight=h;var u=i.selectAll(".hexagon").data(s,function(t){return t.i+"_"+t.j});u.enter().append("path").attr("class","hexagon").call(e._selection.enter.bind(e._selection)).on("click",function(t){var n=r.data();r.click(t.map(function(t){return e.rowToObj(n[t.origRow.rowIdx])}),r.columns()[1],e._selection.selected(this))}).on("dblclick",function(t){var n=r.data();r.dblclick(t.map(function(t){return e.rowToObj(n[t.origRow.rowIdx])}),r.columns()[1],e._selection.selected(this))}).on("mouseout.tooltip",r.tooltip.hide).on("mousemove.tooltip",r.tooltip.show).attr("transform",function(t){return"translate("+t.x+","+t.y+")scale(0)"}).merge(u).transition().duration(o).attr("d",this._hexbin.hexagon()).attr("transform",function(t){return"translate("+t.x+","+t.y+")scale(1)"}).style("fill",function(t){return r._palette(t.length,l,h)}),u.exit().transition().duration(o).attr("transform",function(t){return"translate("+t.x+","+t.y+")scale(0)"}).remove()},i.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},i.prototype.click=function(t,e,n){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+n)},i.prototype.dblclick=function(t,e,n){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+n)},i.__inputs=[{id:"x",type:"any"},{id:"y",type:"number"}],i}(Pt);Qi.prototype._class+=" chart_HexBin",Qi.prototype.implements(e.I2DAggrChart.prototype),Qi.prototype.implements(e.ITooltip.prototype),Qi.prototype.publish("paletteID","Blues","set","Color palette for this widget",Qi.prototype._palette.switch(),{tags:["Basic","Shared"]}),Qi.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),Qi.prototype.publish("binSize",20,"number","Bin radius",null,{range:{min:1,max:300,step:1}});At(".chart_Line .dataLine {\r\n  fill: none;\r\n  stroke: steelblue;\r\n  stroke-width: 1.5px;\r\n}\r\n\r\n");var Ki=function(t){function e(){var e=t.call(this)||this;return e.interpolate_default("linear"),e}return r(e,t),e}(Tt);Ki.prototype._class+=" chart_Line";var $i=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.postUpdate=function(e,n){t.prototype.postUpdate.call(this,e,n);var i="left"===this.orientation()?0:this._size.width,o=this._size.height;"origin"===this._drawStartPos&&this._target instanceof SVGElement&&(i-=this._size.width/2,o-=this._size.height/2),this._element.attr("transform","translate("+i+","+o+")scale("+this._widgetScale+")")},e.prototype.updateD3Pie=function(){t.prototype.updateD3Pie.call(this),this.d3Pie.startAngle("left"===this.orientation()?0:-Math.PI/2).endAngle("left"===this.orientation()?Math.PI/2:0)},e.prototype.calcOuterRadius=function(){var t=this,e=this.textSize(this.data().map(function(e){return t.getLabelText({data:e})}),"Verdana",12).width;return Math.min(this._size.width-e-10,this._size.height-36)-2},e}(Gi);$i.prototype._class+=" chart_QuarterPie",$i.prototype.publish("orientation","left","set","Determines the placement and start/end angle.",["left","right"]);var to=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._g=n.append("g"),this._leftLine=this._g.append("rect"),this._rightLine=this._g.append("rect"),this._midLine=this._g.append("rect"),this._midOuterRect=this._g.append("rect"),this._midInnerRect1=this._g.append("rect"),this._midInnerRect2=this._g.append("rect"),this._q0text=this._g.append("text"),this._q1text=this._g.append("text"),this._q2text=this._g.append("text"),this._q3text=this._g.append("text"),this._q4text=this._g.append("text"),this._q0val=this._g.append("text"),this._q1val=this._g.append("text"),this._q2val=this._g.append("text"),this._q3val=this._g.append("text"),this._q4val=this._g.append("text")},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i);var o=n.scaleLinear().domain([this.data()[0],this.data()[4]]).range([this.edgePadding(),this.width()-this.edgePadding()]),r=this.dataHeight(),a=this.lineWidth(),s=this.lineColor(),l=this.roundedCorners(),h=this.edgePadding(),u=o(this.data()[1]),c=o(this.data()[2]),p=o(this.data()[3]),d=-r/2,f=r/2,y=this.upperTextRotation(),x=this.lowerTextRotation(),_=this.textPadding(),m=this.labelFontSize(),g=this.valueFontSize(),v=this.width()-h,b=-this.width()/2;this._g.attr("transform","translate("+b+",0)"),this._leftLine.attr("fill",s).attr("height",r).attr("width",a).attr("x",h).attr("y",d).attr("rx",l).attr("ry",l),this._rightLine.attr("fill",s).attr("height",r).attr("width",a).attr("x",v).attr("y",d).attr("rx",l).attr("ry",l),this._midLine.attr("fill",s).attr("height",a).attr("width",v-h).attr("x",h).attr("y",0),this._midOuterRect.attr("fill",s).attr("height",r).attr("width",p-u).attr("x",u).attr("y",d).attr("rx",l).attr("ry",l),this._midInnerRect1.attr("fill",this.innerRectColor()).attr("height",r-2*a).attr("width",c-(u+2*a)).attr("x",u+a).attr("y",a-r/2).attr("rx",.618*l).attr("ry",.618*l),this._midInnerRect2.attr("fill",this.innerRectColor()).attr("height",r-2*a).attr("width",p-c-a).attr("x",c).attr("y",a-r/2).attr("rx",.618*l).attr("ry",.618*l),this._q0text.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+h+", "+(d-_)+")rotate("+y+")").attr("font-size",m).text(this.columns()[0]),this._q1text.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+u+", "+(d-_)+")rotate("+y+")").attr("font-size",m).text(this.columns()[1]),this._q2text.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+c+", "+(d-_)+")rotate("+y+")").attr("font-size",m).text(this.columns()[2]),this._q3text.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+p+", "+(d-_)+")rotate("+y+")").attr("font-size",m).text(this.columns()[3]),this._q4text.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+v+", "+(d-_)+")rotate("+y+")").attr("font-size",m).text(this.columns()[4]),this._q0val.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+h+", "+(f+_)+")rotate("+x+")").attr("font-size",g).attr("text-anchor","end").text(this.data()[0]),this._q1val.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+u+", "+(f+_)+")rotate("+x+")").attr("font-size",g).attr("text-anchor","end").text(this.data()[1]),this._q2val.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+c+", "+(f+_)+")rotate("+x+")").attr("font-size",g).attr("text-anchor","end").text(this.data()[2]),this._q3val.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+p+", "+(f+_)+")rotate("+x+")").attr("font-size",g).attr("text-anchor","end").text(this.data()[3]),this._q4val.attr("height",r).attr("width",p-u).attr("x",0).attr("y",0).attr("transform","translate("+v+", "+(f+_)+")rotate("+x+")").attr("font-size",g).attr("text-anchor","end").text(this.data()[4])},e}(n.SVGWidget);to.prototype._class+=" chart_QuartileCandlestick",to.prototype.publish("valueFontSize",12,"number","Font size of value text (pixels)"),to.prototype.publish("labelFontSize",12,"number","Font size of label text (pixels)"),to.prototype.publish("roundedCorners",8,"number","Radius of rounded rect corners (pixels)"),to.prototype.publish("lineWidth",4,"number","Width of lines (pixels)"),to.prototype.publish("dataHeight",60,"number","Height of outer rect (pixels)"),to.prototype.publish("textPadding",8,"number","Padding between outer rect and text (pixels)"),to.prototype.publish("edgePadding",30,"number","Padding between outer rect and left/right sides (pixels)"),to.prototype.publish("lineColor","#333","html-color","Color of outer rect and lines"),to.prototype.publish("innerRectColor","white","html-color","Color of the inner rects"),to.prototype.publish("upperTextRotation",-60,"number","Rotation of label text (degrees)"),to.prototype.publish("lowerTextRotation",-60,"number","Rotation of value text (degrees)");At(".chart_Radar .pointShape,\r\n.chart_Radar .area {\r\n    pointer-events: none;\r\n}\r\n\r\n.chart_Radar .point .pointSelection {\r\n    fill: none;\r\n    stroke: none;\r\n    pointer-events: all;\r\n}\r\n\r\n.chart_Radar .point .pointSelection.selected {\r\n    fill: none;\r\n    stroke: red;\r\n}\r\n");var eo=function(t){function i(){var i=t.call(this)||this;return e.INDChart.call(i),e.ITooltip.call(i),n.Utility.SimpleSelectionMixin.call(i),i}return r(i,t),i.prototype.mapShape=function(t){switch(t){case"rectangle":return"rect";case"circle":return"circle";case"cross":return"path"}},i.prototype.setPointAttributes=function(t,e,n){var i=this;switch(this.mapShape(this.pointShape())){case"rect":t.attr("width",this.pointSize()).attr("height",this.pointSize()).style("fill",function(t){return i.strokeColor(t.data,t.column,t.value)});break;case"circle":t.attr("r",this.pointSize()/2).attr("cx",e).attr("cy",n).style("fill",function(t){return i.strokeColor(t.data,t.column,t.value)});break;case"path":var o=this.pointSize()/2;t.attr("d",function(t){return"M"+(e-o)+" "+(n-o)+" L"+(e+o)+" "+(n+o)+" M"+(e-o)+" "+(n+o)+" L"+(e+o)+" "+(n-o)}).style("stroke",function(t){return i.strokeColor(t.data,t.column,t.value)})}},i.prototype.enter=function(e,n){var i=this;t.prototype.enter.call(this,e,n),this._selection.widgetElement(n),this.tooltipHTML(function(t){return i.tooltipFormat({label:t.label,series:t.column,value:t.value})})},i.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i),this._palette=this._palette.switch(this.paletteID());var r=this,a=this.height()/2,s=this.width()/2,l=this.columns(),h=this.data(),u=this.flattenData(l,h).map(function(t,e){return t.shape=o.mapShape(o.pointShape()),t.column=l[t.colIdx],t.row=h[e],t}),c=[],p=this.degrees2radians(360/this.data().length),d=this.fontSize(),f=0;u.filter(function(t){return 1===t.colIdx}).forEach(function(e){var n=t.prototype.textSize.call(o,e.label,""+o.fontFamily(),o.fontSize());f<n.width&&(f=n.width)});var y=Math.min(a-d,s-f),x=i.selectAll(".label").data(u.filter(function(t){return 1===t.colIdx})),_=Math.max.apply(r,u.map(function(t){return t.value}));x.enter().append("text").attr("class","label").attr("text-anchor","middle").merge(x).each(function(t,e){var i=r.polar2cartesian(y,e*p-Math.PI/2);c.push(i.map(function(t){return t*r.labelPaddingRatio()}));var o="middle",a=Math.round(i[0]);o=a>0?"start":o,o=a<0?"end":o,n.select(this).attr("text-anchor",o).attr("x",i[0]).attr("y",i[1])}).text(function(t){return t.label}),x.exit().remove();var m=i.selectAll(".domain").data(u.filter(function(t){return 1===t.colIdx}));m.enter().append("line").classed("domain",!0).style("stroke","#000").style("stroke-opacity","0.75").style("stroke-width","1px").merge(m).attr("x1",0).attr("y1",0).attr("x2",function(t,e){return c[e][0]}).attr("y2",function(t,e){return c[e][1]}),m.exit().remove();var g=i.selectAll(".value_guide").data(this.valueGuideRatios());g.enter().append("polygon").classed("value_guide",!0).style("stroke","grey").style("stroke-opacity","0.75").style("stroke-width","0.3px").merge(g).each(function(t,e){var i=[];c.forEach(function(e,n){i.push([e[0]*t,e[1]*t])}),n.select(this).attr("points",i.join(" ")).attr("stroke","rgb(0, 0, 0)").attr("stroke-opacity",.75).attr("stroke-width",.3).attr("fill-opacity",0)}),g.exit().remove();var v=i.selectAll(".value_guide_text").data(this.valueGuideRatios());v.enter().append("text").attr("class","value_guide_text").attr("text-anchor","start").merge(v).attr("x",2).attr("y",function(t){return c[0][1]*t}).text(function(t,e){return Math.round(t*_)}),g.exit().remove();var b=i.selectAll(".area").data(l.filter(function(t,e){return e>0}));b.enter().append("polygon").attr("class","area").style("stroke-opacity","0.75").style("stroke-width","0.3px").merge(b).style("stroke",function(t){return o.strokeColor([],t,0)}).style("fill",function(t){return o.fillColor([],t,0)}).style("fill-opacity",this.fillOpacity()).attr("points",function(t,e){return c.map(function(t,n){var i=h[n][e+1],o=0===i?0:i/_;return t[0]*o+","+t[1]*o}).join(" ")}),b.exit().remove();var w=i.selectAll(".point").data(u);w.enter().append("g").attr("class","point").on("mouseout.tooltip",r.tooltip.hide).on("mousemove.tooltip",r.tooltip.show).on("click",function(t,e){var n=r.data()[t.rowIdx],i=r.rowToObj(n),o=r._selection.selected(this);r.click(i,r.columns()[t.colIdx],o)}).on("dblclick",function(t,e){r.dblclick(r.rowToObj(r.data()[t.rowIdx]),t.column,r._selection.selected(this))}).each(function(t){var e=n.select(this);e.append("circle").attr("class","pointSelection").attr("r",r.pointSize()).call(r._selection.enter.bind(r._selection)),e.append(r.mapShape(r.pointShape())).attr("class","pointShape")}).merge(w).each(function(t){var e=n.select(this),i=0===t.value?0:t.value/_,o=c[t.rowIdx][0]*i,a=c[t.rowIdx][1]*i;e.select(".pointSelection").attr("cx",o).attr("cy",a);var s=e.select(".pointShape").style("stroke",r.strokeColor(t.row,t.column,t.value)).style("fill",r.fillColor(t.row,t.column,t.value));r.setPointAttributes(s,o,a)}),w.exit().remove()},i.prototype.polar2cartesian=function(t,e){return[t*Math.cos(e),t*Math.sin(e)]},i.prototype.cartesian2polar=function(t,e){return[Math.atan2(e,t),Math.sqrt(t*t+e*e)]},i.prototype.degrees2radians=function(t){return t/57.295779513},i.prototype.radians2degrees=function(t){return 57.295779513*t},i.prototype.point_in_polygon=function(t,e){for(var n=t[0],i=t[1],o=!1,r=0,a=e.length-1;r<e.length;a=r++){var s=e[r][0],l=e[r][1],h=e[a][0],u=e[a][1];l>i!=u>i&&n<(h-s)*(i-l)/(u-l)+s&&(o=!o)}return o},i}(n.SVGWidget);eo.prototype._class+=" chart_Radar",eo.prototype.implements(e.INDChart.prototype),eo.prototype.implements(e.ITooltip.prototype),eo.prototype.mixin(n.Utility.SimpleSelectionMixin),eo.prototype.publish("paletteID","default","set","Color palette for this widget",eo.prototype._palette.switch()),eo.prototype.publish("pointShape","cross","set","pointShape",["circle","rectangle","cross"]),eo.prototype.publish("pointSize",6,"number","Point Size",null,{range:{min:1,step:1,max:200}}),eo.prototype.publish("valueGuideRatios",[.2,.4,.6,.8,1],"array","Array of values between 0 and 1 that are multiplied by the widget radius to produce guide lines"),eo.prototype.publish("fillOpacity",.66,"number","Opacity of the data polygon(s)"),eo.prototype.publish("fontFamily","","string","fontFamily"),eo.prototype.publish("fontSize",16,"number","fontSize"),eo.prototype.publish("labelPaddingRatio",.9,"number","labelPaddingRatio");At(".chart_RadialBar path.arc {\r\n    opacity: 0.9;\r\n    transition: opacity 0.5s;\r\n}\r\n\r\n.chart_RadialBar path.arc.selected {\r\n    stroke: red;\r\n}\r\n\r\n.chart_RadialBar path.arc:hover {\r\n    opacity: 0.7;\r\n}\r\n\r\n.chart_RadialBar .axis line,\r\n.chart_RadialBar .axis circle {\r\n    stroke: #cccccc;\r\n    stroke-width: 1px\r\n}\r\n\r\n.chart_RadialBar .axis circle {\r\n    fill: none;\r\n}\r\n\r\n.chart_RadialBar .r.axis text {\r\n    text-anchor: end\r\n}");var no=function(t){function i(){var i=t.call(this)||this;return i._domainScale=n.scaleBand(),i._valueScale=n.scaleLinear(),i._d3Arc=F().startAngle(0).endAngle(function(t){return i._valueScale(t[1])}),e.INDChart.call(i),e.ITooltip.call(i),n.Utility.SimpleSelectionMixin.call(i),i}return r(i,t),i.prototype.enter=function(e,n){var i=this;t.prototype.enter.call(this,e,n),this._selection.widgetElement(n),this.tooltipHTML(function(t){return i.tooltipFormat({label:t[0],value:t[1]})}),this._radialAxis=n.append("g").attr("class","r axis"),this._axialAxis=n.append("g").attr("class","a axis"),this._arcs=n.append("g").attr("class","data")},i.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i);var r=this,a=Math.max.apply(Math,[this.valueDomainHigh_exists()?this.valueDomainHigh():0].concat(this.data().map(function(t){return t[1]})));this._valueScale.domain([0,a]).range([0,this.radians(this.valueMaxAngle())]).nice();var s=this._valueScale.ticks(this.tickCount()),l=this.textSize(s.map(function(t){return""+t}),"Verdana",12).width,h=Math.min(this.width()-2*(10+l),this.height()-44)/2,u=this.data().map(function(t){return t[0]});this._domainScale.domain(u).range([0,h]).padding(this.domainPadding());var c=this._domainScale.step()*this._domainScale.padding(),p=this._radialAxis.selectAll("circle").data(u);p.enter().append("circle").attr("fill","transparent").merge(p).attr("r",function(t){return o._domainScale(t)+o._domainScale.step()-c/2}),p.exit().remove();var d=this._radialAxis.selectAll(".arc-text").data(u);d.enter().append("text").attr("class","arc-text").attr("x",-4).attr("alignment-baseline","middle").attr("text-anchor","end").merge(d).attr("y",function(t){return-o._domainScale(t)-o._domainScale.bandwidth()/2}).text(function(t){return t}),d.exit().remove();var f=this._axialAxis.selectAll("line").data(s);f.enter().append("line").merge(f).attr("x2",function(t){return h*Math.cos(o._valueScale(t)-o.radians(90))}).attr("y2",function(t){return h*Math.sin(o._valueScale(t)-o.radians(90))}),f.exit().remove();var y=this._axialAxis.selectAll("text").data(s);y.enter().append("text").style("dominant-baseline","central").merge(y).attr("x",function(t){return(h+10)*Math.cos(o._valueScale(t)-o.radians(90))}).attr("y",function(t){return(h+10)*Math.sin(o._valueScale(t)-o.radians(90))}).style("text-anchor",function(t){var e=o.degrees(o._valueScale(t));return e>=0&&e<=20||e>=160&&e<=200||e>=340&&e<=360?"middle":e>=180&&e<=360?"end":null}).text(function(t){return t}),y.exit().remove();var x=this.columns().length>1?this.columns()[1]:"";this._d3Arc.innerRadius(function(t){return o._domainScale(t[0])}).outerRadius(function(t){return o._domainScale(t[0])+o._domainScale.bandwidth()});var _=this._arcs.selectAll("path").data(this.data(),function(t){return t[0]});_.enter().append("path").attr("class","arc").call(this._selection.enter.bind(this._selection)).on("mouseout.tooltip",this.tooltip.hide).on("mousemove.tooltip",this.tooltip.show).on("click",function(t,e){r.click(r.rowToObj(t),x,r._selection.selected(this))}).on("dblclick",function(t,e){r.dblclick(r.rowToObj(t),x,r._selection.selected(this))}).merge(_).style("fill",function(t,e){return o.fillColor(t,t[0],t[1])}).transition().delay(function(t,e){return e*o.transitionDelay()}).duration(this.transitionDuration()).attrTween("d",function(t,e){var i=n.interpolate(t._current||0,t[1]);return t._current=t[1],function(n){return o._d3Arc([t[0],i(n)],e)}}),_.exit().remove()},i.prototype.degrees=function(t){return 180*t/Math.PI},i.prototype.radians=function(t){return t*Math.PI/180},i.__inputs=[{id:"label",type:"any"},{id:"values",type:"number"}],i}(n.SVGWidget);no.prototype._class+=" chart_RadialBar",no.prototype.implements(e.INDChart.prototype),no.prototype.implements(e.ITooltip.prototype),no.prototype.mixin(n.Utility.SimpleSelectionMixin),no.prototype.publish("paletteID","default","set","Color palette for this widget",no.prototype._palette.switch()),no.prototype.publish("tickCount",10,"number","Number of ticks to display"),no.prototype.publish("domainPadding",.25,"number","Padding between chart edge and container edge (0..1)"),no.prototype.publish("valueMaxAngle",270,"number","Maximum angular length of a bar (degrees)"),no.prototype.publish("valueDomainHigh",null,"number","Value domain high",void 0,{optional:!0}),no.prototype.publish("transitionDelay",100,"number","Delay between the start of each row animation (ms)"),no.prototype.publish("transitionDuration",750,"number","Duration of a row's animation (ms)");var io=function(t){function e(){var e=t.call(this)||this;return e.interpolate_default("step"),e}return r(e,t),e}(Tt);io.prototype._class+=" chart_Step";At("/* imports */\r\n@import url(https://fonts.googleapis.com/css?family=Lato:400);\r\n\r\n.chart_Summary {\r\n    width: 225px;\r\n    height: 150px;\r\n    font-size: 14px;\r\n}\r\n\r\n.chart_Summary .content h2 {\r\n    font-weight: bold;\r\n    font-size: 3em;\r\n    margin-left: 10px;\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.chart_Summary .bgIcon:before {\r\n    position: absolute;\r\n    font-family: FontAwesome;\r\n    font-size: 5.5em;\r\n    opacity: 0.4;\r\n    top: 0.5em;\r\n    right: 15px;\r\n}\r\n\r\n.chart_Summary .bgIcon {\r\n    position: relative;\r\n}\r\n    \r\n.chart_Summary .content {\r\n    float: left;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #efd752;\r\n}\r\n\r\n.chart_Summary .content div {\r\n    margin-top: -1.1em;\r\n    font-size: 1.1em;\r\n    opacity: 0.8;\r\n}\r\n\r\n.chart_Summary .content .text {\r\n   padding-left: 10px;\r\n}\r\n\r\n.chart_Summary .content .more {\r\n    position: absolute;\r\n    bottom:0px;\r\n    width: 100%;\r\n    height: 3em;\r\n    line-height: 3em;\r\n}\r\n\r\n.chart_Summary .content .more i {\r\n   padding-left: 10px;\r\n   padding-right: 0.5em;\r\n}\r\n");var oo=function(t){function e(){var e=t.call(this)||this;return e._playIntervalIdx=0,e._tag="div",e._drawStartPos="center",e.playInterval(e.playInterval()),e}return r(e,t),e.prototype.lookupFieldIdx=function(t,e){var n=e;if(!(this[t+"_exists"]()&&(n=this.columns().indexOf(this[t]()))<0))return n},e.prototype.lookupFieldText=function(t,e){return this[t+"_exists"]()?this[t]():void 0!==e&&this.columns()[e]||""},e.prototype.currentRow=function(){return this.data()[this._playIntervalIdx]},e.prototype.summaryData=function(){var t;this.hideLabel()||(t=this.lookupFieldIdx("labelColumn",0));var e,n,i=this.lookupFieldIdx("iconColumn"),o=this.lookupFieldIdx("valueColumn",1);this.hideMore()||(e=this.lookupFieldIdx("moreIconColumn"),n=this.lookupFieldIdx("moreTextColumn"));var r=this.lookupFieldIdx("colorFillColumn"),a=this.lookupFieldIdx("colorStrokeColumn");return this.formattedData().map(function(s){return{icon:void 0===i?this.icon():s[i],label:void 0===t?"":s[t],value:s[o],moreIcon:void 0===e?this.hideMore()?"":this.moreIcon():s[e],moreText:void 0===n?this.hideMore()?"":this.moreText():s[n],fill:void 0===r?this.colorFill():s[r],stroke:void 0===a?this.colorStroke():s[a]}},this)},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._mainDiv=n.append("div");var i=this;this._headerDiv=this._mainDiv.append("h2").on("click",function(){i.click(i.rowToObj(i.currentRow()),i.lookupFieldText("valueColumn",1),!0)}).on("dblclick",function(){i.dblclick(i.rowToObj(i.currentRow()),i.lookupFieldText("valueColumn",1),!0)}),this._textDiv=this._mainDiv.append("div").attr("class","text").on("click",function(){i.click(i.rowToObj(i.currentRow()),i.lookupFieldText("labelColumn",0),!0)}).on("dblclick",function(){i.dblclick(i.rowToObj(i.currentRow()),i.lookupFieldText("labelColumn",0),!0)})},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i),this.data().length;var o=this.summaryData();this._playIntervalIdx>=o.length&&(this._playIntervalIdx=0);var r=this._playIntervalIdx<o.length?o[this._playIntervalIdx]:["",""];i.style({width:this.fixedSize()?this.minWidth_exists()?this.minWidth()+"px":null:"100%",height:this.fixedSize()?this.minHeight_exists()?this.minHeight()+"px":null:"100%"}),this._mainDiv.attr("class","content bgIcon "+r.icon).transition().style("background-color",r.fill).style("color",r.stroke).style("min-width",this.minWidth_exists()?this.minWidth()+"px":null).style("min-height",this.minHeight_exists()?this.minHeight()+"px":null).style("font-size",this.iconFontSize()+"px"),this._headerDiv.transition().style("color",r.stroke).style("font-size",this.headerFontSize()+"px")[this.valueHTML()?"html":"text"](r.value),this._textDiv.style("font-size",this.textFontSize()+"px")[this.labelHTML()?"html":"text"](r.label);var a=this,s=this._mainDiv.selectAll(".more").data([r]);s.enter().append("div").attr("class","more").on("click",function(t){a.click(a.rowToObj(a.currentRow()),a.lookupFieldText("moreTextColumn")||"more",!0)}).each(function(){var t=n.select(this);t.append("i"),t.append("span")}).merge(s).style("font-size",this.moreFontSize()+"px").transition().style("background-color",n.rgb(r.fill).darker(.75).toString()),s.select("i").attr("class",function(t){return"fa "+t.moreIcon}),this.moreTextHTML()?s.select("span").html(function(t){return t.moreText}):s.select("span").text(function(t){return t.moreText}),s.exit().remove()},e.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},e}(n.HTMLWidget);oo.prototype._class+=" chart_Summary",oo.prototype.implements(e.I2DChart.prototype),oo.prototype.publish("iconColumn",null,"set","Select Icon Column",function(){return this.columns()},{optional:!0}),oo.prototype.publish("icon","fa-briefcase","string","FA Char icon class",null,{disable:function(t){return t.iconColumn()}}),oo.prototype.publish("headerFontSize",null,"number","headerFontSize"),oo.prototype.publish("textFontSize",null,"number","textFontSize"),oo.prototype.publish("moreFontSize",null,"number","moreFontSize"),oo.prototype.publish("iconFontSize",null,"number","iconFontSize"),oo.prototype.publish("hideLabel",!1,"boolean","Hide label column"),oo.prototype.publish("labelColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideLabel()}}),oo.prototype.publish("labelHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideLabel()}}),oo.prototype.publish("valueColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0}),oo.prototype.publish("valueHTML",!1,"boolean","Allow HTML"),oo.prototype.publish("hideMore",!1,"boolean","Hide More Information"),oo.prototype.publish("moreIconColumn",null,"set","Select More Icon Column",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),oo.prototype.publish("moreIcon","fa-info-circle","string","FA Char icon class",null,{disable:function(t){return t.hideMore()||t.moreIconColumn()}}),oo.prototype.publish("moreTextColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),oo.prototype.publish("moreText","More Info","string","More text",null,{disable:function(t){return t.hideMore()||t.moreTextColumn()}}),oo.prototype.publish("moreTextHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideMore()}}),oo.prototype.publish("colorFillColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),oo.prototype.publish("colorFill","#3498db","html-color","Fill Color",null,{disable:function(t){return t.colorFillColumn()}}),oo.prototype.publish("colorStrokeColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),oo.prototype.publish("colorStroke","#ffffff","html-color","Fill Color",null,{disable:function(t){return t.colorStrokeColumn()}}),oo.prototype.publish("fixedSize",!0,"boolean","Fix Size to Min Width/Height"),oo.prototype.publish("minWidth",225,"number","Minimum Width"),oo.prototype.publish("minHeight",150,"number","Minimum Height"),oo.prototype.publish("playInterval",null,"number","Play Interval",null,{optional:!0});var ro=oo.prototype.playInterval;oo.prototype.playInterval=function(t){var e=ro.apply(this,arguments);if(arguments.length){this._playIntervalHandle&&clearInterval(this._playIntervalHandle);var n=this;t&&(this._playIntervalHandle=setInterval(function(){n._playIntervalIdx++,n._renderCount&&n.data().length&&n.render()},t))}return e};var ao=function(t){function i(){var n=t.call(this)||this;return n._playIntervalIdx=0,e.I2DChart.call(n),n.playInterval(n.playInterval()),n}return r(i,t),i.prototype.currentRow=function(){return this.data()[this._playIntervalIdx]},i.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments);var i=this.size();e.height=i.height,e.width=i.width},i.prototype.update=function(e,i){t.prototype.update.apply(this,arguments);this._playIntervalIdx>=this.data().length&&(this._playIntervalIdx=0);var o=this.size(),r=this.mult(),a=this.columns().indexOf(this.labelColumn()),s=this.columns().indexOf(this.valueColumn()),l=this.columns().indexOf(this.colorFillColumn()),h=this.columns().indexOf(this.colorStrokeColumn()),u=this.columns().indexOf(this.iconColumn()),c=-1!==u?this.currentRow()[u]:this.icon(),p=-1!==a?this.currentRow()[a]:"",d=-1!==s?this.currentRow()[s]:"",f=-1!==l?this.currentRow()[l]:"#0097e6",y=-1!==h?this.currentRow()[h]:"#2f3640",x=o.height*Math.pow(r,this.mainSizeExp()),_=o.height*Math.pow(r,this.subSizeExp()),m=o.height-o.height*Math.pow(r,this.iconSizeMult()),g=o.width*Math.pow(r,this.paddingSizeExp()),v=o.height*Math.pow(r,this.paddingSizeExp()),b=e.getContext("2d");b.textBaseline="top";var w=this.fontFamily();function k(t,e,n,i){b.font=n+"px "+w,b.fillStyle=y;var r=b.measureText(t);r.width>o.width&&(n*=(o.width-2*g)/r.width,b.font=n+"px "+w,r=b.measureText(t));return b.fillText(t,S(r.width,i),e),n}function S(t,e){switch(e){case"start":return g;case"middle":return o.width/2-t/2;case"end":return o.width-t-g}}b.fillStyle=f,b.fillRect(0,0,o.width,o.height),b.globalAlpha=this.iconOpacity(),function(t,e,n,i){b.font=n+"px FontAwesome",b.fillStyle=y;var r=b.measureText(t);if(r.width>o.width){var a=(o.width-2*g)/r.width;b.font=n*a+"px FontAwesome",r=b.measureText(t)}b.fillText(t,S(r.width,i),e)}(n.Utility.faCode(c),v,m,this.iconAnchor()),b.globalAlpha=this.valueOpacity(),x=k(d,v,x,this.valueAnchor()),b.globalAlpha=this.labelOpacity(),k(p,x+v,_,this.labelAnchor())},i}(n.CanvasWidget);ao.prototype._class+=" chart_SummaryC",ao.prototype.implements(e.I2DChart.prototype),ao.prototype.publish("iconAnchor","start","set","Anchors the icon either at the start, middle, or end of the summary",["start","middle","end"]),ao.prototype.publish("valueAnchor","start","set","Anchors the value either at the start, middle, or end of the summary",["start","middle","end"]),ao.prototype.publish("labelAnchor","start","set","Anchors the label either at the start, middle, or end of the summary",["start","middle","end"]),ao.prototype.publish("iconColumn",null,"set","Select Icon Column",function(){return this.columns()},{optional:!0}),ao.prototype.publish("icon","fa-briefcase","string","FA Char icon class",null,{disable:function(t){return t.iconColumn()}}),ao.prototype.publish("fontFamily","Arial","string","Font Family"),ao.prototype.publish("hideLabel",!1,"boolean","Hide label column"),ao.prototype.publish("labelColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideLabel()}}),ao.prototype.publish("labelHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideLabel()}}),ao.prototype.publish("valueColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0}),ao.prototype.publish("valueHTML",!1,"boolean","Allow HTML"),ao.prototype.publish("hideMore",!1,"boolean","Hide More Information"),ao.prototype.publish("moreIconColumn",null,"set","Select More Icon Column",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),ao.prototype.publish("moreIcon","fa-info-circle","string","FA Char icon class",null,{disable:function(t){return t.hideMore()||t.moreIconColumn()}}),ao.prototype.publish("moreTextColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),ao.prototype.publish("moreText","More Info","string","More text",null,{disable:function(t){return t.hideMore()||t.moreTextColumn()}}),ao.prototype.publish("moreTextHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideMore()}}),ao.prototype.publish("colorFillColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),ao.prototype.publish("colorFill","#3498db","html-color","Fill Color",null,{disable:function(t){return t.colorFillColumn()}}),ao.prototype.publish("colorStrokeColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),ao.prototype.publish("colorStroke","#ffffff","html-color","Fill Color",null,{disable:function(t){return t.colorStrokeColumn()}}),ao.prototype.publish("fixedSize",!0,"boolean","Fix Size to Min Width/Height"),ao.prototype.publish("minWidth",225,"number","Minimum Width"),ao.prototype.publish("minHeight",150,"number","Minimum Height"),ao.prototype.publish("playInterval",null,"number","Play Interval",null,{optional:!0}),ao.prototype.publish("mult",.618,"number","mult"),ao.prototype.publish("valueOpacity",1,"number","valueOpacity"),ao.prototype.publish("labelOpacity",.9,"number","labelOpacity"),ao.prototype.publish("iconOpacity",.3,"number","iconOpacity"),ao.prototype.publish("mainSizeExp",1,"number","mainSizeExp"),ao.prototype.publish("subSizeExp",3,"number","subSizeExp"),ao.prototype.publish("paddingSizeExp",6,"number","paddingSizeExp"),ao.prototype.publish("iconSizeMult",4,"number","iconSizeMult");var so=ao.prototype.playInterval;ao.prototype.playInterval=function(t){var e=so.apply(this,arguments);if(arguments.length){this._playIntervalHandle&&clearInterval(this._playIntervalHandle);var n=this;t&&(this._playIntervalHandle=setInterval(function(){n._playIntervalIdx++,n._renderCount&&n.data().length&&n.render()},t))}return e};var lo=Math.PI/180,ho=64,uo=2048;function co(){var t=n.dispatch("word","end"),e={},i=[256,256],o=po,r=fo,a=xo,s=yo,l=yo,h=_o,u=mo,c=[],p=wo,d=1/0,f=null,y=Math.random,x=ko;function _(t,e,n){for(var o,r,a,s,l,h=e.x,u=e.y,c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),d=p(i),f=y()<.5?1:-1,x=-f;(o=d(x+=f))&&(r=~~o[0],a=~~o[1],!(Math.min(Math.abs(r),Math.abs(a))>=c));)if(e.x=h+r,e.y=u+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>i[0]||e.y+e.y1>i[1]||n&&vo(e,t,i[0])||n&&(l=n,!((s=e).x+s.x1>l[0].x&&s.x+s.x0<l[1].x&&s.y+s.y1>l[0].y&&s.y+s.y0<l[1].y)))){for(var _=e.sprite,m=e.width>>5,g=i[0]>>5,v=e.x-(m<<4),b=127&v,w=32-b,k=e.y1-e.y0,S=(e.y+e.y0)*g+(v>>5),A=void 0,M=0;M<k;M++){A=0;for(var P=0;P<=m;P++)t[S+P]|=A<<w|(P<m?(A=_[M*m+P])>>>b:0);S+=g}return delete e.sprite,!0}return!1}return e.canvas=function(t){return arguments.length?(x=So(t),e):x},e.start=function(){var n=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(ho<<5)/e,t.height=uo/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(x()),p=function(t){var e=[],n=-1;for(;++n<t;)e[n]=0;return e}((i[0]>>5)*i[1]),m=null,g=c.length,v=-1,b=[],w=c.map(function(t,e){return t.text=o.call(this,t,e),t.font=r.call(this,t,e),t.style=s.call(this,t,e),t.weight=l.call(this,t,e),t.rotate=h.call(this,t,e),t.size=~~a.call(this,t,e),t.padding=u.call(this,t,e),t}).sort(function(t,e){return e.size-t.size});return f&&clearInterval(f),f=setInterval(k,0),k(),e;function k(){for(var o=Date.now();Date.now()-o<d&&++v<g&&f;){var r=w[v];r.x=i[0]*(y()+.5)>>1,r.y=i[1]*(y()+.5)>>1,go(n,r,w,v),r.hasText&&_(p,r,m)&&(b.push(r),t.call("word",e,r),m?bo(m,r):m=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}],r.x-=i[0]>>1,r.y-=i[1]>>1)}v>=g&&(e.stop(),t.call("end",e,b,m))}},e.stop=function(){return f&&(clearInterval(f),f=null),e},e.timeInterval=function(t){return arguments.length?(d=null==t?1/0:t,e):d},e.words=function(t){return arguments.length?(c=t,e):c},e.size=function(t){return arguments.length?(i=[+t[0],+t[1]],e):i},e.font=function(t){return arguments.length?(r=So(t),e):r},e.fontStyle=function(t){return arguments.length?(s=So(t),e):s},e.fontWeight=function(t){return arguments.length?(l=So(t),e):l},e.rotate=function(t){return arguments.length?(h=So(t),e):h},e.text=function(t){return arguments.length?(o=So(t),e):o},e.spiral=function(t){return arguments.length?(p=Ao[t]||t,e):p},e.fontSize=function(t){return arguments.length?(a=So(t),e):a},e.padding=function(t){return arguments.length?(u=So(t),e):u},e.random=function(t){return arguments.length?(y=t,e):y},e.on=function(){var n=t.on.apply(t,arguments);return n===t?e:n},e}function po(t){return t.text}function fo(){return"serif"}function yo(){return"normal"}function xo(t){return Math.sqrt(t.value)}function _o(){return 30*(~~(6*Math.random())-3)}function mo(){return 1}function go(t,e,n,i){if(!e.sprite){var o=t.context,r=t.ratio;o.clearRect(0,0,(ho<<5)/r,uo/r);var a=0,s=0,l=0,h=n.length;for(--i;++i<h;){e=n[i],o.save(),o.font=e.style+" "+e.weight+" "+~~((e.size+1)/r)+"px "+e.font;var u=o.measureText(e.text+"m").width*r,c=e.size<<1;if(e.rotate){var p=Math.sin(e.rotate*lo),d=Math.cos(e.rotate*lo),f=u*d,y=u*p,x=c*d,_=c*p;u=Math.max(Math.abs(f+_),Math.abs(f-_))+31>>5<<5,c=~~Math.max(Math.abs(y+x),Math.abs(y-x))}else u=u+31>>5<<5;if(c>l&&(l=c),a+u>=ho<<5&&(a=0,s+=l,l=0),s+c>=uo)break;o.translate((a+(u>>1))/r,(s+(c>>1))/r),e.rotate&&o.rotate(e.rotate*lo),o.fillText(e.text,0,0),e.padding&&(o.lineWidth=2*e.padding,o.strokeText(e.text,0,0)),o.restore(),e.width=u,e.height=c,e.xoff=a,e.yoff=s,e.x1=u>>1,e.y1=c>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=u}for(var m=o.getImageData(0,0,(ho<<5)/r,uo/r).data,g=[];--i>=0;)if((e=n[i]).hasText){for(var v=(u=e.width)>>5,b=(c=e.y1-e.y0,0);b<c*v;b++)g[b]=0;if(null==(a=e.xoff))return;s=e.yoff;for(var w=0,k=-1,S=0;S<c;S++){for(b=0;b<u;b++){var A=v*S+(b>>5),M=m[(s+S)*(ho<<5)+(a+b)<<2]?1<<31-b%32:0;g[A]|=M,w|=M}w?k=S:(e.y0++,c--,S--,s++)}e.y1=e.y0+k,e.sprite=g.slice(0,(e.y1-e.y0)*v)}}}function vo(t,e,n){n>>=5;for(var i,o=t.sprite,r=t.width>>5,a=t.x-(r<<4),s=127&a,l=32-s,h=t.y1-t.y0,u=(t.y+t.y0)*n+(a>>5),c=0;c<h;c++){i=0;for(var p=0;p<=r;p++)if((i<<l|(p<r?(i=o[c*r+p])>>>s:0))&e[u+p])return!0;u+=n}return!1}function bo(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function wo(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function ko(){return document.createElement("canvas")}function So(t){return"function"==typeof t?t:function(){return t}}var Ao={archimedean:wo,rectangular:function(t){var e=4*t[0]/t[1],n=0,i=0;return function(t){var o=t<0?-1:1;switch(Math.sqrt(1+4*o*t)-o&3){case 0:n+=e;break;case 1:i+=4;break;case 2:n-=e;break;default:i-=4}return[n,i]}}};At(".other_Wordcloud text {\r\n    cursor: pointer;\r\n}\r\n");var Mo=function(t){function i(){var i=t.call(this)||this;return e.I2DChart.call(i),e.ITooltip.call(i),n.Utility.SimpleSelectionMixin.call(i),i._prevOffsetX=i.offsetX(),i._prevOffsetY=i.offsetY(),i._prevZoom=i.zoom(),i}return r(i,t),i.prototype.calcData=function(){return this.data().map(function(t){return{__viz_0:t[0],__viz_1:t[1],__viz_2:t[2]}})},i.prototype.enter=function(e,i){t.prototype.enter.call(this,e,i),this._selection.widgetElement(i),this._root=i.append("g"),this._canvas=document.createElement("canvas");var o=this;this._d3Zoom=n.zoom().scaleExtent([.1,10]),this._d3Zoom.on("zoom",function(t){n.event&&n.event.transform&&o.zoomed(o._d3Zoom,[n.event.transform.x,n.event.transform.y],n.event.transform.k)}),i.call(this._d3Zoom),this.tooltipHTML(function(t){var e=o.columns(),n=e&&e.length?e[0]:"Word";return o.tooltipFormat({label:t.__viz_0,series:n,value:t.__viz_1})})},i.prototype.update=function(e,i){var o=this;t.prototype.update.call(this,e,i),this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._d3Cloud=co().canvas(function(){return o._canvas}),this.zoomed(this,[this.offsetX(),this.offsetY()],this.zoom());var r,a=this.calcData(),s=this,l=n.extent(a,function(t){return t.__viz_1});switch(this.scaleMode()){case"log":r=n.scaleLog;break;case"sqrt":r=n.scaleSqrt;break;case"pow":r=n.scalePow;break;case"linear":default:r=n.scaleLinear}var h=r().domain(l).range([this.fontSizeFrom(),this.fontSizeTo()]),u=n.scaleLinear().domain([0,s.angleCount()-1]).range([s.angleFrom(),s.angleTo()]);this._d3Cloud.stop().size([this.width(),this.height()]).words(a).font(this.fontFamily()).padding(this.padding()).spiral(this.spiral()).text(function(t){return t.__viz_0.trim()}).fontSize(function(t){return h(t.__viz_1)}).rotate(function(t,e){return u(e%s.angleCount())}).on("word",function(t){}).on("end",function(t,e){var n=s._root.selectAll("text").data(t,function(t){return t.__viz_0?t.__viz_0.toLowerCase():""});n.enter().append("text").attr("text-anchor","middle").call(s._selection.enter.bind(s._selection)).text(function(t){return t.__viz_0}).on("click",function(t){s.click({label:t.__viz_0,weight:t.__viz_1},"",!0)}).on("dblclick",function(t){s.dblclick({label:t.__viz_0,weight:t.__viz_1},"",!0)}).on("mouseout.tooltip",s.tooltip.hide).on("mousemove.tooltip",s.tooltip.show).style("opacity",1e-6).merge(n).style("font-size",function(t){return h(t.__viz_1)+"px"}).style("font-family",s.fontFamily()).transition().duration(1e3).attr("transform",function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"}).style("fill",function(t){return s._palette(t.__viz_0?t.__viz_0.toLowerCase():"")}).style("opacity",1),n.exit().transition().duration(1e3).style("opacity",1e-4).remove()}).start()},i.prototype.zoomed=function(t,e,n){if(e[0]!==this._prevOffsetX||e[1]!==this._prevOffsetY||n!==this._prevZoom){switch(this._root.attr("transform",e),t){case this:break;case this._d3Zoom:this.offsetX(e[0]),this.offsetY(e[1]),this.zoom(n)}this._prevOffsetX=e[0],this._prevOffsetY=e[1],this._prevZoom=n}},i.__inputs=[{id:"label",type:"string"},{id:"value",type:"number"}],i}(n.SVGWidget);Mo.prototype._class+=" chart_WordCloud",Mo.prototype.implements(e.I2DChart.prototype),Mo.prototype.implements(e.ITooltip.prototype),Mo.prototype.mixin(n.Utility.SimpleSelectionMixin),Mo.prototype.publish("paletteID","default","set","Color palette for this widget",Mo.prototype._palette.switch(),{tags:["Basic","Shared"]}),Mo.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),Mo.prototype.publish("fontFamily","Impact","string","Font Name",null,{tags:["Basic"]}),Mo.prototype.publish("fontSizeFrom",6,"number","Minimum font size (pixels)",null,{tags:["Basic"]}),Mo.prototype.publish("fontSizeTo",48,"number","Maximum font size (pixels)",null,{tags:["Basic"]}),Mo.prototype.publish("angleFrom",-60,"number","Minimum angle (degrees)",null,{tags:["Basic"]}),Mo.prototype.publish("angleTo",60,"number","Maximum angle (degrees)",null,{tags:["Basic"]}),Mo.prototype.publish("angleCount",5,"number","Number of different angles",null,{tags:["Basic"]}),Mo.prototype.publish("padding",0,"number","Padding between words (pixels)",null,{tags:["Intermediate"]}),Mo.prototype.publish("scaleMode","linear","set","Text scaling mode",["linear","log","sqrt","pow"],{tags:["Intermediate"]}),Mo.prototype.publish("spiral","archimedean","set","Text scaling mode",["archimedean","rectangular"],{tags:["Intermediate"]}),Mo.prototype.publish("offsetX",0,"number","X offset",null,{tags:["Advanced"]}),Mo.prototype.publish("offsetY",0,"number","Y offset",null,{tags:["Advanced"]}),Mo.prototype.publish("zoom",1,"number","Zoom",null,{tags:["Advanced"]}),t.PKG_NAME="@hpcc-js/chart",t.PKG_VERSION="2.11.0",t.BUILD_VERSION="2.3.0",t.Area=Ct,t.Axis=Mt,t.Bar=zt,t.Bubble=Qt,t.BubbleXY=Kt,t.Bullet=ue,t.Column=It,t.Contour=En,t.Gantt=Nn,t.Gauge=Wi,t.HalfPie=Xi,t.HexBin=Qi,t.Line=Ki,t.Pie=Gi,t.QuarterPie=$i,t.QuartileCandlestick=to,t.Radar=eo,t.RadialBar=no,t.Scatter=Tt,t.Step=io,t.Summary=oo,t.SummaryC=ao,t.WordCloud=Mo,t.XYAxis=Pt,Object.defineProperty(t,"__esModule",{value:!0})});

/***/ })

}]);